---
layout: windowsazurestorage
title: Microsoft Azure Storage Emulator 3.1 with RA-GRS
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-152" class="post-152 post type-post status-publish format-standard hentry category-uncategorized tag-microsoft-azure-storage-emulator">

	<header class="entry-header single">
		<h1 class="entry-title">Microsoft Azure Storage Emulator 3.1 with RA-GRS</h1>		<div class="rating-wrap">
		<div id="star-rating-152" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="152" data-container="body" data-toggle="tooltip" title="1 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2014-05-08T08:10:00+00:00">May 8, 2014</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/#comments">2</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/&quot;, &quot;text&quot;: &quot;Microsoft Azure Storage Emulator 3.1 with RA-GRS&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/&quot;, &quot;text&quot;: &quot;Microsoft Azure Storage Emulator 3.1 with RA-GRS&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>We are pleased to announce the release of the Azure Storage Emulator 3.1, with support for Read Access to Geo Redundant Storage (RA-GRS). The read-only replica of the development storage account can now be accessed by using &ldquo;devstoreaccount1-secondary&rdquo; in the URL. For example, the following address might be used for accessing a blob using the read-only replica in the storage emulator:</p>
<p><span style="font-family: Courier New; font-size: x-small;">http://127.0.0.1:10000/devstoreaccount1-secondary/mycontainer/myblob.txt</span></p>
<p>In the Storage Emulator, all accounts have RA-GRS enabled; there is never any lag between the primary and secondary replicas. The <a href="http://msdn.microsoft.com/en-us/library/dn495326.aspx" target="_blank">Get Blob Service Stats</a>, <a href="http://msdn.microsoft.com/en-us/library/dn495327.aspx" target="_blank">Get Queue Service Stats</a>, and <a href="http://msdn.microsoft.com/en-us/library/dn495325.aspx" target="_blank">Get Table Service Stats</a> APIs are supported on the secondary endpoint and will always return LastSyncTime as the current time according to the underlying SQL database.</p>
<p>Starting with <a href="http://www.nuget.org/packages/WindowsAzure.Storage" target="_blank">Storage Client Library 3.2</a>, the library supports RA-GRS against the storage emulator using the familiar syntax. For example, the following code calls Get Table Service Stats in the emulator:</p>
<div id="codeSnippetWrapper" style="overflow: auto; cursor: text; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 97.5%; direction: ltr; text-align: left; margin: 20px 0px 10px; line-height: 12pt; max-height: 200px; background-color: #f4f4f4; border: silver 1px solid; padding: 4px;">
<div id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudStorageAccount account = CloudStorageAccount.DevelopmentStorageAccount; </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">CloudTableClient client = account.CreateCloudTableClient(); </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">&nbsp;</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #008000;">// Note that Get Service Stats is supported only on secondary endpoint </span></pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">client.LocationMode = LocationMode.SecondaryOnly; </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">ServiceStats stats = client.GetServiceStats();</pre>
<!--CRLF--></div>
</div>
<p>Storage Emulator 3.1 is now included in <a href="http://azure.microsoft.com/en-us/downloads/" target="_blank">Azure SDK for .NET 2.3</a>. Those who do not currently have SDK 2.3 will get Storage Emulator 3.1 automatically when SDK 2.3 is installed. Those who previously installed SDK 2.3 can upgrade to Storage Emulator 3.1 either by installing SDK 2.3 again or by downloading the standalone installer from the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=42317" target="_blank">SDK 2.3 download page</a>. Note that Storage Emulator 3.1 is not compatible with SDK versions prior to 2.3.</p>
<p>For more information on Azure Storage Redundancy and RA-GRS, see the <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">blog post</a> on this topic.</p>
<p>Michael Roberson</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
					<div class="tags">
				<span>Tags </span>
				<span>
					<a href="https://blogs.msdn.microsoft.com/windowsazurestorage/tag/microsoft-azure-storage-emulator/" rel="tag">Microsoft Azure Storage Emulator</a>				</span>
			</div>
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (2)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2014%2F05%2F08%2Fmicrosoft-azure-storage-emulator-3-1-with-ra-grs%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-439">
				<div id="div-comment-439" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Mike Goatly</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/#comment-439">
			May 12, 2014 at 3:09 am</a>		</div>

		<p>Nice. Is it possible to disable the primary endpoint of the emulator? I can imagine a time when it might be useful when testing how code behaves when it is not available.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2014%2F05%2F08%2Fmicrosoft-azure-storage-emulator-3-1-with-ra-grs%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-446">
				<div id="div-comment-446" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/f8c91b72247788a0ac7da6fbcb22eb8e?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/f8c91b72247788a0ac7da6fbcb22eb8e?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">roberme@umich.edu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs/#comment-446">
			May 14, 2014 at 12:52 pm</a>		</div>

		<p>@Mike: The emulator always accepts requests from both primary and secondary endpoints. You can simulate a down primary endpoint by configuring your primary endpoint to use a bogus port. The following code will do this for the blob endpoint in Storage Client Library 3.2:</p>
<p>// Port 12345 is bogus</p>
<p>StorageUri blobUriDownPrimary = new StorageUri(</p>
<p> &nbsp; &nbsp;new Uri(&quot;<a rel="nofollow" target="_new" href="http://127.0.0.1:12345/devstoreaccount1&quot;">127.0.0.1/devstoreaccount1&quot;</a>),</p>
<p> &nbsp; &nbsp;new Uri(&quot;<a rel="nofollow" target="_new" href="http://127.0.0.1:10000/devstoreaccount1-secondary&quot;">127.0.0.1/devstoreaccount1-secondary&quot;</a>));</p>
<p>CloudStorageAccount account = new CloudStorageAccount(</p>
<p> &nbsp; &nbsp;CloudStorageAccount.DevelopmentStorageAccount.Credentials,</p>
<p> &nbsp; &nbsp;blobStorageUri: blobUriDownPrimary,</p>
<p> &nbsp; &nbsp;queueStorageUri: null,</p>
<p> &nbsp; &nbsp;tableStorageUri: null);</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2014%2F05%2F08%2Fmicrosoft-azure-storage-emulator-3-1-with-ra-grs%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->