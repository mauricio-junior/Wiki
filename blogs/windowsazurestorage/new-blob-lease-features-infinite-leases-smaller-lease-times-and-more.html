---
layout: windowsazurestorage
title: New Blob Lease Features&#58; Infinite Leases, Smaller Lease Times, and More
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-80" class="post-80 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">New Blob Lease Features: Infinite Leases, Smaller Lease Times, and More</h1>		<div class="rating-wrap">
		<div id="star-rating-80" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="80" data-container="body" data-toggle="tooltip" title="4 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2012-06-12T08:28:50+00:00">June 12, 2012</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comments">5</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/&quot;, &quot;text&quot;: &quot;New Blob Lease Features: Infinite Leases, Smaller Lease Times, and More&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/&quot;, &quot;text&quot;: &quot;New Blob Lease Features: Infinite Leases, Smaller Lease Times, and More&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>We are excited to introduce some new features with the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/ee691972.aspx">Lease Blob API</a> with the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/gg441573.aspx">2012-02-12 version</a> of Windows Azure Blob Storage service. The 2012-02-12 version also includes some versioned changes. This blog post covers the new features and changes as well as some scenarios and code snippets. The code snippets show how to use lease APIs using the Windows Azure Storage Client Library 1.7.1 (available on <a href="https://github.com/WindowsAzure/azure-sdk-for-net/tree/sdk_1.7.1">GitHub</a>) that supports the 2012-02-12 version of the REST API. </p>
<p>We will begin by giving a brief description of what is new and what semantics have changed when compared to earlier versions and then deep dive into some scenarios that these changes enable. The following is the list of new features that 2012-02-12 version brings for leases: </p>
<ol>
<li>You can acquire leases for 15s up to 60s or you can acquire a lease for an infinite time period.
<li>You can change the lease id on an active lease.
<li>You can provide the lease id when trying to acquire a lease.
<li>You can provide a time period up to which a lease should continue to remain active when breaking an acquired lease.
<li>Lease is now available for containers to prevent clients from deleting a container which may be in use. </li>
</ol>
<p>The 2012-02-12 version also brings about some versioned changes when compared to previous versions of the REST API. The following are the list of versioned changes: </p>
<ol>
<li>You have to provide lease duration when trying to acquire a lease on a blob. If the lease duration is not provided, the call to acquire a lease will fail with 400 (Bad Request). Previous versions of the API did not take lease duration as the lease duration was fixed to 60s.
<li>Once a lease is released, it cannot be broken or renewed. Breaking or renewing a lease that has been released will fail with 409 (Conflict). Previously these operations were allowed.&nbsp; Applications that require a lease to be given up by calling Break Lease would now fail with 409 (Conflict). This error should be ignored since the lease is not active any more.
<li>You can now call Break Lease on a breaking or broken lease hence making break operations idempotent. In previous versions, when a lease has already been broken, a new Break Lease request failed with 409 (Conflict). Applications that want to shorten the duration of a break can now provide shorter duration than the remaining break period (See Breaking Leases section for more details). </li>
</ol>
<h3><a name="_Toc327094498">Acquire Lease - Lease ID and Duration</a></h3>
<p>Earlier versions of acquire operation did not allow users to specify the lease-id nor the duration. The duration was fixed to 60 seconds and the lease-id was determined by the service. Once a lease id was returned in the response of acquire, it could not be changed. With the 2012-02-12 version, we allow the option for users to propose the lease-id and also specify duration from 15s up to 60s or define the lease duration to be infinite. </p>
<p>An important property of acquire is that as long as the proposed lease-id matches the existing lease-id on a blob with an active lease, the acquire operation will succeed. The advantage of proposing the lease-id on an acquire operation is that if the acquire operation succeeds on server but fails before the server can send the response to the client (i.e. intermittent network errors), then the client can retry with the same proposed lease-id and recover from failure on success response, knowing it still holds the lease. Another property of the proposed lease-id on acquire operations is that on each successful acquire operation, the lease is set to expire once the specified duration of that operation elapses. This allows a client to change the lease duration by reissuing the acquire operation using the same proposed lease-id. Here is a sample code that acquires a lease by proposing the lease-id for 60 seconds. The code later reacquires the lease by reducing lease duration to 15 seconds. For the lease to remain active after the provided time period, the client application would need to periodically call renew before the lease period expires.</p>
<pre class="code">CloudBlobClient client = storageAccount.CreateCloudBlobClient();
CloudBlobContainer container = client.GetContainerReference(containerName);
CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

<span style="color: green">// acquire lease for 30s with a proposed lease id
// NOTE: null duration will acquire an infinite lease
</span>blob.AcquireLease(TimeSpan.FromSeconds(30), leaseId);
     
   …

<span style="color: green">// re-acquire lease but reduce the duration to 15s
// could also re-acquire with increased duration, 60s for example
</span>blob.AcquireLease(TimeSpan.FromSeconds(15), leaseId); </pre>
<p>&nbsp;</p>
<h3><a name="_Toc327094499">Why would you change the lease ID?</a></h3>
<p>As we mentioned above, with 2012-02-12 version, we now allow the lease id to be changed. The Change Lease operation takes the existing lease-id and proposed new id and changes the lease-id to the proposed id. Change Lease is valuable in scenarios where the lease ownership needs to be transferred from component A to component B of your system. For example, component A has a lease on a blob, but needs to allow component B to operate on it. Component B could remember the current lease-id passed to it from component A, changes it to a new lease-id, performs its operation, then change the lease-id back to the previous one that component A knows about. This would allow component B to own exclusive access to the blob, prevent the prior owner from modifying the blob until it is done, and then give access back to it. </p>
<p>Another example is to a workflow where, we just want to keep changing the lease-id as the blob passes through the different parts of the workflow. Let us consider a blog publishing process flow that consists of running the document through: </p>
<ol>
<li>A service that deletes all objectionable words/phrases
<li>A service that runs spell correction
<li>A service that formats the document </li>
</ol>
<p>Each of the above steps involves changing the content of the document and is done by a separate service. In this scenario, each service will receive a lease on the document which should be maintained to ensure no one else changes the blog. In addition each service will also change the lease id to prevent previous owners from inadvertently changing the document and to ensure that only it can work on the document upon receiving the request to start processing the document. Once it completes its processing step, it will submit the request to next service in the pipeline passing it the lease id it maintained.</p>
<pre class="code"><p><span style="color: blue">string </span>newLeaseId = Guid.NewGuid().ToString();<br><br></p><p>
blob.ChangeLease(<br>     <span style="color: green">// new proposed leaseId<br>     </span>newLeaseId, <br>     <span style="color: green">// leaseId is the id received from the previous service
     </span>AccessCondition.GenerateLeaseCondition(leaseId));

<span style="color: green">// change duration required by this service
</span>blob.AcquireLease(TimeSpan.FromSeconds(30), newLeaseId);</p></pre>
<p>&nbsp; </p>
<h3><a name="_Toc327094501">Breaking Leases</a></h3>
<p>Break operation is used to release existing lease by rejecting future requests to renew the lease and does not require the issuer to know the current lease-id being held. This is generally used by administrators to reset the lease state. In previous versions, Break Lease allows the lease to be held until the remaining time on the lease elapses. With 2012-02-12 version, this is still the default behavior, with an added option to specify the break period which defines how long to wait before the current lease expires. </p>
<p>The user can specify a break period between 0 and 60 seconds. However, this is only a proposed value, as the actual break period will be the minimum of this value and the remaining time left on the lease. In other words, the client will now be able to shorten the break period from the remaining time left on the lease, but not extend it. </p>
<pre class="code"><span style="color: green">// If duration to break is null, it implies that lease is active for 
// remaining duration, otherwise min(break period, lease remaining time)
</span>blob.BreakLease(TimeSpan.FromSeconds(20)); </pre>
<p><a href="http://11011.net/software/vspaste"></a></p>
<h3><a name="_Toc327094502">Infinite Leases</a></h3>
<p>With 2012-02-12 version, infinite leases can be acquired by sending the lease duration to be -1 for the REST API. The storage client library’s Acquire Lease allows null to be passed in as duration to acquire the infinite lease. An infinite lease will never expire, unless explicitly released or broken and hence acts like a lock.</p>
<pre class="code">blob.AcquireLease(<span style="color: blue">null </span><span style="color: green">/* infinite lease */</span>, leaseId);
<span style="color: green">// Note: Acquire can be called again with a valid duration to convert an 
// infinite lease to a finite one.
</span></pre>
<pre>&nbsp;</pre>
<p>A useful scenario for infinite leases could be for a blob used by a client that wishes to have a lease on at all times (i.e. acquire a lock on the blob). Instead of having to renew the lease continuously as in previous versions, the client now just needs one acquire to specify infinite lease duration. </p>
<p>For Break Lease on an infinite lease, the default behavior is to break the lease immediately. The break operation also has the option for duration to be specified for the break period. </p>
<h3><a name="_Toc327094503">Container Leases</a></h3>
<p>We have added the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159103.aspx">Lease Container API</a> to prevent container deletion. Holding a lease on a container does not prevent anyone from adding, deleting, or updating any blob content in the container. This is meant to only prevent deletion of the container itself. The lease operations provided are similar to those provided on the blob with the only exception that the lease is a “delete” lease. The operations are: </p>
<ul>
<li>Acquire lease – Issuer must provide lease duration and optionally propose lease-id
<li>Change lease-id - to allow changing the current id to a new lease-id
<li>Renew lease - to renew the duration
<li>Break lease - to break existing lease without having knowledge of existing lease-id
<li>Release lease - so that another prospective owner can acquire the lease </li>
</ul>
<p>Consider a scenario where all blobs need to be moved to a different account. Multiple instances can be used in parallel and each instance will work on a given container. When an instance of the job starts, it acquires an infinite lease on the container to prevent anyone from deleting the container prematurely. In addition, since an instance would try to acquire a lease, it will fail if the container is being worked on by a different instance – hence preventing two job instances from migrating the same container. <br></p>
<pre class="code"><p>CloudBlobClient client = storageAccount.CreateCloudBlobClient();
<span style="color: green">// each migration job is assigned a fixed instance id and it will be used 
// as the lease id.
</span><span style="color: blue">string </span>leaseId = instanceId; 
IEnumerable&lt;CloudBlobContainer&gt; containerList = client.ListContainers();

<span style="color: blue">foreach </span>(CloudBlobContainer container <span style="color: blue">in </span>containerList)
{
    <span style="color: blue">try
    </span>{
        container.AcquireLease(<span style="color: blue">null </span><span style="color: green">/* Infinite lease */</span>, leaseId);<br>        <span style="color: green">// if successful - start migration job which will delete the container 
        // once it completes migration 
          </span>…
    }
    <span style="color: blue">catch </span>(Exception e)
    {
        <span style="color: green">// Check for lease conflict exception – implies some other instance 
        // is working on this container
    </span>}
 }</p></pre>
<p><a href="http://11011.net/software/vspaste"></a></p>
<h4><a name="_Toc327094505">Lease Properties</a></h4>
<p>With 2012-02-12 version and later the service returns lease specific properties for container and blobs on <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179352">List Containers</a>, <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd135734">List Blobs</a>, <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179370">Get Container Properties</a>, <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179394">Get Blob Properties</a> and <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179440">Get Blob</a><b>. </b>The lease specific properties returned are:<b></b> </p>
<p>x-ms-lease-status (or LeaseStatus): Returns the status of the lease on the blob or container. The possible values are locked or unlocked.<a name="_GoBack"></a> </p>
<p>x-ms-lease-state (or LeaseState): Returns the state of the lease on the blob or container. The possible values are available, leased, expired, breaking, or broken. This information can be used by applications for diagnostics or to take further action. For example: If the lease is in breaking, broken or expired state, one of the redundant master instances may try to acquire the lease. </p>
<p>While the lease status tells you if the lease is active or not, the lease state property provides more granular information. Example – the lease status may be locked but state may be breaking. </p>
<p>x-ms-lease-duration (or LeaseDuration): Returns the duration type of the lease – finite or infinite. </p>
<p>Weiping Zhang, Michael Roberson, Jai Haridas, Brad Calder</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (5)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-294">
				<div id="div-comment-294" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Roman</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comment-294">
			July 28, 2013 at 3:42 pm</a>		</div>

		<p>I do not understand what is the result of the &nbsp;AcquireLease (&quot;acquire a lock on the blob&quot;) in case of the resource is locked by somebody else? Exception? What kind of exception? Or the thread will be just wait for blob become unlocked? &nbsp;Can you document this?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-295">
				<div id="div-comment-295" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">jaidevh1@hotmail.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comment-295">
			July 28, 2013 at 4:24 pm</a>		</div>

		<p>Hi Roman,</p>
<p>The operation will fail with 409 i.e. conflict (and does not wait for lease to be available). You will get an exception with status code 409. </p>
<p>Thanks,</p>
<p>jai</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-296">
				<div id="div-comment-296" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/1e3ed556302ca24c337826d0fdcb57a8?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1e3ed556302ca24c337826d0fdcb57a8?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">weiping.zhang@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comment-296">
			July 28, 2013 at 11:25 pm</a>		</div>

		<p>Hi Roman,</p>
<p>Please also note the lone exception to 409 (Conflict) is when AcquireLease is made with x-ms-proposed-lease-id equal to the active lease, in which case the call would succeed with 201 (Created). For more details please see our MSDN LeaseBlob documentation (<a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/windowsazure/ee691972.aspx">msdn.microsoft.com/&#8230;/ee691972.aspx</a>), specifically the “Outcomes of lease operations on blobs by lease state” table provides expected behaviors of the LeaseBlob API given the blob’s current lease state.</p>
<p>Thanks,</p>
<p>Weiping</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-893">
				<div id="div-comment-893" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">BScharf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comment-893">
			March 19, 2015 at 7:44 am</a>		</div>

		<p>I tried the code you have to acquire a lease on the container, but it returns with a &quot;The remote server returned an error: (400) Bad Request.&quot; error. Any ideas?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-903">
				<div id="div-comment-903" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/1e3ed556302ca24c337826d0fdcb57a8?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1e3ed556302ca24c337826d0fdcb57a8?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Weiping Zhang</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more/#comment-903">
			March 19, 2015 at 6:09 pm</a>		</div>

		<p>Hi BScharf,</p>
<p>What was the HTTP status message/error response that you saw? One possibility could be that the leaseId provided was not in a valid GUID string format. From MSDN (<a rel="nofollow" target="_new" href="https://msdn.microsoft.com/en-us/library/azure/jj159103.aspx">msdn.microsoft.com/&#8230;/jj159103.aspx</a>):</p>
<p>x-ms-proposed-lease-id: &lt;ID&gt; </p>
<p>Optional for acquire, required for change. Proposed lease ID, in a GUID string format. The Blob service returns 400 (Invalid request) if the proposed lease ID is not in the correct format. See Guid Constructor (String) for a list of valid GUID string formats.</p>
<p>Thanks,</p>
<p>Weiping</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2012%2F06%2F12%2Fnew-blob-lease-features-infinite-leases-smaller-lease-times-and-more%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->