---
layout: windowsazurestorage
title: Introducing Geo-replication for Windows Azure Storage
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-63" class="post-63 post type-post status-publish format-standard hentry category-uncategorized tag-architecture tag-billing">

	<header class="entry-header single">
		<h1 class="entry-title">Introducing Geo-replication for Windows Azure Storage</h1>		<div class="rating-wrap">
		<div id="star-rating-63" class="wds-ratings" data-rating="4" data-userrating="0" data-postid="63" data-container="body" data-toggle="tooltip" title="4 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2011-09-15T13:27:00+00:00">September 15, 2011</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comments">15</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/&quot;, &quot;text&quot;: &quot;Introducing Geo-replication for Windows Azure Storage&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/&quot;, &quot;text&quot;: &quot;Introducing Geo-replication for Windows Azure Storage&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>We are excited to announce that we are now geo-replicating customer&rsquo;s Windows Azure Blob and Table data, at no additional cost, between two locations hundreds of miles apart within the same region (i.e., between North and South US, between North and West Europe, and between East and Southeast Asia).&nbsp; Geo-replication is provided for additional data durability in case of a major data center disaster.</p>
<h3><a name="_Toc303878207"></a>Storing Data in Two Locations for Durability</h3>
<p>With geo-replication, Windows Azure Storage now keeps your data durable in two locations. In both locations, Windows Azure Storage constantly maintains multiple healthy replicas of your data.</p>
<p>The location where you read, create, update, or delete data is referred to as the &lsquo;primary&rsquo; location. The primary location exists in the region you choose at the time you create an account via the Azure Portal (e.g., North Central US). The location where your data is geo-replicated is referred to as the secondary location. The secondary location is automatically determined based on the location of the primary; it is in the other data center that is in the same region as the primary. In this example, the secondary would be located in South Central US (see table below for full listing). The primary location is currently displayed in the Azure Portal, as shown below. In the future, the Azure Portal will be updated to show both the primary and secondary locations. To view the primary location for your storage account in the Azure Portal, click on the account of interest; the primary region will be displayed on the lower right side under Country/Region, as highlighted below.</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/01/36/55/metablogapi/8780.portalaccountprimaryregion_7026E2A9.jpg" original-url="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-36-55-metablogapi/8780.portalaccountprimaryregion_5F00_7026E2A9.jpg"><img style="display: inline; border-width: 0px;" title="portalaccountprimaryregion" border="0" alt="portalaccountprimaryregion" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/01/36/55/metablogapi/0358.portalaccountprimaryregion_thumb_2382A606.jpg" original-url="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-36-55-metablogapi/0358.portalaccountprimaryregion_5F00_thumb_5F00_2382A606.jpg" width="706" height="384"/></a></p>
<p>The following table shows the primary and secondary location pairings:</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="171">
<p><b>Primary</b></p>
</td>
<td valign="top" width="171">
<p><b>Secondary</b></p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>North Central US</p>
</td>
<td valign="top" width="171">
<p>South Central US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>South Central US</p>
</td>
<td valign="top" width="171">
<p>North Central US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>East US</p>
</td>
<td valign="top" width="171">
<p>West US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>West US</p>
</td>
<td valign="top" width="171">
<p>East US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>North Europe</p>
</td>
<td valign="top" width="171">
<p>West Europe</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>West Europe</p>
</td>
<td valign="top" width="171">
<p>North Europe</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>South East Asia</p>
</td>
<td valign="top" width="171">
<p>East Asia</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>East Asia</p>
</td>
<td valign="top" width="171">
<p>South East Asia</p>
</td>
</tr>
</tbody>
</table>
<h3><a name="_Toc303878208"></a>Geo-Replication Costs and Disabling Geo-Replication</h3>
<p>Geo-replication is included in current pricing for Azure Storage.&nbsp; This is called Geo Redundant Storage.</p>
<p>If you do not want your data geo-replicated you can disable geo-replication for your account. This is called Locally Redundant Storage, and is a 23% to 34% discounted price (depending on how much data is stored) over geo-replicated storage.&nbsp;&nbsp; <a href="http://blogs.msdn.com/b/windowsazure/archive/2012/06/08/introducing-locally-redundant-storage-for-windows-azure-storage.aspx">See here for more details on Locally Redundant Storage (LRS)</a>.</p>
<p>When you turn geo-replication off, the data will be deleted from the secondary location. If you decide to turn geo-replication on again after you have turned it off, there is a re-bootstrap egress bandwidth charge (based on the <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx">data transfer rates</a>) for copying your existing data from the primary to the secondary location to kick start geo-replication for the storage account. This charge will be applied only when you turn geo-replication on <i>after</i> you have turned it off. There is no additional charge for continuing geo-replication after the re-bootstrap is done.</p>
<p>Currently all storage accounts are bootstrapped and in geo-replication mode between primary and secondary storage locations.</p>
<h3>How Geo-Replication Works</h3>
<p>When you create, update, or delete data to your storage account, the transaction is <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/12/30/windows-azure-storage-architecture-overview.aspx">fully replicated on three different storage nodes across three fault domains and upgrade domains</a> inside the primary location, then success is returned back to the client. Then, in the background, the primary location asynchronously replicates the recently committed transaction to the secondary location. That transaction is then made durable by fully replicating it across three different storage nodes in different fault and upgrade domains at the secondary location. Because the updates are asynchronously geo-replicated, there is no change in existing performance for your storage account.</p>
<p>Our goal is to keep the data durable at both the primary and secondary location. This means we keep enough replicas in both locations to ensure that each location can recover by itself from common failures (e.g., disk, node, rack, TOR failing), without having to talk to the other location. The two locations only have to talk to each other to geo-replicate the recent updates to storage accounts. They do not have to talk to each other to recover data due to common failures. This is important, because it means that if we had to failover a storage account from the primary to the secondary, then all the data that had been committed to the secondary location via geo-replication will already be durable there.</p>
<p>With this first release of geo-replication, we do not provide an SLA for how long it will take to asynchronously geo-replicate the data, though transactions are typically geo-replicated within a few minutes after they have been committed in the primary location.</p>
<h3><a name="_Toc303878210"></a>How Geo-Failover Works</h3>
<p>In the event of a major disaster that affects the primary location, we will first try to restore the primary location. Dependent upon the nature of the disaster and its impacts, in some rare occasions, we may not be able to restore the primary location, and we would need to perform a geo-failover. When this happens, affected customers will be notified via their subscription contact information (we are investigating more programmatic ways to perform this notification). As part of the failover, the customer&rsquo;s &ldquo;account.service.core.windows.net&rdquo; DNS entry would be updated to point from the primary location to the secondary location. Once this DNS change is propagated, the existing Blob and Table URIs will work. This means that you do not need to change your application&rsquo;s URIs &ndash; all existing URIs will work the same before and after a geo-failover.</p>
<p>For example, if the primary location for a storage account &ldquo;myaccount&rdquo; was North Central US, then the DNS entry for myaccount.&lt;service&gt;.core.windows.net would direct traffic to North Central US. If a geo-failover became necessary, the DNS entry for myaccount.&lt;service&gt;.core.windows.net would be updated so that it would then direct all traffic for the storage account to South Central US.</p>
<p>After the failover occurs, the location that is accepting traffic is considered the new primary location for the storage account. This location will remain as the primary location unless another geo-failover was to occur. Once the new primary is up and accepting traffic, we will bootstrap a new secondary, which will also be in the same region, for the failed over storage accounts. In the future we plan to support the ability for customers to choose their secondary location (when we have more than two data centers in a given region), as well as the ability to swap their primary and secondary locations for a storage account.</p>
<h3><a name="_Toc303878211"></a>Order of Geo-Replication and Transaction Consistency</h3>
<p>Geo-replication ensures that all the data within a PartitionKey is committed in the same order at the secondary location as at the primary location. This said, it is also important to note that there are no geo-replication ordering guarantees across partitions. This means that different partitions can be geo-replicating at different speeds. However, once all the updates have been geo-replicated and committed at the secondary location, the secondary location will have the exact same state as the primary location. However, because geo-replication is asynchronous, recent updates can be lost in the event of a major disaster.</p>
<p>For example, consider the case where we have two blobs, <i>foo</i> and <i>bar</i>, in our storage account (for blobs, the complete blob name is the PartitionKey).&nbsp; Now say we execute transactions A and B on blob foo, and then execute transactions X and Y against blob bar.&nbsp; It is guaranteed that transaction A will be geo-replicated before transaction B, and that transaction X will be geo-replicated before transaction Y.&nbsp; However, no other guarantees are made about the respective timings of geo-replication between the transactions against foo and the transactions against bar.<a name="_GoBack"></a> If a disaster happened and caused recent transactions to not get geo-replicated, that would make it possible for, transactions A and X to be geo-replicated, while losing transactions B and Y. Or transactions A and B could have been geo-replicated, but neither X nor Y had made it. The same holds true for operations involving Tables, except that the partitions are determined by the application defined PartitionKey of the entity instead of the blob name. For more information on partition keys, please see <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx">Windows Azure Storage Abstractions and their Scalability Targets</a>.</p>
<p>Because of this, to best leverage geo-replication, one best practice is to avoid cross-PartitionKey relationships whenever possible. This means you should try to restrict relationships for Tables to entities that have the same PartitionKey value. Since all transactions within a single partition are geo-replicated in order, this guarantees those relationships will be committed in order on the secondary.</p>
<p>The only multiple object transaction supported by Windows Azure Storage is Entity Group Transactions for Windows Azure Tables, which allow clients to commit a batch of entities together as a single atomic transaction. Geo-replication also treats this batch as an atomic operation. Therefore, the whole batch transaction is committed atomically on the secondary.</p>
<h3><a name="_Toc303878212"></a>Summary</h3>
<p>This is our first step in geo-replication, where we are now providing additional durability in case of a major data center disaster. The next steps involve developing features needed to help applications recover after a failover, which is an area we are investigating further.</p>
<p>Brad Calder and Monilee Atkinson</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
					<div class="tags">
				<span>Tags </span>
				<span>
					<a href="https://blogs.msdn.microsoft.com/windowsazurestorage/tag/architecture/" rel="tag">Architecture</a> <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/tag/billing/" rel="tag">Billing</a>				</span>
			</div>
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (15)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-2282">
				<div id="div-comment-2282" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">boxmydorm</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2282">
			September 17, 2011 at 5:36 am</a>		</div>

		<p>awesome post..I really like the such type of post&#8230;.Keep it up</p>
<p>&lt;a href=&quot;<a rel="nofollow" target="_new" href="http://www.boxmypad.com/&quot;>"></a><a href="http://www.boxmypad.com/&quot;&amp;gt" rel="nofollow">http://www.boxmypad.com/&quot;&#038;gt</a>; college packing checklist&lt;/a&gt;</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2272">
				<div id="div-comment-2272" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Sachin Sancheti</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2272">
			September 18, 2011 at 10:17 pm</a>		</div>

		<p>Its a nice feature though a few questions</p>
<p>1. After failover to secondary storage when would it come back to primary storage again? Because the secondary storage (which is new primary in case of failover would increase latency)</p>
<p>2.Are you planning to provide this with API support to be used in Azure Traffic Manager?</p>
<p>Keep it up</p>
<p>-Sachin</p>
<p>Sachin at cumulux dot com</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2262">
				<div id="div-comment-2262" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/Brad-Calder-_2800_MSFT_2900_/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">shop.calder@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2262">
			September 19, 2011 at 12:17 am</a>		</div>

		<p>Hi Sachin</p>
<p>As mentioned above, after failover the old secondary would be the new primary and it would stay that way until there was another geo-failover (for what we have in production today). &nbsp;As you point out, that would increase latency if your compute was still in the old primary location and not in the new primary location. &nbsp; &nbsp; To reduce that latency, some customers may want to move their compute or some of their compute to the new primary location if there was a storage failover. &nbsp; &nbsp; Also mentioned, in the future we plan to support the ability for you to choose what location to place the new secondary in and the ability to swap the primary and secondary locations for a storage account. &nbsp;I don&rsquo;t have a timeline for when we will have this capability, but the goal is to allow the customer to switch which location is the primary and which one is the secondary (once a secondary location is re-bootstrapped after the failover).</p>
<p>For your second question, Azure Storage doesn&rsquo;t use the Azure Traffic Manager. &nbsp;It just uses standard DNS to direct your Uris to the correct primary location for your storage account.</p>
<p>Thanks<br/>Brad</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2252">
				<div id="div-comment-2252" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/18c948652febffd2e555fb6a6c031071?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/18c948652febffd2e555fb6a6c031071?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/pini_4000_forexmanage.com/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">pini@forexmanage.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2252">
			September 20, 2011 at 12:18 am</a>		</div>

		<p>Hi</p>
<p>Great News, thanks for that. i have 3 questions</p>
<p>1. just to have more understanding &#8211; i made action to main table, it replicate to 3 replications, then to other 3 replication in the Secondary locations? so we have 6 places were our data exists?</p>
<p>2. when when when we will have it in SQL Azure?</p>
<p>3. do we have GUI to that Secondary location geo-replicating ?</p>
<p>thanks for the efforts</p>
<p>pini</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2242">
				<div id="div-comment-2242" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/Brad-Calder-_2800_MSFT_2900_/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">shop.calder@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2242">
			September 20, 2011 at 12:40 am</a>		</div>

		<p>Hi Pini</p>
<p>Here are some answers to your questions:</p>
<p>1. Correct, we keep multiple copies of your data in each of the 2 locations. &nbsp;This allows us to recover from common hardware failures within the same data center, so if there is a failover we have a durable copy of all of the data that was committed to the secondary ready to be used. &nbsp;</p>
<p>2. Don’t have a roadmap for SQL Azure. &nbsp; Possibly ask the question here:</p>
<p><a rel="nofollow" target="_new" href="http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/threads">social.msdn.microsoft.com/&#8230;/threads</a></p>
<p>3. There isn’t any at this time, but that is a feature request we have.</p>
<p>Thanks</p>
<p>Brad</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2202">
				<div id="div-comment-2202" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Laxmikant</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2202">
			February 16, 2012 at 8:48 pm</a>		</div>

		<p>It was must to have feature to ensure you data is available whatever happens, however I have few suggestions on this</p>
<p>1. User should have provision to select his &#39;Secondary&#39;, this is like I want to decide where I want to keep extra copies of my data. This is for specific customers who has got some regulations to follow which may become a matter of concern if specific country / region is chosen automatically.</p>
<p>2. There should be a option of having maintaining log of transactions which can be played again on secondary during failover to ensure complete data is available. </p>
<p>Otherwise it is great step ahead on convincing customer on storage with 6 copies without any efforts &#8230;&#8230;..</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2192">
				<div id="div-comment-2192" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/Brad-Calder-_2800_MSFT_2900_/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">shop.calder@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2192">
			February 18, 2012 at 3:21 pm</a>		</div>

		<p>Hi Laxmikant</p>
<p>For (1), we will look at doing that in the future when we have more than two data centers in a given region.</p>
<p>For (2), with asynchronous geo-replication there is no way to do that if there is an unplanned failover (major data center disaster), since the whole focus on async is to commit the data quickly on the primary, ack back to the client, and then asynchronously geo-replicate the changes to the secondary. &nbsp; We have had feature requests for providing synchronous geo-rep (RPO of 0), and then yes that would ensure that the update is on both the primary and secondary before returning success back to the client. &nbsp; &nbsp; What some customers do to achieve that level of consistency (between the primary and secondary)right now is to perform their own form of geo-rep at their application level, where in their application level logic they store the data in two locations and maintain consistency between them at the application level.</p>
<p>Thanks</p>
<p>Brad</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2182">
				<div id="div-comment-2182" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">rolandkru</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2182">
			June 30, 2012 at 12:59 am</a>		</div>

		<p>Hi Brad</p>
<p>Thanks for this blog post. So, tables and blobs are replicated, but what about queues?</p>
<p>Thank you</p>
<p>&#8211; Roland</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2172">
				<div id="div-comment-2172" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/Brad-Calder-_2800_MSFT_2900_/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">shop.calder@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2172">
			July 2, 2012 at 11:06 pm</a>		</div>

		<p>Hi Roland</p>
<p>We geo-replicate all blob and table data, but not queues. &nbsp;In the future we will be adding geo-replication for queues, but we do not have a timeline as to when that will happen.</p>
<p>Thanks</p>
<p>Brad</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2162">
				<div id="div-comment-2162" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Raghuram Murthy Petla</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2162">
			September 26, 2012 at 2:26 pm</a>		</div>

		<p>I&#39;ve couple of questions inaddition to what already answered by Brad.</p>
<p>1. If we have to do Geo-Replicate at applicaiton level, it might be complex with data disks(Iaas) and drives(Paas). It is the OS that changes these blob values and application might not be aware of these changes. We can implement a background service which polls of all disks and drives blobs&#39; last updated time and keep replicating it, but it is still challenging to replicate only those parts(blocks/pages) of the blobs which are changed. Any suggestions here?</p>
<p>2. You said in future you support customer choosing the secondary storage location, when you add more data centers in the same region. Does that mean, customer can only choose the secondary location from one of the data centers located in the same region of its primary location and cannot choose data center from other regions (say choose North Europe as his secondary storage location when his primary storage location is West US)?</p>
<p>Thanks,</p>
<p>-Raghu</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2152">
				<div id="div-comment-2152" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Andrew Edwards</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2152">
			September 28, 2012 at 11:04 pm</a>		</div>

		<p>Hi Raghu,</p>
<p>For your question #1, you have several choices.</p>
<p>One option is to use Windows Azure Storage&#39;s geo-replication on the disks and/or drives. &nbsp;A possible drawback of this approach is that if you have multiple disks attached to a single VM, the replicated state of these disks might not be totally in-sync. &nbsp;To work around this, you need some sort of transaction semantics so that you can get the disks/drives to a known synchronization point after a fail over. &nbsp;One possible method to get this kind of synchronization is to use Windows’ Volume Shadow Copy Service (for more information, see <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa384649(v=vs.85).aspx">msdn.microsoft.com/&#8230;/aa384649(v=vs.85).aspx</a>).</p>
<p>Another option is to build your own geo replication, using &quot;log shipping&quot; or &quot;mirroring&quot; functionality. &nbsp;In this case, you can either turn geo-replication off in Windows Azure Storage and send the data between VMs yourself, or write your log-shipping logs onto the disk/drive, and then replay them as needed after a geo-failover.</p>
<p>Thanks</p>
<p>Andrew Edwards</p>
<p>Windows Azure Storage</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2142">
				<div id="div-comment-2142" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Don Pinto</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2142">
			October 26, 2012 at 11:06 am</a>		</div>

		<p>Does this support active-active replication? Can users configure unidirectional and bidirectional replication? </p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2132">
				<div id="div-comment-2132" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a79a1b675acd535552dd5817613979ab?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn"><a href="http://blogs.msdn.com/Brad-Calder-_2800_MSFT_2900_/ProfileUrlRedirect.ashx" rel="external nofollow" class="url">shop.calder@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2132">
			October 27, 2012 at 6:40 pm</a>		</div>

		<p>Hi Don</p>
<p>The replication is active-passive at this time. &nbsp;</p>
<p>For Geo Redundant Storage, customers choose the primary location, and we store an equivalent of 3 replicated copies durable in that primary location, and then we asynchronously geo-replicate the updates to the secondary location 400+ miles from the primary to keep an equivalent of 3 replicated copies of that data in the secondary location. &nbsp;</p>
<p>We also offer Locally Redundant Storage, as described in the post blow:</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/08/introducing-locally-redundant-storage-for-windows-azure-storage.aspx">blogs.msdn.com/&#8230;/introducing-locally-redundant-storage-for-windows-azure-storage.aspx</a></p>
<p>Brad</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2122">
				<div id="div-comment-2122" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/6f59d89ac34200985b71c0573c4c595c?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/6f59d89ac34200985b71c0573c4c595c?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Alistair Granger</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2122">
			May 2, 2014 at 2:48 am</a>		</div>

		<p>I&nbsp;have a quick question about geo-failover &#8211; what are the conditions for invoking geo-failover?</p>
<p>What&nbsp;sort of suggestions does your team have for implementing in-house geo-failover (in terms of repointing resources to another store and replicating that store). &nbsp;I&#39;d be really interested in how other Azure users are addressing this kind of scenario.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2112">
				<div id="div-comment-2112" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Jai Haridas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2011/09/15/introducing-geo-replication-for-windows-azure-storage/#comment-2112">
			May 2, 2014 at 2:53 pm</a>		</div>

		<p>@Alistair</p>
<p> &nbsp; &nbsp;I have a quick question about geo-failover &#8211; what are the conditions for invoking geo-failover?</p>
<p>When the storage service in your primary location becomes unavailable and it cannot be restored, we will perform a geo-failover. Events that may cause this unrecoverable damage to the primary location are usually natural disasters like earthquake or other events that may destroy a data center. Any other issue that causes unavailability but we can recover from, will not lead to a geo-failover. </p>
<p>Providing our users the ability to control geo-failover is in the list of feature requests but we do not have a timeline to share.</p>
<p> &nbsp; &nbsp;What sort of suggestions does your team have for implementing in-house geo-failover (in terms of repointing resources to another store and replicating that store). &nbsp;I&#39;d be really interested in how other Azure users are addressing this kind of scenario.</p>
<p>There are couple of options:</p>
<p>1&gt; Via RA-GRS:</p>
<p>You can enable RA-GRS (see <a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx">blogs.msdn.com/&#8230;/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx</a> for details) and then when primary location is unavailable, you can use the secondary location to serve reads. If you need writes to succeed, then in parallel you can &nbsp;copy the data from this secondary to a new storage account so that you can start serving writes too.</p>
<p>2&gt; Queuing writes to multiple locations:</p>
<p>You can queue your writes to copy it to multiple locations so that you can maintain active-active. However, there are nuances around ensuring eventual consistency (example: what if write fails to primary &nbsp;etc.).</p>
<p>Thanks,</p>
<p>Jai</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2011%2F09%2F15%2Fintroducing-geo-replication-for-windows-azure-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->