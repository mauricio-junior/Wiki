---
layout: windowsazurestorage
title: Azure Storage PowerShell v.1.7 – Hotfix to v1.4 Breaking Changes
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-1695" class="post-1695 post type-post status-publish format-standard hentry category-uncategorized tag-azure-powershell tag-azure-storage">

	<header class="entry-header single">
		<h1 class="entry-title">Azure Storage PowerShell v.1.7 – Hotfix to v1.4 Breaking Changes</h1>		<div class="rating-wrap">
		<div id="star-rating-1695" class="wds-ratings" data-rating="0" data-userrating="0" data-postid="1695" data-container="body" data-toggle="tooltip" title="0 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2016-08-29T23:12:22+00:00">August 29, 2016</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/#respond">0</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/&quot;, &quot;text&quot;: &quot;Azure Storage PowerShell v.1.7 – Hotfix to v1.4 Breaking Changes&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/&quot;, &quot;text&quot;: &quot;Azure Storage PowerShell v.1.7 – Hotfix to v1.4 Breaking Changes&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<div>
<p>Breaking changes were introduced in Azure PowerShell v1.4. These breaking changes are present in Azure PowerShell versions 1.4-1.6 and versions 2.0 and later. The following Azure Storage cmdlets were impacted:</p>
<ul>
<li><strong>Get-AzureRmStorageAccountKey</strong> – Accessing Keys.</li>
<li><strong>New-AzureRmStorageAccountKey</strong> – Accessing Keys.</li>
<li><strong>New-AzureRmStorageAccount</strong> – Specifying Account Type and Endpoints.</li>
<li><strong>Get-AzureRmStorageAccount</strong> – Specifying Account Type and Endpoints.</li>
<li><strong>Set-AzureRmStorageAccount</strong> – Specifying Account Type and Endpoints.</li>
</ul>
<p>To minimize impact to cmdlets, we are releasing <a href="https://github.com/Azure/azure-powershell/releases/tag/v1.7.0-August2016"><u>Azure PowerShell v1.7</u></a> - a hotfix that addresses all of the breaking changes with the exception of specifying the Endpoint properties for New-AzureRmStorageAccount, Get-AzureRmStorageAccount, and Set-AzureRmStorageAccount. This means no code change will be required by customers where the hotfix is applicable. This hotfix will not be present in Azure PowerShell versions 2.0 and later. Please plan to update the above cmdlets when you update to Azure PowerShell v2.0.</p>
<p>Below, you’ll find examples for how the above cmdlets work for different versions of Azure PowerShell and the action required:</p>
<h3>Accessing Keys with Get-AzureRmStorageAccountKey and New-AzureRmStorageAccountKey</h3>
<p><strong>V1.3.2 and earlier:</strong></p>
<p><code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname).Key1</code></p>
<p><code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname).Key2</code></p>
<p><code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).StorageAccountKeys.Key1</code></p>
<p><code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).StorageAccountKeys.Key2</code></p>
<p><strong>V1.4-V1.6 and V2.0 and later:</strong></p>
<p>The cmdlet now returns a list of keys, rather than an object with properties for each key.</p>
<p><code># Replaces Key1</code><br/>
<code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname)[0].Value</code></p>
<p><code># Replaces Key2</code><br/>
<code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname)[1].Value</code></p>
<p><code># Replaces Key1</code><br/>
<code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).Keys[0].Value</code></p>
<p><code># Replaces Key2</code><br/>
<code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).Keys[1].Value</code></p>
<p><strong>V1.7 (Hotfix):</strong></p>
<p>Both methods work.</p>
<p><code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname).Key1</code></p>
<p><code>$key = (Get-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname)[0].Value</code></p>
<p><code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).StorageAccountKeys.Key1</code></p>
<p><code>$key = (New-AzureRmStorageAccountKey -ResourceGroupName $groupname -Name $accountname -KeyName $keyname).Keys[0].Value</code></p>
<h3>Specifying Account Type in New-AzureRmStorageAccount, Get-AzureRmStorageAccount, and Set-AzureRmStorageAccount</h3>
<p><strong>V1.3.2 and earlier:</strong></p>
<p><code>$AccountType = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><code>$AccountType = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><code>$AccountType = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><strong>V1.4-V1.6 and V2.0 and later:</strong></p>
<p>AccountType field in output of this cmdlet is renamed to Sku.Name.</p>
<p><code>$AccountType = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<p><code>$AccountType = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<p><code>$AccountType = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<p><strong>V1.7 (Hotfix):</strong></p>
<p>Both methods work.</p>
<p><code>$AccountType = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><code>$AccountType = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><code>$AccountType = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).AccountType</code></p>
<p><code>$AccountType = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<p><code>$AccountType = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<p><code>$AccountType = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).Sku.Name</code></p>
<h3>Specifying Endpoints in New-AzureRmStorageAccount, Get-AzureRmStorageAccount, and Set-AzureRmStorageAccount</h3>
<p><strong>V1.3.2 and earlier:</strong></p>
<p><code>$blobEndpoint = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob.AbsolutePath</code></p>
<p><code>$blobEndpoint = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob.AbsolutePath</code></p>
<p><code>$blobEndpoint = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob.AbsolutePath</code></p>
<p><strong>V1.4-V1.6 and V2.0 and later:</strong></p>
<p>Output type for PrimaryEndpoints/Secondary endpoints blob/table/queue/file changed from Uri to String.</p>
<p><code>$blobEndpoint = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob</code></p>
<p><code>$blobEndpoint = (New-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob</code></p>
<p><code>$blobEndpoint = (Set-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob</code></p>
<p><strong>Note:</strong> The ToString() method for these cmdlets will continue to work. For example:</p>
<p><code>$blobEndpoint = (Get-AzureRmStorageAccount -ResourceGroupName $groupname -Name $accountname).PrimaryEndpoints.Blob.ToString()</code></p>
<p><strong>V1.7 (Hotfix):</strong></p>
<p>No hotfix was provided for this breaking change. The return value’s endpoints will have to continue to be string, as changing these back to Uri would introduce an additional break.</p>
<h3>Next steps</h3>
<ul>
<li>Download Azure PowerShell v1.7 (hotfix): <a href="https://github.com/Azure/azure-powershell/releases/tag/v1.7.0-August2016"><u>https://github.com/Azure/azure-powershell/releases/tag/v1.7.0-August2016</u></a>.</li>
<li>View all Azure PowerShell releases: <a href="https://github.com/Azure/azure-powershell/releases"><u>https://github.com/Azure/azure-powershell/releases</u></a>.</li>
<li>See migration guide for Azure PowerShell 2.0: <a href="https://github.com/Azure/azure-powershell/blob/dev/documentation/release-notes/migration-guide.2.0.0.md"><u>https://github.com/Azure/azure-powershell/blob/dev/documentation/release-notes/migration-guide.2.0.0.md</u></a>.</li>
</ul>
<p>Thanks,</p>
<p>Microsoft Azure Storage Team</p>
</div>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
					<div class="tags">
				<span>Tags </span>
				<span>
					<a href="https://blogs.msdn.microsoft.com/windowsazurestorage/tag/azure-powershell/" rel="tag">Azure PowerShell</a> <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/tag/azure-storage/" rel="tag">Azure Storage</a>				</span>
			</div>
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (0)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2016/08/29/azure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2016%2F08%2F29%2Fazure-storage-powershell-v-1-7-hotfix-to-v1-4-breaking-changes%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->