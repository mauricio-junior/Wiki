---
layout: windowsazurestorage
title: (Cross-Post) Azure Storage Performance Checklist
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-172" class="post-172 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">(Cross-Post) Azure Storage Performance Checklist</h1>		<div class="rating-wrap">
		<div id="star-rating-172" class="wds-ratings" data-rating="0" data-userrating="0" data-postid="172" data-container="body" data-toggle="tooltip" title="0 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2014-11-17T03:00:00+00:00">November 17, 2014</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/#respond">0</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/&quot;, &quot;text&quot;: &quot;(Cross-Post) Azure Storage Performance Checklist&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/&quot;, &quot;text&quot;: &quot;(Cross-Post) Azure Storage Performance Checklist&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p id="insertStyle">&nbsp;</p>
<script type="text/javascript">// <![CDATA[
document.getElementById("insertStyle").outerHTML = "\x3Cstyle>table.xstore{border-collapse:collapse;} table.xstore tr:nth-child(odd)        {background-color:#f1f1f1;} table.xstore tr:nth-child(even)        {background-color:#ffffff;} table.xstore {background-color:#f1f1f1;} table.xstore th{color:#ffffff;background-color:#555555;border:1px solid #555555;padding:3px;vertical-align:top;text-align:left;} table.xstore td{border:1px solid #d4d4d4;padding:5px;padding-top:7px;padding-bottom:7px;vertical-align:top;} \x3C/style>";
// ]]&gt;</script>
<p>How to get great performance when using Azure Storage is a topic we've talked with you about many times: during talks at TechEd and Build, in threads on forums, on our blog, and in person. It&rsquo;s always exciting to see how passionate you are about making your applications perform as well as possible!</p>
<p>To help you further in this goal, we&rsquo;ve now released the <a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/" target="_blank">Azure Storage Performance Checklist</a> which consolidates our performance guidance in a single easy to use document, in one easy to find location. It&rsquo;s a short document (about 15 printed pages) that a developer should be able to read in about 30 minutes and it contains details of over 40 proven practices structured as a checklist, which will help you to improve the performance of your applications. Here is a small selection from the checklist:</p>
<table class="xstore" style="width: 734px;">
<tbody>
<tr>
<th valign="top" width="79"><strong>Area</strong></th>
<th valign="top" width="171"><strong>Category</strong></th>
<th valign="top" width="482"><strong>Question</strong></th>
</tr>
<tr>
<td valign="top" width="83">
<p>Blobs</p>
</td>
<td valign="top" width="175">
<p>Use Metadata</p>
</td>
<td valign="top" width="486">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading20">Are you storing frequently used metadata in blob metadata to avoid having to download each blob to extract it each time?</a></p>
</td>
</tr>
<tr>
<td valign="top" width="87">
<p>Blobs</p>
</td>
<td valign="top" width="179">
<p>Uploading Fast</p>
</td>
<td valign="top" width="490">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading21">To upload one blob fast, are you uploading blocks in parallel?</a></p>
</td>
</tr>
<tr>
<td valign="top" width="91">
<p>Tables</p>
</td>
<td valign="top" width="183">
<p>Configuration</p>
</td>
<td valign="top" width="494">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading25">Are you using JSON for your table requests?</a></p>
</td>
</tr>
<tr>
<td valign="top" width="95">
<p>Tables</p>
</td>
<td valign="top" width="187">
<p>Limiting Returned Data</p>
</td>
<td valign="top" width="498">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading33">Are you using projection to avoid retrieving unneeded properties?</a></p>
</td>
</tr>
<tr>
<td valign="top" width="99">
<p>Queues</p>
</td>
<td valign="top" width="191">
<p>Update Message</p>
</td>
<td valign="top" width="502">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading43">Are you using <strong>UpdateMessage</strong> to store progress in processing a message and avoid having to reprocess from the start if the processing component encounters an error?</a></p>
</td>
</tr>
<tr>
<td valign="top" width="103">
<p>Queues</p>
</td>
<td valign="top" width="195">
<p>Architecture</p>
</td>
<td valign="top" width="506">
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading44">Are you using queues to make your entire application more scalable by keeping long-running workloads out of the critical path and scale them independently?</a></p>
</td>
</tr>
</tbody>
</table>
<p>Developers can use this checklist to help design a new application or to validate an existing design, and while not every recommendation is relevant to every application, each of them is a broadly applicable practice that most applications will benefit from following.</p>
<p>We will keep this checklist up to date as we identify more proven practices and add to it when we introduce new Azure Storage features. If you have a recommendation for a proven practice that you don&rsquo;t see in the current checklist, then please let us know.</p>
<h4>Example Scenarios</h4>
<p>Many of the recommendations in the checklist are simple to implement in your code. Here are three examples, each of which may have a significant effect on the performance of your application if you apply them in the correct context:</p>
<p><strong>Scenario #1: Queues: Configuration</strong></p>
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading40" target="_blank">Have you turned Nagle off to improve the performance of small requests?</a></p>
<p>The Nagle algorithm is enabled by default. To disable it for a queue endpoint, you can use the following code. This code must execute before you make any calls to the queue endpoint:</p>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">var storageAccount = CloudStorageAccount.Parse(connStr);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">ServicePoint queueServicePoint = </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">ServicePointManager.FindServicePoint(storageAccount.QueueEndpoint);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">queueServicePoint.UseNagleAlgorithm = <span style="color: #0000ff;">false</span>; </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudQueueClient queueClient = storageAccount.CreateCloudQueueClient();</pre>
<!--CRLF--></div>
</div>
<p><strong>Scenario #2: Blobs: Copying Blobs</strong></p>
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading17" target="_blank">Are you copying blobs in an efficient manner?</a></p>
<p>To copy blob data from a container in one storage account to a container in another storage account, you could first download and then upload the data as shown here:</p>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudBlockBlob srcBlob = srcBlobContainer.GetBlockBlobReference(<span style="color: #006080;">"srcblob"</span>);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">srcBlob.DownloadToFile(<span style="color: #006080;">@"C:\Temp\copyblob.dat"</span>,System.IO.FileMode.Create);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudBlockBlob destBlob = </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">destBlobContainer.GetBlockBlobReference(<span style="color: #006080;">"destblob"</span>);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">destBlob.UploadFromFile(<span style="color: #006080;">@"C:\Temp\copyblob.dat"</span>, </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">System.IO.FileMode.Open);</pre>
<!--CRLF--></div>
</div>
<p>&nbsp;</p>
<p>However, a much more efficient approach is to use one of the copy blob methods such as <strong>StartCopyFromBlob</strong> as shown here:</p>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudBlockBlob srcBlob = srcBlobContainer.GetBlockBlobReference(<span style="color: #006080;">"srcblob"</span>);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">CloudBlockBlob destBlob = </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">destBlobContainer.GetBlockBlobReference(<span style="color: #006080;">"destblob"</span>);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">destBlob.StartCopyFromBlob(GenerateSASUri(srcBlob));</pre>
<!--CRLF--></div>
</div>
<p>Note that this example uses a Shared Access Signature (SAS) to access the private blob in the source container.</p>
<p><strong>Scenario #3: Blobs: Uploading Fast</strong></p>
<p><a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/#subheading21" target="_blank">When trying to upload one blob quickly, are you uploading blocks in parallel?</a></p>
<p>If you are using the .NET Storage Client Library, it has the capability to manage parallel block uploads for you. The following code sample shows how you can use the <strong>BlobRequestOptions</strong> class to specify the number of threads to use for a parallel block upload (four in this example):</p>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudBlockBlob blob = </pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">srcBlobContainer.GetBlockBlobReference(<span style="color: #006080;">"uploadinparallelblob"</span>);</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #0000ff;">byte</span>[] buffer = ...</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">var requestOptions = <span style="color: #0000ff;">new</span> BlobRequestOptions()</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">{</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">ParallelOperationThreadCount = 4</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">};</pre>
<!--CRLF-->
<pre style="overflow: visible; font-size: 8pt; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">blob.UploadFromByteArray(buffer, 0, buffer.Length, <span style="color: #0000ff;">null</span>, requestOptions);</pre>
<!--CRLF--></div>
</div>
<p>&nbsp;</p>
<p>Note that the Storage Client Library may upload small blobs as a single blob upload instead of multiple block uploads: the <strong>SingleBlobUploadThresholdInBytes</strong> property of the <strong>BlobRequestOptions</strong> class sets the size threshold above which the Storage Client Library uses block uploads.<strong></strong></p>
<h4>Summary and Call to Action</h4>
<p>We have developed the <a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/" target="_blank">Azure Storage Performance Checklist</a> that contains over 40 proven practices pulled together from a wide variety of sources. This checklist will help you to make a significant difference to the performance of your applications that use the Azure Storage services.</p>
<p>For now, you should take a look at the <a href="http://azure.microsoft.com/en-us/documentation/articles/storage-performance-checklist/" target="_blank">checklist</a>, print it out, and then see what you can do to improve the performance of your application! You should check back regularly for updates as we incorporate more proven practices into the checklist.</p>
<p>Jeff Irwin <br/>Azure Storage Program Manager</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (0)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/11/17/cross-post-azure-storage-performance-checklist/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2014%2F11%2F17%2Fcross-post-azure-storage-performance-checklist%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->