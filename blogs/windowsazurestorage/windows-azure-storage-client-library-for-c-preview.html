---
layout: windowsazurestorage
title: Windows Azure Storage Client Library for C++ Preview
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-146" class="post-146 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">Windows Azure Storage Client Library for C++ Preview</h1>		<div class="rating-wrap">
		<div id="star-rating-146" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="146" data-container="body" data-toggle="tooltip" title="1 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2013-12-19T18:44:00+00:00">December 19, 2013</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comments">12</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/&quot;, &quot;text&quot;: &quot;Windows Azure Storage Client Library for C++ Preview&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/&quot;, &quot;text&quot;: &quot;Windows Azure Storage Client Library for C++ Preview&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>We are excited to announce the availability of our new Windows Azure Storage Client Library for C++. This is currently a Preview release, which means the library should not be used in your production code just yet. Instead, please kick the tires and give us any feedback you might have for us to improve/change the interface based on feedback for the GA release. This blog post serves as an overview of the library.</p>
<p>Please refer to <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx" target="_blank">SOSP Paper - Windows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency</a> for more information on Windows Azure Storage.</p>
<h4>Emulator Guidance</h4>
<p>Please note, that the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd894041.aspx" target="_blank">2013-08-15 REST version</a>, which this library utilizes, is currently unsupported by the storage emulator. An updated Windows Azure Storage Emulator is expected to ship with full support of these new features in the next month. Users attempting to develop against the current version of the Storage emulator will receive Bad Request errors in the interim.&#160; Until then, users wanting to use the new features would need to develop and test against a Windows Azure Storage Account to leverage the 2013-08-15 REST version.</p>
<h4>Supported Platforms</h4>
<p>In this release, we provide x64 and x86 versions of the library for both Visual Studio 2012 (v110) and Visual Studio 2013 (v120) platform toolsets. Therefore you will find 8 build flavors in the package:</p>
<ol>
<li>Release, x64, v120</li>
<li>Debug, x64, v120</li>
<li>Release, Win32, v120</li>
<li>Debug, Win32, v120</li>
<li>Release, x64, v110</li>
<li>Debug, x64, v110</li>
<li>Release, Win32, v110</li>
<li>Debug, Win32, v110</li>
</ol>
<h4>Where is it?</h4>
<p>The library can be downloaded from <a href="http://www.nuget.org/packages/wastorage" target="_blank">NuGet</a> and full source code is available on <a href="https://github.com/WindowsAzure/azure-storage-cpp" target="_blank">GitHub</a>. NuGet packages are created using the <a href="http://coapp.org/" target="_blank">CoApp tools</a> and therefore consist of 3 separate packages:</p>
<ul>
<li><em>wastorage.0.2.0-preview.nupkg</em>: This package contains header and LIB files required to develop your application. This is the package you need to install, which has a dependency on the <em>redist</em> package and thus will force NuGet to install that one automatically.</li>
<li><em>wastorage.redist.0.2.0-preview.nupkg</em>: This package contains DLL files required to run and redistribute your application.</li>
<li><em>wastorage.symbols.0.2.0-preview.nupkg</em>: This package contains symbols for the respective DLL files and therefore is an optional package.</li>
</ul>
<p>The package also contains a dependency on <a href="https://www.nuget.org/packages/cpprestsdk/" target="_blank">C++ REST SDK</a>, which will also be automatically installed by NuGet. The <a href="http://casablanca.codeplex.com/" target="_blank">C++ REST SDK (codename &quot;Casablanca&quot;)</a> is a Microsoft project for cloud-based client-server communication in native code and provides support for accessing REST services from native code on multiple platforms by providing asynchronous C++ bindings to HTTP, JSON, and URIs. Windows Azure Storage Client Library uses it to communicate with the Windows Azure Storage Blob, Queue, and Table services.</p>
<h4>What do you get?</h4>
<p>Here is a summary of the functionality you will get by using Windows Azure Storage Client Library instead of directly talking to the REST API:</p>
<ul>
<li>Easy-to-use implementations of the entire Windows Azure Storage REST API version <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/11/27/windows-azure-storage-release-introducing-cors-json-minute-metrics-and-more.aspx" target="_blank">2013-08-15</a></li>
<li>Retry policies that retry certain failed requests using an exponential or linear back off algorithm</li>
<li>Streamlined authentication model that supports both Shared Keys and Shared Authentication Signatures</li>
<li>Ability to dive into the request details and results using an operation context and ETW logging</li>
<li>Blob uploads regardless of size and blob type, and parallel block/page uploads configurable by the user</li>
<li>Blob streams that allow reading from or writing to a blob without having to deal with specific upload/download APIs</li>
<li>Full MD5 support across all blob upload and download APIs</li>
<li>Table layer that uses the <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx" target="_blank">new JSON support on Windows Azure Storage</a> announced in November 2013</li>
<li>Entity Group Transaction support for Table service that enables multiple operations within a single transaction</li>
</ul>
<h4>Support for Read Access Geo Redundant Storage</h4>
<p>This release has full support for Read Access to the storage account data in the secondary region. This functionality needs to be enabled via the portal for a given storage account, you can read more about RA-GRS <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">here</a>.</p>
<h4>How to use it?</h4>
<p>After installing the NuGet package, all header files you need to use will be located in a folder named “<em>was</em>” (stands for Windows Azure Storage). Under this directory, the following header files are critical:</p>
<ul>
<li><em>blob.h</em>: Declares all types related to Blob service</li>
<li><em>queue.h</em>: Declares all types related to Queue service</li>
<li><em>table.h</em>: Declares all types related to Table service</li>
<li><em>storage_account.h</em>: Declares the <em>cloud_storage_account</em> type that can be used to easily create service client objects using an account name/key or a connection string</li>
<li><em>retry_policies.h</em>: Declares different retry policies available to use with all operations</li>
</ul>
<p>So, you can start with including the headers you are going to use:</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);"><span style="color: rgb(204, 102, 51);">#include</span> <span style="color: rgb(0, 96, 128);">&quot;was/storage_account.h&quot;</span><br/><span style="color: rgb(204, 102, 51);">#include</span> <span style="color: rgb(0, 96, 128);">&quot;was/queue.h&quot;</span><br/><span style="color: rgb(204, 102, 51);">#include</span> <span style="color: rgb(0, 96, 128);">&quot;was/table.h&quot;</span><br/><span style="color: rgb(204, 102, 51);">#include</span> <span style="color: rgb(0, 96, 128);">&quot;was/blob.h&quot;</span></pre>
</div>
<p>Then we will create a <em>cloud_storage_account</em> object, which enables us to create service client objects later in the code. Please note that we are using https below for a secure connection, but http is very useful when you are debugging your application.</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);">wa::storage::cloud_storage_account storage_account = wa::storage::cloud_storage_account::parse(U(<span style="color: rgb(0, 96, 128);">&quot;AccountName=&lt;account_name&gt;;AccountKey=&lt;account_key&gt;;DefaultEndpointsProtocol=https&quot;</span>));</pre>
</div>
<h4>Blobs</h4>
<p>Here we create a blob container, a blob with “some text” in it, download it, and then list all the blobs in our container:</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);"><span style="color: rgb(0, 128, 0);">// Create a blob container</span><br/>wa::storage::cloud_blob_client blob_client = storage_account.create_cloud_blob_client();<br/>wa::storage::cloud_blob_container container = blob_client.get_container_reference(U(<span style="color: rgb(0, 96, 128);">&quot;mycontainer&quot;</span>));<br/>container.create_if_not_exists();<br/><br/><span style="color: rgb(0, 128, 0);">// Upload a blob</span><br/>wa::storage::cloud_block_blob blob1 = container.get_block_blob_reference(U(<span style="color: rgb(0, 96, 128);">&quot;myblob&quot;</span>));<br/>blob1.upload_text(U(<span style="color: rgb(0, 96, 128);">&quot;some text&quot;</span>));<br/><br/><span style="color: rgb(0, 128, 0);">// Download a blob</span><br/>wa::storage::cloud_block_blob blob2 = container.get_block_blob_reference(U(<span style="color: rgb(0, 96, 128);">&quot;myblob&quot;</span>));<br/>utility::string_t text = blob2.download_text();<br/><br/><span style="color: rgb(0, 128, 0);">// List blobs</span><br/>wa::storage::blob_result_segment blobs = container.list_blobs_segmented(wa::storage::blob_continuation_token());</pre>
</div>
<h4>Tables</h4>
<p>The sample below creates a table, inserts an entity with couple properties of different types, and finally retrieves that specific entity. In the first retrieve operation, we do a point query and retrieve the specific entity. In the query operation, on the other hand, we query all entities with PartitionKey is equal to “partition” and RowKey is greater than or equal to “m”, which will eventually get us the original entity we inserted.</p>
<p>For more information on Windows Azure Tables, please refer to the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx" target="_blank">Understanding the Table Service Data Model</a> article and the <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-azure-tables.aspx" target="_blank">How to get most out of Windows Azure Tables</a> blog post.</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);"><span style="color: rgb(0, 128, 0);">// Create a table</span><br/>wa::storage::cloud_table_client table_client = storage_account.create_cloud_table_client();<br/>wa::storage::cloud_table table = table_client.get_table_reference(U(<span style="color: rgb(0, 96, 128);">&quot;mytable&quot;</span>));<br/>table.create_if_not_exists();<br/><br/><span style="color: rgb(0, 128, 0);">// Insert a table entity</span><br/>wa::storage::table_entity entity(U(<span style="color: rgb(0, 96, 128);">&quot;partition&quot;</span>), U(<span style="color: rgb(0, 96, 128);">&quot;row&quot;</span>));<br/>entity.properties().insert(wa::storage::table_entity::property_type(U(<span style="color: rgb(0, 96, 128);">&quot;PropertyA&quot;</span>), wa::storage::table_entity_property(U(<span style="color: rgb(0, 96, 128);">&quot;some string&quot;</span>))));<br/>entity.properties().insert(wa::storage::table_entity::property_type(U(<span style="color: rgb(0, 96, 128);">&quot;PropertyB&quot;</span>), wa::storage::table_entity_property(utility::datetime::utc_now())));<br/>entity.properties().insert(wa::storage::table_entity::property_type(U(<span style="color: rgb(0, 96, 128);">&quot;PropertyC&quot;</span>), wa::storage::table_entity_property(utility::new_uuid())));<br/>wa::storage::table_operation operation1 = wa::storage::table_operation::insert_or_replace_entity(entity);<br/>wa::storage::table_result table_result = table.execute(operation1);<br/><br/><span style="color: rgb(0, 128, 0);">// Retrieve a table entity</span><br/>wa::storage::table_operation operation2 = wa::storage::table_operation::retrieve_entity(U(<span style="color: rgb(0, 96, 128);">&quot;partition&quot;</span>), U(<span style="color: rgb(0, 96, 128);">&quot;row&quot;</span>));<br/>wa::storage::table_result result = table.execute(operation2);<br/><br/><span style="color: rgb(0, 128, 0);">// Query table entities</span><br/>wa::storage::table_query query;<br/>query.set_filter_string(wa::storage::table_query::combine_filter_conditions(<br/>    wa::storage::table_query::generate_filter_condition(U(<span style="color: rgb(0, 96, 128);">&quot;PartitionKey&quot;</span>), wa::storage::query_comparison_operator::equal, U(<span style="color: rgb(0, 96, 128);">&quot;partition&quot;</span>)), <br/>    wa::storage::query_logical_operator::and, <br/>    wa::storage::table_query::generate_filter_condition(U(<span style="color: rgb(0, 96, 128);">&quot;RowKey&quot;</span>), wa::storage::query_comparison_operator::greater_than_or_equal, U(<span style="color: rgb(0, 96, 128);">&quot;m&quot;</span>))));<br/>std::vector&lt;wa::storage::table_entity&gt; results = table.execute_query(query);</pre>
</div>
<h4>Queues</h4>
<p>In our final example, we will create a queue, add a message to it, retrieve the same message, and finally update it:</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);"><span style="color: rgb(0, 128, 0);">// Create a queue</span><br/>wa::storage::cloud_queue_client queue_client = storage_account.create_cloud_queue_client();<br/>wa::storage::cloud_queue queue = queue_client.get_queue_reference(U(<span style="color: rgb(0, 96, 128);">&quot;myqueue&quot;</span>));<br/>queue.create_if_not_exists();<br/><br/><span style="color: rgb(0, 128, 0);">// Add a queue message</span><br/>wa::storage::cloud_queue_message message1(U(<span style="color: rgb(0, 96, 128);">&quot;mymessage&quot;</span>));<br/>queue.add_message(message1);<br/><br/><span style="color: rgb(0, 128, 0);">// Get a queue message</span><br/>wa::storage::cloud_queue_message message2 = queue.get_message();<br/><br/><span style="color: rgb(0, 128, 0);">// Update a queue message</span><br/>message2.set_content(U(<span style="color: rgb(0, 96, 128);">&quot;changedmessage&quot;</span>));<br/>queue.update_message(message2, std::chrono::seconds(30), true);</pre>
</div>
<h4>How to debug it?</h4>
<p>When things go wrong, you might get an exception from one of your calls. This exception will be of type <em>wa::storage::storage_exception</em> and contain detailed information about what went wrong. Consider the following code:</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="margin: 0em; padding: 0px; width: 100%; text-align: left; color: black; line-height: 12pt; overflow: visible; font-family: &quot;Courier New&quot;, courier, monospace; font-size: 8pt; direction: ltr; background-color: rgb(244, 244, 244);"><span style="color: rgb(0, 0, 255);">try</span><br/>{<br/>    blob1.download_attributes();<br/>}<br/><span style="color: rgb(0, 0, 255);">catch</span> (<span style="color: rgb(0, 0, 255);">const</span> wa::storage::storage_exception&amp; e)<br/>{<br/>    std::cout &lt;&lt; <span style="color: rgb(0, 96, 128);">&quot;Exception: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;<br/>    ucout &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot;The request that started at &quot;</span>) &lt;&lt; e.result().start_time().to_string() &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot; and ended at &quot;</span>) &lt;&lt; e.result().end_time().to_string() &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot; resulted in HTTP status code &quot;</span>) &lt;&lt; e.result().http_status_code() &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot; and the request ID reported by the server was &quot;</span>) &lt;&lt; e.result().service_request_id() &lt;&lt; std::endl;<br/>}</pre>
<p>When run on a non-existing blob, this code will print out:</div>
<blockquote>
<p>Exception: The specified blob does not exist.</p>
<p>The request that started at Fri, 13 Dec 2013 18:31:11 GMT and ended at Fri, 13 Dec 2013 18:31:11 GMT resulted in HTTP status code 404 and the request ID reported by the server was 5de65ae4-9a71-4b1d-9c99-cc4225e714c6</p>
</blockquote>
<p>The library also provides the type <em>wa::storage::operation_context</em>, which is supported by all APIs, to obtain more information about what is being done during an operation. Now consider the following code:</p>
<div id="codeSnippetWrapper">
<p>wa::storage::operation_context context;</p>
<p>context.set_sending_request([] (web::http::http_request&amp; request, wa::storage::operation_context)</p>
<p>{</p>
<p>ucout &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot;The request is being sent to &quot;</span>) &lt;&lt; request.request_uri().to_string() &lt;&lt; std::endl;</p>
<p>});</p>
<p>context.set_response_received([] (web::http::http_request&amp;, <span style="color: rgb(0, 0, 255);">const</span> web::http::http_response&amp; response, wa::storage::operation_context)</p>
<p>{</p>
<p>ucout &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot;The reason phrase is &quot;</span>) &lt;&lt; response.reason_phrase() &lt;&lt; std::endl;</p>
<p>});</p>
<p><span style="color: rgb(0, 0, 255);">try</span></p>
<p>{</p>
<p> blob1.download_attributes(wa::storage::access_condition(), wa::storage::blob_request_options(), context);</p>
<p>}</p>
<p><span style="color: rgb(0, 0, 255);">catch</span> (<span style="color: rgb(0, 0, 255);">const</span> wa::storage::storage_exception&amp; e)</p>
<p>{</p>
<p>std::cout &lt;&lt; <span style="color: rgb(0, 96, 128);">&quot;Exception: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</p>
<p>}</p>
<p>ucout &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot;Executed &quot;</span>) &lt;&lt; context.request_results().size() &lt;&lt; U(<span style="color: rgb(0, 96, 128);">&quot; request(s) to perform this operation and the last request's status code was &quot;</span>) &lt;&lt; context.request_results().back().http_status_code() &lt;&lt; std::endl;</p>
</div>
<p>Again, when run on a non-existing blob, this code will print out:</p>
<blockquote>
<p>The request is being sent to http://myaccount.blob.core.windows.net/mycontainer/myblob?timeout=90</p>
<p>The reason phrase is The specified blob does not exist.</p>
<p>Exception: The specified blob does not exist.</p>
<p>Executed 1 request(s) to perform this operation and the last request's status code was 404</p>
</blockquote>
<h4>Samples</h4>
<p>We have provided <a href="https://github.com/WindowsAzure/azure-storage-cpp/tree/master/Microsoft.WindowsAzure.Storage/samples" target="_blank">sample projects on GitHub</a> to help get you up and running with each storage abstraction and to illustrate some additional key scenarios. All sample projects are found under the folder named “samples”.</p>
<p>Open the samples solution file named “Microsoft.WindowsAzure.Storage.Samples.sln” in Visual Studio. Update your storage credentials in the samples_common.h file under the Microsoft.WindowsAzure.Storage.SamplesCommon project. Go to the Solution Explorer window and select the sample project you want to run (for example, Microsoft.WindowsAzure.Storage.BlobsGettingStarted) and choose “Set as StartUp Project” from the Project menu (or, alternatively, right-click the project, then choose the same option from the context menu).</p>
<h4>Summary</h4>
<p>We welcome any feedback you may have in the comments section below, the forums, or <a href="https://github.com/WindowsAzure/azure-storage-cpp" target="_blank">GitHub</a>. If you hit any bugs, filing them on GitHub will also allow you to track the resolution.</p>
<p>Serdar Ozler, Mike Fisher, and Joe Giardino</p>
<h4>Resources</h4>
<p><a href="https://github.com/WindowsAzure/azure-storage-cpp" target="_blank">Source (GitHub)</a></p>
<p><a href="http://www.nuget.org/packages/wastorage" target="_blank">Binaries (NuGet)</a></p>
<p><a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/11/27/windows-azure-storage-release-introducing-cors-json-minute-metrics-and-more.aspx" target="_blank">Windows Azure Storage Release - Introducing CORS, JSON, Minute Metrics, and More</a></p>
<p><a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx" target="_blank">Windows Azure Tables: Introducing JSON</a></p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (12)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-400">
				<div id="div-comment-400" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Sean Snyder (MSFT)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-400">
			February 20, 2014 at 6:15 pm</a>		</div>

		<p>Does the Windows Azure Emulator work for the Windows Azure Storage Client Library for C++ Preview?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-401">
				<div id="div-comment-401" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Sean Snyder (MSFT)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-401">
			February 20, 2014 at 10:14 pm</a>		</div>

		<p>&quot;Please note, that the 2013-08-15 REST version, which this library utilizes, is currently unsupported by the storage emulator. An updated Windows Azure Storage Emulator is expected to ship with full support of these new features in the next month.&quot;</p>
<p>Missed this! Feel free to delete these comments.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-402">
				<div id="div-comment-402" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/419b33245887eb453bdf6c8715579628?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/419b33245887eb453bdf6c8715579628?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">serdar.ozler@outlook.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-402">
			February 21, 2014 at 10:32 am</a>		</div>

		<p>@Sean, please see our Preview release of Windows Azure Storage Emulator with 2013-08-15 REST version support at <a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/windowsazurestorage/archive/2014/01/27/windows-azure-storage-emulator-2-2-1-preview-release-with-support-for-2013-08-15-version.aspx">blogs.msdn.com/&#8230;/windows-azure-storage-emulator-2-2-1-preview-release-with-support-for-2013-08-15-version.aspx</a></p>
<p>This version should work with the C++ library. Please let us know if you hit any issues. You can also use <a rel="nofollow" target="_new" href="https://github.com/WindowsAzure/azure-storage-cpp/issues">github.com/&#8230;/issues</a> to file any feedback you might have.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-430">
				<div id="div-comment-430" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-430">
			May 1, 2014 at 5:17 pm</a>		</div>

		<p>I notice that the nuget dependency is set to CPPREST SDK &gt;= 1.3.1 on the redist package, however it needs to be an == since the DLL versions are named by version.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-544">
				<div id="div-comment-544" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/c14799eef38cb61541bf3a2e9eaa7136?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/c14799eef38cb61541bf3a2e9eaa7136?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">james@impulsescreen.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-544">
			October 15, 2014 at 5:50 pm</a>		</div>

		<p>Any chance of getting this library to compile on Linux? I am using casablanca on Ubuntu successfully and would like to make it easier to communicate with storage using this library</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-545">
				<div id="div-comment-545" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/62c5e9ef4fbe258becc84f2fd2a9e6f7?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62c5e9ef4fbe258becc84f2fd2a9e6f7?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">shah.vinay@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-545">
			October 15, 2014 at 6:50 pm</a>		</div>

		<p>@James, we are actively looking at adding Linux support for our client library, though no timelines to share yet. You can monitor this open issue on github (<a rel="nofollow" target="_new" href="https://github.com/Azure/azure-storage-cpp/issues/12">github.com/&#8230;/12</a>) which we will update as we have more details around this work.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-558">
				<div id="div-comment-558" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Tuan Le</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-558">
			November 11, 2014 at 6:32 am</a>		</div>

		<p>Hei,</p>
<p>I get a error while &nbsp;create a cloud_storage_account objec: Error C2653:&#39;wa&#39; is not a class or namespace name!</p>
<p>Do you know why?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-559">
				<div id="div-comment-559" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Tuan Le</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-559">
			November 13, 2014 at 5:20 am</a>		</div>

		<p>I just wonder if it&#39;s possible to replace &quot;mycontainer&quot; with a string like: </p>
<p>CString myString = &quot;Some text&quot;;</p>
<p>wa::storage::cloud_blob_container container = blob_client.get_container_reference(U(myString )); &nbsp;??</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-560">
				<div id="div-comment-560" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/08402e6e8b215f2761d34e53ee23c257?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/08402e6e8b215f2761d34e53ee23c257?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">asorrin-msft@outlook.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-560">
			November 13, 2014 at 3:22 pm</a>		</div>

		<p>@Tuan Le &#8211; </p>
<p>For your first comment, I assume you&#39;re using version 0.3.0? &nbsp;The namespace was changed from wa::storage::&#8230; to azure::storage::&#8230; since this blog post was written. &nbsp;For a full list of breaking changes, see <a rel="nofollow" target="_new" href="https://github.com/Azure/azure-storage-cpp/blob/master/BreakingChanges.txt">github.com/&#8230;/BreakingChanges.txt</a>.</p>
<p>For your second comment, do you mean &quot;is it possible to use CStrings to call into the storage client?&quot; &nbsp;A utility::string_t type is used throughout, which is a typedef of std::wstring. &nbsp;If you have a CString, you&#39;ll need to convert it.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-561">
				<div id="div-comment-561" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Tuan Le</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-561">
			November 18, 2014 at 4:36 am</a>		</div>

		<p>Thank you for your feedback.</p>
<p>Everything seems to be fine. But when I check with the Denpendency Walker I found some dll missing: API-MS-WIN&#8230;.</p>
<p>Do you know what could be wrong? Thank you very much.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-763">
				<div id="div-comment-763" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Tomoyuki Ohya</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-763">
			February 16, 2015 at 11:21 pm</a>		</div>

		<p>I have a memory leak problem using Azure Storage Client Library for C++ 0.5.0 Preview.</p>
<p>Running a very small code below, watching task manager to check the memory usage, then found memory consumption growing rapidly.</p>
<p>Any help?</p>
<p>&#8212;&#8211;</p>
<p>int _tmain(int argc, _TCHAR* argv[])</p>
<p>{</p>
<p>	azure::storage::cloud_storage_account storage_account = azure::storage::cloud_storage_account::parse(CONNECTION_STRING);</p>
<p>	azure::storage::cloud_blob_client blob_client = storage_account.create_cloud_blob_client();</p>
<p>	azure::storage::cloud_blob_container container = blob_client.get_container_reference(U(&quot;test1&quot;));</p>
<p>	azure::storage::cloud_block_blob blob = container.get_blob_reference(U(&quot;test.txt&quot;));</p>
<p>	std::wstring text = U(&quot;text&quot;);</p>
<p>	while (1){</p>
<p>		blob.upload_text(text);</p>
<p>	}</p>
<p>}</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-913">
				<div id="div-comment-913" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/704d7ee1f73f07b4bf27432e6d4766cf?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/704d7ee1f73f07b4bf27432e6d4766cf?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Vincent Jiang(MSFT)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/19/windows-azure-storage-client-library-for-c-preview/#comment-913">
			March 19, 2015 at 10:13 pm</a>		</div>

		<p>@Tomoyuki Ohya- </p>
<p>We are investigating. By trying out the test code you provide, we do observe a very slow trend of memory usage increase after a long running (with 1+M blobs uploaded), but we do not see a rapid memory growth . &nbsp;Could you provide more information about how you reproduce the issue, for example,</p>
<p>&#8211;	how long does it take before you see memory leak happening?</p>
<p>&#8211;	how fast does the memory consumption grow?</p>
<p>&#8211;	do you ever try to run your program with any memory leak detecting tools, like Visual Leak Detector? How is it going?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F19%2Fwindows-azure-storage-client-library-for-c-preview%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->