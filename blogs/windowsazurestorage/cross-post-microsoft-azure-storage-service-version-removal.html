---
layout: windowsazurestorage
title: (Cross-Post) Microsoft Azure Storage Service Version Removal
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-162" class="post-162 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">(Cross-Post) Microsoft Azure Storage Service Version Removal</h1>		<div class="rating-wrap">
		<div id="star-rating-162" class="wds-ratings" data-rating="0" data-userrating="0" data-postid="162" data-container="body" data-toggle="tooltip" title="0 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2014-08-05T12:17:00+00:00">August 5, 2014</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/#respond">0</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/&quot;, &quot;text&quot;: &quot;(Cross-Post) Microsoft Azure Storage Service Version Removal&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/&quot;, &quot;text&quot;: &quot;(Cross-Post) Microsoft Azure Storage Service Version Removal&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p><span style="font-size: medium;"><strong><em><span style="color: #ff0000;">Update:</span> THIS BLOG POST IS NO LONGER APPLICABLE. For the latest information in Azure Storage Service Version removal plans, please visit: <a href="https://azure.microsoft.com/en-us/blog/microsoft-azure-storage-service-version-removal-update-extension-to-2016/">https://azure.microsoft.com/en-us/blog/microsoft-azure-storage-service-version-removal-update-extension-to-2016/</a></em></strong></span></p>
<script type="text/javascript">// <![CDATA[
document.getElementById("insertStyle").outerHTML = "\x3Cstyle>table.xstore{border-collapse:collapse;} table.xstore tr:nth-child(odd)        {background-color:#f1f1f1;} table.xstore tr:nth-child(even)        {background-color:#ffffff;} table.xstore {background-color:#f1f1f1;} table.xstore th{color:#ffffff;background-color:#555555;border:1px solid #555555;padding:3px;vertical-align:top;text-align:left;} table.xstore td{border:1px solid #d4d4d4;padding:5px;padding-top:7px;padding-bottom:7px;vertical-align:top;} \x3C/style>";
// ]]&gt;</script>
</p>
<p>The Storage Service was initially introduced in 2008, and since then we have released seven version updates, each refining the protocol and adding new features. We are announcing the upcoming removal and removal of some earlier versions of our REST API. This post will outline all you need to know to ensure that your application continues to run well after these versions have been removed.</p>
<h1>Background: Storage Service Versioning</h1>
<h2>What is versioning?</h2>
<p>Azure Storage is accessed using REST API&rsquo;s. These APIs were first released in 2008. As we have improved the service through additions and changes, we have used versioning to avoid breaking existing applications. Any time we make a change that could break an existing application, we introduce a new version, which applications must explicitly opt-in to use. Existing applications will be unaffected by the new version&rsquo;s existence. Calls to storage generally specify the version to be used in one of the following ways:</p>
<ol>
<li>api-version query parameter: this can be specified for any call made to storage as long as sv and x-ms-version are not specified, or if specified are using version 2014 or greater. This api-version parameter will dictate the service version used.</li>
<li>x-ms-version request header: this is required for calls made using Shared Key authentication. The x-ms-version header specifies a version, which informs the service how to interpret the request, and how to form the response for a client using that version of the REST API.</li>
<li>SAS version header: in versions 2012 and 2013, the version specified in the &ldquo;sv&rdquo; parameter of a Shared Access Signature (SAS) token would specify the protocol version. In version 2014, the &ldquo;sv&rdquo; parameter only specifies the protocol version if the api-version query parameter is not specified.</li>
<li>DefaultServiceVersion: The user can set this using SetServiceProperties on the Blob Service to set the version of the API which will be used for requests with no version specified (namely, requests for public blobs).</li>
<li>Default: If a request is made for a public blob and the DefaultServiceVersion has not been set, the service default will be used. This was our initial, 2008 version, unless SetContainerACL had been set, in which case version 2009 is used (regardless of the version that was used for SetContainerACL).</li>
</ol>
<p>The full rules used to determine the version of a request can be found on <a href="http://msdn.microsoft.com/en-us/library/azure/dd894041.aspx" target="_blank">MSDN</a>.</p>
<h2>What about Client Libraries and tools?</h2>
<p>Many of our users use the Storage Client Libraries provided by Microsoft for developing their applications. Each of these client libraries is essentially bound to a specific version of the REST API. This also applies to our PowerShell cmdlets and AzCopy. The Storage Emulator supports all versions of the REST API that have been released when that version of the Storage Emulator is released.</p>
<h1>What&rsquo;s changing?</h1>
<p>Our approach to versioning is unchanged &ndash; we will continue to introduce new versions of our REST API whenever we make changes that might break an existing application. However, we will now be removing several of our earlier service versions which were released early in the lifetime of the storage service.</p>
<h2>Removal Details</h2>
<h3>What versions are being removed?</h3>
<p>All versions prior to version 2012-02-12 will be removed on August 1<sup>st</sup>, 2015. This includes the following versions:</p>
<ul>
<li>2008 (released prior to GA)</li>
<li><a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn592122.aspx" target="_blank">Version 2009-04-14</a> (released prior to GA)</li>
<li><a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn592117.aspx" target="_blank">Version 2009-07-17</a> (released prior to GA)</li>
<li><a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn592121.aspx" target="_blank">Version 2009-09-19</a> (released prior to GA)</li>
<li><a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn592120.aspx" target="_blank">Version 2011-08-18</a></li>
</ul>
<p>The following versions are unaffected and continue to be fully supported:</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/azure/dn592123.aspx" target="_blank">Version 2012-02-12</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/azure/dn592124.aspx" target="_blank">Version 2013-08-15</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/azure/dd894041.aspx" target="_blank">Version 2014-02-14</a></li>
</ul>
<h3>When will these versions be removed?</h3>
<p>The five affected versions will be removed on August 1<sup>st</sup>, 2015.</p>
<h3>What will happen when these versions are removed?</h3>
<p>The following changes will occur when removal takes effect.</p>
<h4>Explicitly Versioned Requests</h4>
<p>Requests which are explicitly versioned using x-ms-version request header (set to one of the removed versions) will fail, receiving an HTTP 400 (Bad Request) status code, similar to any request made with an invalid version header.</p>
<h4>SAS Requests with no &ldquo;sv&rdquo; parameter</h4>
<p>Prior to version 2012-02-12, a SAS request did not specify a version in the &ldquo;sv&rdquo; parameter of the SAS token. The SAS token parameters of these requests were interpreted using the rules for the 2009-07-17 REST version. When the versions prior to 2012-02-12 are removed, these requests will fail, receiving an HTTP 400 (Bad Request) status code, regardless of whether x-ms-version is specified as a supported version. For SAS requests to continue working, they must specify the &ldquo;sv&rdquo; parameter. Using at least version 2014-02-14 is recommended.</p>
<h4>Default Service Version and Anonymous Requests with no explicit version</h4>
<p>If <a href="http://msdn.microsoft.com/en-us/library/azure/hh452235.aspx" target="_blank">Set Blob Service Properties (REST API)</a> has been used to set the default version of requests to version 2012-02-12 or higher, the version set will be used. If the default version was unset, then it assumed that the request is version agnostic, and going forward we will start to respond with version 2014-02-14. Note that we make no guarantees about whether or not there will be breaking changes when unversioned requests start to get the new service version, so best practice continues to be that providing a version is always best.</p>
<p>If default service version was set to a version that is now removed, that request is considered to be explicitly versioned, and will fail with &ldquo;400 Bad Request&rdquo;. If default service version was set to a version that is still supported, that version will continue to be used.</p>
<h4>SharedKey/SharedKeyLite Requests with no explicit version</h4>
<p>For requests that were signed using the account&rsquo;s shared key, if no explicit version is specified using x-ms-version header or api-version query parameter (supported in version 2014-02-14 and above), the requests will fail with 400 Bad Request.</p>
<p><strong>Note: </strong>It is considered best practice to ensure that all requests made to the storage service are explicitly versioned. Beginning in version 2014-02-14, requests can be explicitly versioned using the api-version query string parameter, so that even clients that cannot specify custom headers can specify a version by including this parameter in their query string. See <a href="http://msdn.microsoft.com/en-us/library/azure/dd894041.aspx" target="_blank">MSDN</a> for a discussion of versioning in Azure Storage and best practices to follow.</p>
<h3>Minimum Supported Versions/Libraries/SDK&rsquo;s</h3>
<p>Users should upgrade to the latest version whenever possible. The below table is provided to allow users to quickly see if they are using any components that target the versions to be removed.</p>
<p id="insertStyle">&nbsp;</p>
<script type="text/javascript">// <![CDATA[
document.getElementById("insertStyle").outerHTML = "\x3Cstyle>table.xstore{border-collapse:collapse;width:100%;} table.xstore tr:nth-child(odd)	{background-color:#f1f1f1;} table.xstore tr:nth-child(even)	{background-color:#ffffff;} table.xstore {background-color:#f1f1f1;} table.xstore th{color:#ffffff;background-color:#555555;border:1px solid #555555;padding:3px;vertical-align:top;text-align:left;} table.xstore td{border:1px solid #d4d4d4;padding:5px;padding-top:7px;padding-bottom:7px;vertical-align:top;} \x3C/style>";
// ]]&gt;</script>
<table class="xstore" style="width: 600px;">
<tbody>
<tr>
<th valign="top" width="79"><strong>Language</strong></th>
<th valign="top" width="418"><strong>Earliest Supported Version Using Service Version 2012-02-12 or later</strong></th>
</tr>
<tr>
<td valign="top" width="79">.NET</td>
<td valign="top" width="418">2.0. This was first included in Azure SDK version 2.1.</td>
</tr>
<tr>
<td valign="top" width="79">Java</td>
<td valign="top" width="418">0.3</td>
</tr>
<tr>
<td valign="top" width="79">C++</td>
<td valign="top" width="418">All</td>
</tr>
<tr>
<td valign="top" width="79">Windows Phone</td>
<td valign="top" width="418">All</td>
</tr>
<tr>
<td valign="top" width="79">WinRT</td>
<td valign="top" width="418">All</td>
</tr>
<tr>
<td valign="top" width="79">Android</td>
<td valign="top" width="418">All</td>
</tr>
<tr>
<td valign="top" width="79">PHP</td>
<td valign="top" width="418">No released version currently supports version 2012-02-12 &ndash; an update will be coming soon.</td>
</tr>
<tr>
<td valign="top" width="79">Node.js</td>
<td valign="top" width="418">The current released version supports 2012-02-12</td>
</tr>
<tr>
<td valign="top" width="79">Ruby</td>
<td valign="top" width="418">The current released version supports 2012-02-12</td>
</tr>
<tr>
<td valign="top" width="79">Python</td>
<td valign="top" width="418">The current released version supports 2012-02-12</td>
</tr>
<tr>
<td valign="top" width="79">PowerShell</td>
<td valign="top" width="418">All</td>
</tr>
<tr>
<td valign="top" width="79">CLI</td>
<td valign="top" width="418">The current released version supports 2012-02-12</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h1>What should I do?</h1>
<p>To ensure that your application continues to work properly after removal, you should do the following things.</p>
<h2>Check your application to find what versions it is using</h2>
<p>The first thing to do is to determine what REST versions your application is using. If your application is under your control and you have confidence you are aware of all of all of the components of it which make calls to Azure Storage, then you can verify this by checking the components used against the above list, or by inspecting your code if you have written your own code to make calls to storage.</p>
<p>As a stronger check, or if you are unsure which versions of the components have been deployed, you can <a href="http://msdn.microsoft.com/en-us/library/hh343270.aspx" target="_blank">enable logging</a>, which will log the requests being made to your storage account. The logs have the <a href="http://msdn.microsoft.com/en-us/library/hh343259.aspx" target="_blank">request version used included</a>, which can be used to find if any requests are being made using versions with planned removal. Here is a sample log entry, with the version used highlighted &ndash; in this case the request was an anonymous <strong>GetBlob</strong> request which implicitly used the 2009-09-19 version:</p>
<p>1.0;2011-08-09T18:52:40.9241789Z;GetBlob;AnonymousSuccess;200;18;10;anonymous;;myaccount;blob;"https:// myaccount.blob.core.windows.net/thumbnails/lake.jpg?timeout=30000";"/myaccount/thumbnails/lake.jpg";a84aa705-8a85-48c5-b064-b43bd22979c3;0;123.100.2.10;2009-09-19;252;0;265;100;0;;;"0x8CE1B6EA95033D5";Friday, 09-Aug-11 18:52:40 GMT;;;;"8/9/2011 6:52:40 PM ba98eb12-700b-4d53-9230-33a3330571fc"</p>
<h2>What to change</h2>
<p>If you find any log entries which show that version to be removed is being used, you will need to find that component and either validate that it will continue to work (unversioned requests may continue to work as their implicit version will simply increase &ndash; see above), or take appropriate steps to change the version being used. Most commonly, one of the following two steps will be used:</p>
<p>1) Change the version specified in the request, typically by migrating to a later version of the libraries/tools. When possible, migrate to the latest version to get the most improvements and fixes.</p>
<p>2) Set the default service version to one of the supported versions now so that the behavior can be verified prior to removal. This only applies to anonymous requests with no explicit version.</p>
<p>When migrating your applications to newer versions, you should review the above linked change lists for each service version and test thoroughly to ensure that your application is working properly after you&rsquo;ve updated it. Please note that the service version updates included both included syntactic breaks (the request will receive a response that either is a failure or formed very differently) and semantic breaks (the request will receive a similar response that means something different).</p>
<h2>Post migration validation</h2>
<p>After the migration, you should validate in the logs that you do not find any of the earlier versions anymore. This is the surest way to know that your application is not using any of the versions to be removed. Make sure to check the logs over long enough durations of time to be sure that there are no tasks/workloads running rarely that would still use the older versions (scheduled tasks that run once per day, for example).</p>
<h1>Conclusion</h1>
<p>It is recommended that users begin their application upgrades now in order to avoid being impacted when the earlier service versions are removed on August 1<sup>st</sup>, 2015.</p>
<p>Jeff Irwin</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (0)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2014/08/05/cross-post-microsoft-azure-storage-service-version-removal/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2014%2F08%2F05%2Fcross-post-microsoft-azure-storage-service-version-removal%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->