---
layout: windowsazurestorage
title: (Cross-Post) Introducing Azure Storage Data Movement Library Preview
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-1491" class="post-1491 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">(Cross-Post) Introducing Azure Storage Data Movement Library Preview</h1>		<div class="rating-wrap">
		<div id="star-rating-1491" class="wds-ratings" data-rating="0" data-userrating="0" data-postid="1491" data-container="body" data-toggle="tooltip" title="0 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 0 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2015-09-23T11:58:00+00:00">September 23, 2015</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/#respond">0</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/&quot;, &quot;text&quot;: &quot;(Cross-Post) Introducing Azure Storage Data Movement Library Preview&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/&quot;, &quot;text&quot;: &quot;(Cross-Post) Introducing Azure Storage Data Movement Library Preview&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>Since <a href="https://azure.microsoft.com/en-us/documentation/articles/storage-use-azcopy/" target="_blank">AzCopy</a> was first released, a large number of customers have requested programmatic access to AzCopy. We are pleased to announce a new open-sourced Azure Storage data movement library for .NET (DML for short). This library is based on the core data movement framework that powers AzCopy. The library is designed for high-performance, reliable and easy Azure Storage data transfer operations enabling scenarios such as: <br/>&bull;&nbsp;&nbsp;&nbsp; Uploading, downloading and copying data between Microsoft Azure Blob and File Storage <br/>&bull;&nbsp;&nbsp;&nbsp; Migrating data from other cloud providers such as AWS S3 to Azure Blob Storage <br/>&bull;&nbsp;&nbsp;&nbsp; Backing up Azure Storage data </p>
<p>Here is a sample demonstrating how to upload a blob, please find more samples at <a href="https://github.com/Azure/azure-storage-net-data-movement" target="_blank">github</a>.</p>
<pre class="prettyprint">using System;</pre>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #0000ff;">using</span> System.Threading;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #0000ff;">using</span> Microsoft.WindowsAzure.Storage;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #0000ff;">using</span> Microsoft.WindowsAzure.Storage.Blob;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #008000;">// Include the New Azure Storage Data Movement Library</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #0000ff;">using</span> Microsoft.WindowsAzure.Storage.DataMovement;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">&nbsp;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #008000;">// Setup the storage context and prepare the object you need to upload</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #0000ff;">string</span> storageConnectionString = <span style="color: #006080;">"myStorageConnectionString"</span>;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudStorageAccount account = CloudStorageAccount.Parse(storageConnectionString);</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">CloudBlobClient blobClient = account.CreateCloudBlobClient();</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">CloudBlobContainer blobContainer = blobClient.GetContainerReference(<span style="color: #006080;">"mycontainer"</span>);</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">blobContainer.CreateIfNotExists();</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #0000ff;">string</span> sourcePath = <span style="color: #006080;">"path\\to\\test.txt"</span>;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">CloudBlockBlob destBlob = blobContainer.GetBlockBlobReference(<span style="color: #006080;">"myblob"</span>);</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">&nbsp;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #008000;">// Use the interfaces from the new Azure Storage Data Movement Library to upload the blob</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #008000;">// Setup the number of the concurrent operations</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">TransferManager.Configurations.ParallelOperations = 64;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">&nbsp;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;"><span style="color: #008000;">// Setup the transfer context and track the upoload progress</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">TransferContext context = <span style="color: #0000ff;">new</span> TransferContext();</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">context.ProgressHandler = <span style="color: #0000ff;">new</span> Progress&lt;TransferProgress&gt;((progress) =&gt;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">{</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">    Console.WriteLine(<span style="color: #006080;">"Bytes uploaded: {0}"</span>, progress.BytesTransferred);</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">});</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">&nbsp;</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;"><span style="color: #008000;">// Upload a local blob</span></pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">var task = TransferManager.UploadAsync(</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: white; border-style: none; padding: 0px;">    sourcePath, destBlob, <span style="color: #0000ff;">null</span>, context, CancellationToken.None);</pre>
<!--CRLF-->
<pre style="font-size: 8pt; overflow: visible; font-family: 'Courier New', courier, monospace; width: 100%; color: black; direction: ltr; text-align: left; margin: 0em; line-height: 12pt; background-color: #f4f4f4; border-style: none; padding: 0px;">task.Wait();</pre>
<!--CRLF--></div>
</div>
<p>Azure Storage Data Movement Library has the same performance as AzCopy and exposes the core functionalities of AzCopy. You can install the first preview of the library from <a href="https://www.nuget.org/packages/Microsoft.Azure.Storage.DataMovement" target="_blank">Nuget</a> or download the source code from <a href="https://github.com/Azure/azure-storage-net-data-movement" target="_blank">Github</a>. In the initial version (0.1.0) of this library, you can find the following abilities: <br/>&bull;&nbsp;&nbsp;&nbsp; Support data transfer for Azure Storage abstraction: Blob <br/>&bull;&nbsp;&nbsp;&nbsp; Support data transfer for Azure Storage abstraction: File <br/>&bull;&nbsp;&nbsp;&nbsp; Download / Upload / Copy single object <br/>&bull;&nbsp;&nbsp;&nbsp; Control the number of concurrent operations <br/>&bull;&nbsp;&nbsp;&nbsp; Synchronous and asynchronous copying <br/>&bull;&nbsp;&nbsp;&nbsp; Define the number of concurrent operations <br/>&bull;&nbsp;&nbsp;&nbsp; Define the suffix of the user agent <br/>&bull;&nbsp;&nbsp;&nbsp; Set the content type <br/>&bull;&nbsp;&nbsp;&nbsp; Set the Access Condition to conditionally copy objects, for example copy objects changed since certain date <br/>&bull;&nbsp;&nbsp;&nbsp; Validate content MD5 <br/>&bull;&nbsp;&nbsp;&nbsp; Download specific blob snapshot <br/>&bull;&nbsp;&nbsp;&nbsp; Track transfer progress: bytes transferred, number of success/fail/skip files <br/>&bull;&nbsp;&nbsp;&nbsp; Recover (Set/Get transfer checkpoint) <br/>&bull;&nbsp;&nbsp;&nbsp; Transfer Error handling (transfer exception and error code) <br/>&bull;&nbsp;&nbsp;&nbsp; Client-Side Logging</p>
<p>DML is an open source project, we welcome contributions from the community. In particular we are interested in extensions to our samples to help make them more robust. Together with the release of version 0.1.0, we have created the following samples, for more details, please visit <a href="https://github.com/Azure/azure-storage-net-data-movement/blob/master/README.md" target="_blank">Github Readme.md</a>.</p>
<p>&bull;&nbsp;&nbsp;&nbsp; <a href="https://github.com/Azure/azure-storage-net-data-movement/tree/master/samples/DataMovementSamples" target="_blank">Upload/Download/Copy an Azure Storage Blob</a> <br/>&bull;&nbsp;&nbsp;&nbsp; <a href="https://github.com/Azure/azure-storage-net-data-movement/tree/master/samples/S3ToAzureSample" target="_blank">Migrate data from AWS S3 to Azure Blob Storage</a></p>
<p><strong>Next Steps</strong> <br/>We will continue the investment for both AzCopy and Data Movement Library, and in the next releases of Data Movement Library, we will add the support for more advanced features, which shall include: <br/>&bull;&nbsp;&nbsp;&nbsp; Download / Upload / Copy directory (Local file directory, blob virtual directory, File share directory) <br/>&bull;&nbsp;&nbsp;&nbsp; Transfer directory in recursive mode or flat mode <br/>&bull;&nbsp;&nbsp;&nbsp; Specify the file pattern when copying files and directories <br/>&bull;&nbsp;&nbsp;&nbsp; Download Snapshots under directories</p>
<p>As always, we look forward to your feedback.</p>
<p>Microsoft Azure Storage Team</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (0)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2015/09/23/cross-post-introducing-azure-storage-data-movement-library-preview/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2015%2F09%2F23%2Fcross-post-introducing-azure-storage-data-movement-library-preview%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->