---
layout: windowsazurestorage
title: Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-144" class="post-144 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage</h1>		<div class="rating-wrap">
		<div id="star-rating-144" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="144" data-container="body" data-toggle="tooltip" title="2 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2013-12-11T14:07:00+00:00">December 11, 2013</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comments">5</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/&quot;, &quot;text&quot;: &quot;Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/&quot;, &quot;text&quot;: &quot;Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p><strong>Read Access Geo Redundant Storage</strong>(<strong>RA-GRS) is no longer in preview and is Generally Available.</strong></p>
<p>We are excited to announce the ability to allow customers to achieve higher read availability for their data. This preview feature called “Read Access - Geo Redundant Storage (RA-GRS)” allows you to read an eventually consistent copy of your geo-replicated data from the storage account’s secondary region in case of any unavailability to the storage account’s primary region.</p>
<p>Before we dive into the details of this new ability, we will briefly summarize the available redundancy options in Windows Azure Storage. We will then cover in detail each of the options available including the new option of Read Access – Geo Redundant Storage (RA-GRS) and how one can sign up for this limited preview. We will also cover the storage client library changes that one can use to achieve higher read availability using RA-GRS.</p>
<h3><a name="_Toc374464496"></a>Redundancy Options in Windows Azure Storage</h3>
<p>Windows Azure Storage provides following options for redundancy for Blobs, Tables and Queues:</p>
<p>1. <strong>Locally Redundant Storage (LRS):</strong> All data in the storage account is made durable by replicating transactions synchronously to three different storage nodes within the same region. The<a href="#_Locally_Redundant_Storage"> below section</a> will cover more details on LRS including on how to select LRS.</p>
<p>2. <strong>Geo Redundant Storage (GRS): </strong>This is the default option for redundancy when a storage account is created. Like LRS, transactions are replicated synchronously to three storage nodes within the primary region chosen for creating the storage account. However, the transaction is also queued for asynchronous replication to another secondary region (hundreds of miles away from the primary) where data is again made durable by replicating it to three more storage nodes there. The <a href="#_Geo_Redundant_Storage">below section</a> will cover in depth the asynchronous replication process, information on region pairings and the failover process.</p>
<p>3. <strong>Read Access - Geo Redundant Storage (RA-GRS):</strong> For a GRS storage account, we now have introduced in limited preview the ability to turn on read only access to a storage account’s data in the secondary region. Since replication to the secondary region is done asynchronously, this provides an eventual consistent version of the data to read from. The <a href="#_Introducing_Read-only_Access">below section</a> will cover more details on RA-GRS, how to enable this in preview mode and details on storage analytics.</p>
<h4>Locally Redundant Storage (LRS)</h4>
<h5><a name="_Toc374464498"></a>What is LRS?</h5>
<p>Locally redundant storage stores multiple copies of your data synchronously within a region for durability. To ensure durability, we replicate the transaction synchronously across three different storage nodes across different fault domains and upgrade domains. A fault domain (FD) is a group of nodes that represent a physical unit of failure and can be considered as nodes belonging to the same physical rack. An upgrade domain (UD) is a group of nodes that will be upgraded together during the process of service upgrade (rollout). The three replicas are spread across UDs and FDs to ensure that data is available even if hardware failure impacts a single rack and when nodes are upgraded during a rollout.</p>
<p>In addition to returning success only when all three replicas are persisted, we store CRCs of the data to ensure correctness and periodically read and validate the CRCs to detect bit rot (random errors occurring on the disk media over a period of time). In addition, Windows Azure Storage <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/13/usenix-best-paper-award-erasure-coding-in-windows-azure-storage.aspx" target="_blank">erasure codes data</a> which further improves durability. More details on how data is made durable can be found in our <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx" target="_blank">SOSP paper</a>.</p>
<h5><a name="_Toc374464500"></a>Scenarios for LRS</h5>
<p>LRS <a href="http://www.windowsazure.com/en-us/pricing/details/storage/" target="_blank">costs less</a> than GRS. Based on current price structure, the reduction in price compared to GRS is around 23% to 34% depending on how much data is stored. Here are some reasons why one may choose LRS over GRS.</p>
<p>1. Applications that store data which can be easily reconstructed may choose to not geo replicate data not only for cost but also because they get higher throughput for the storage account. LRS accounts get 10 Gibps ingress and 15 Gibps egress as compared to 5 Gibps ingress and 10 Gibps egress for a GRS account.</p>
<p>2. Some customers want their data only replicated within a single region due to application’s data governance requirements.</p>
<p>3. Some applications may have built their own geo replication strategy and not require geo replication to be managed by Windows Azure Storage service.</p>
<h5>How to configure LRS</h5>
<p>GRS is the default redundancy option when creating a storage account and is included in current pricing for Azure Storage.&#160; To configure LRS using the <a href="https://manage.windowsazure.com/" target="_blank">Windows Azure Portal</a>, you would need to choose “Locally Redundant” for replication in the “configure” page for the selected storage account and only then the discounted pricing would apply. When you select LRS, data will be deleted from the secondary location. It is important to note that after you select LRS, changing back to GRS (i.e. Geo Redundant) again would incur an additional charge for egress involved in copying existing data from primary location to the secondary location. Once the initial data is copied there is no further additional egress charge for geo replicating the data from the primary to secondary location for GRS. The details for bandwidth charges can be found <a href="http://www.windowsazure.com/en-us/pricing/details/storage/" target="_blank">here</a>.</p>
<h4><a name="_Ref374538691"></a><a name="_Toc374464501"></a><a name="_Geo_Redundant_Storage"></a>Geo Redundant Storage (GRS):</h4>
<h5><a name="_Toc374464502"></a>What is GRS?</h5>
<p>A geo redundant storage account has its blob, table and queue data replicated to a secondary region hundreds of miles away from the primary region. So even in the case of a complete regional outage or a regional disaster in which the primary location is not recoverable, your data is still durable. As explained above in LRS, updates to your storage account are synchronously replicated to three storage nodes in the primary region and success is returned only once three copies are persisted there. For GRS, after the updates are committed to the primary region they are asynchronously replicated to the secondary region. On the secondary, the updates are again committed to a three replica set before returning success back to the primary.</p>
<p>Our goal is to keep the data completely durable at both the primary location and secondary location. This means we keep three replicas in each of the locations (i.e. total of 6 copies) to ensure that each location can recover by itself from common failures (e.g., disk, node, rack, TOR failing), without having to communicate with the other location. The two locations only have to talk to each other to geo-replicate the recent updates to storage accounts. This is important, because it means that if we had to failover a storage account from the primary to the secondary, then all the data that had been committed to the secondary location via geo-replication will already be durable there. Since transactions are replicated asynchronously, it is important to note that opting for GRS does not impact latency of transactions made to the primary location. However, since there is a delay in the geo replication, in the event of a regional disaster it is possible that delta changes that have not yet been replicated to the secondary region may be lost if the data cannot be recovered from the primary region.</p>
<h5><a name="_Toc374464503"></a>What are the secondary locations?</h5>
<p>When a storage account is created, the customer chooses the primary location for their storage account. However, the secondary location for the storage account is fixed and customers do not have the ability to change this. The following table shows the current primary and secondary location pairings:</p>
<table cellspacing="0" cellpadding="0" border="1">
<tbody>
<tr>
<td valign="top" width="171">
<p><strong>Primary</strong></p>
</td>
<td valign="top" width="171">
<p><strong>Secondary</strong></p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>North Central US</p>
</td>
<td valign="top" width="171">
<p>South Central US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>South Central US</p>
</td>
<td valign="top" width="171">
<p>North Central US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>East US</p>
</td>
<td valign="top" width="171">
<p>West US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>West US</p>
</td>
<td valign="top" width="171">
<p>East US</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>North Europe</p>
</td>
<td valign="top" width="171">
<p>West Europe</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>West Europe</p>
</td>
<td valign="top" width="171">
<p>North Europe</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>South East Asia</p>
</td>
<td valign="top" width="171">
<p>East Asia</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>East Asia</p>
</td>
<td valign="top" width="171">
<p>South East Asia</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>East China</p>
</td>
<td valign="top" width="171">
<p>North China</p>
</td>
</tr>
<tr>
<td valign="top" width="171">
<p>North China</p>
</td>
<td valign="top" width="171">
<p>East China</p>
</td>
</tr>
</tbody>
</table>
<h5><a name="_Toc374464504"></a>What transactional consistency can be expected with geo replication?</h5>
<p>To understand transactional consistency with geo replication, it is important to understand that Windows Azure Storage uses a range based partitioning system in which every object has a property called Partition Key which is the unit of scale. All objects with the same value for Partition Key will be served by the same Partition Server (<a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx" target="_blank">see SOSP paper for details</a>). The Partition Key for objects are:</p>
<ul>
<li>Blob: Account name, Container name and Blob name </li>
<li>Table Entity: Account name, Table name and app defined PartitionKey </li>
<li>Queue Message: Account name and Queue name </li>
</ul>
<p>More details on the scalability targets of a storage account and these objects can be found <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn249410.aspx" target="_blank">here</a>.</p>
<p>Geo-replication ensures that transactions to objects with same Partition Key value are committed in the same order at the secondary location as at the primary location. That said, it is also important to note that there are no geo-replication ordering guarantees across objects with different Partition Key values. This means that different partitions can be geo-replicating at different speeds. Once all the updates have been geo-replicated and committed at the secondary location, the secondary location will have the exact same state as the primary location.</p>
<p>For example, consider the case where we have two blobs, <em>foo</em> and <em>bar</em>, in our storage account (for blobs, the complete blob name is the Partition Key).&#160; Now say we execute transactions A and B on blob foo, and then execute transactions X and Y against blob bar.&#160; It is guaranteed that transaction A will be geo-replicated before transaction B, and that transaction X will be geo-replicated before transaction Y.&#160; However, no other guarantees are made about the respective timings of geo-replication between the transactions against foo and the transactions against bar. If a disaster happened and caused recent transactions to not get geo-replicated, that would make it possible for, transactions A and X to be geo-replicated, while losing transactions B and Y. Or transactions A and B could have been geo-replicated, but neither X nor Y had made it to the secondary. The same holds true for operations involving Tables and Queues, where for Tables the partitions are determined by the application defined Partition Key of the entity instead of the blob name, and for Queues the Queue name is the Partition Key.</p>
<p>Because of this, to best leverage geo-replication, one best practice is to avoid cross-Partition Key relationships whenever possible. This means you should try to restrict relationships for Tables to entities that have the same Partition Key value. All transactions within a single Partition Key value are committed on the secondary in the same order as the primary. However, for high scale scenarios, it is not advisable to have all entities have same Partition Key value since the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn249410.aspx" target="_blank">scalability target</a> for a single partition is lot lower than that of a single storage account.</p>
<p>The only multiple object transaction supported by Windows Azure Storage is <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx" target="_blank">Entity Group Transactions</a> for Windows Azure Tables, which allow clients to commit a batch of entities, all with-in the same Partition Key, together as a single atomic transaction. Geo-replication also treats this batch as an atomic operation. Therefore, the whole batch transaction is committed atomically on the secondary.</p>
<h5><a name="_Toc374464505"></a>What is the Geo-Failover Process?</h5>
<p>Geo failover is the process of configuring a storage account’s secondary location as the new primary location. At present, failover is at <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx" target="_blank">stamp level</a> and we do not have the ability to failover a single storage account. We plan to provide an API to allow customers to trigger a failover at an account level, but this is not available yet. Given that failover is at the stamp level, in the event of a major disaster that affects the primary location, we will first try to restore the data in the primary location. Restoring of primary is given precedence since failing over to secondary may result in recent delta changes being lost because of the nature of replication being asynchronous, and not all applications may prefer failing over if the availability to the primary can be restored.</p>
<p>If we needed to perform a failover, affected customers will be notified via their subscription contact information. As part of the failover, the customer’s “account.&lt;service&gt;.core.windows.net” DNS entry would be updated to point from the primary location to the secondary location. Once this DNS change is propagated, the existing Blob, Table, and Queue URIs will work. This means that you do not need to change your application’s URIs – all existing URIs will work the same before and after a geo-failover. For example, if the primary location for a storage account “myaccount” was North Central US, then the DNS entry for myaccount.&lt;service&gt;.core.windows.net would direct traffic to North Central US. If a geo-failover became necessary, the DNS entry for myaccount.&lt;service&gt;.core.windows.net would be updated so that it would then direct all traffic for the storage account to South Central US. After the failover occurs, the location that is accepting traffic is considered the new primary location for the storage account. Once the new primary is up and accepting traffic, we will bootstrap to a new secondary to get the data geo redundant again.</p>
<h5><a name="_Toc374464506"></a>What is the RPO and RTO with GRS?</h5>
<p><strong>Recover Point Objective (RPO)</strong>: In GRS and RA-GRS the storage service asynchronously geo-replicates the data from the primary to the secondary location. If there was a major regional disaster and a failover had to be performed, then recent delta changes that had not been geo-replicated could be lost. The number of minutes of potential data lost is referred to as RPO (i.e., the point in time to which data can be recovered to). We typically have a RPO less than 15 minutes, though there is currently no SLA on how long geo-replication takes.</p>
<p><strong>Recovery Time Objective (RTO)</strong>: The other metric to know about is RTO. This is a measure of how long it takes us to do the failover, and get the storage account back online if we had to do a failover. The time to do the failover includes the following:</p>
<ul>
<li>The time it takes us to investigate and determine whether we can recover the data at the primary location or if we should do the failover </li>
<li>Failover the account by changing the DNS entries </li>
</ul>
<p>We take the responsibility of preserving your data very seriously, so if there is any chance of recovering the data, we will hold off on doing the failover and focus on recovering the data in the primary location. In the future, we plan to provide an API to allow customers to trigger a failover at an account level, which would then allow customers to control the RTO themselves, but this is not available yet.</p>
<h5><a name="_Toc374464507"></a>Scenarios for GRS</h5>
<p>GRS is chosen by customers requiring the highest level of durability for Business Continuity Planning (BCP) by keeping their data durable in two regions hundreds of miles apart from each other in case of a regional disaster.</p>
<h4><a name="_Toc374464508"></a><a name="_Introducing_Read-only_Access"></a>Introducing Read-only Access to Geo Redundant Storage (RA-GRS):</h4>
<p>RA-GRS allows you to have higher read availability for your storage account by providing “read only” access to the data replicated to the secondary location. Once you enable this feature, the secondary location may be used to achieve higher availability in the event the data is not available in the primary region. This is an “opt-in” feature which requires the storage account be geo-replicated.</p>
<h5><a name="_Toc374464509"></a>How to enable RA-GRS?</h5>
<p>During limited preview, customers will need to sign up for the preview on the <a href="http://www.windowsazure.com/en-us/services/preview/" target="_blank">Windows Azure Preview</a> page. This puts your subscription ID in a queue to be approved. Once approved, you will get a mail notifying you about the approval. Once approved, you can enable RA-GRS for any of the accounts associated with that subscription. You can enable Read-Only Access to your secondary region via Service Management REST APIs for <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh264518.aspx" target="_blank">Create</a> and <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh264516.aspx" target="_blank">Update</a> Storage Account or via the <a href="https://manage.windowsazure.com/" target="_blank">Windows Azure Portal</a>. When using the APIs to enable RA-GRS, you would need to ensure that the property GeoReplicationEnabled <strong>and </strong><strong>SecondaryReadEnabled are set to true in the request payload. </strong>Via the portal, you can configure the storage account’s replication property to “Read Access Geo-Redundant” Storage.&#160;&#160; Note, during this preview RA-GRS is not yet available in North China and East China, but it is available everywhere else.&#160; We will update the blog post once RA-GRS becomes available in China.</p>
<h5><a name="_Toc374464510"></a>How does RA-GRS work?</h5>
<p>When you enable read-only access to your secondary region, you get a secondary endpoint in addition to the primary endpoint for accessing your storage account. This secondary endpoint is similar to the primary endpoint except for the suffix “-secondary”. For example: if the primary endpoint is myaccount.&lt;service&gt;.core.windows.net, the secondary endpoint is myaccount-<strong><em>secondary</em></strong>.&lt;service&gt;.core.windows.net. The secret keys used to access the primary endpoint are the same ones used to access the secondary endpoint. Using the same keys enables the same <a href="http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx" target="_blank">Shared Access Signature</a> to work for both the primary and secondary endpoints. This means that the <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx" target="_blank">canonicalization of the resource</a> used for signing to access both the primary and secondary needs to remain the same. Therefore, the account name used in the canonicalized resource should exclude the “-secondary” suffix for the canonicalization (note, existing storage explorers that use the DNS to extract the account name may not exclude it and hence may not be able to read from the secondary endpoint). The secondary endpoint obtained can then be used to dispatch read requests when the primary is not available to achieve higher availability. Please note that any put/delete requests to this secondary endpoint will automatically be rejected with HTTP status code 403.</p>
<p>Let us revisit the process of geo replication we explained above. A transaction on the primary is replicated asynchronously to the secondary region. However, since transactions across Partition Keys can happen out of order, we introduce a new term called “Last Sync Time” which acts as the conservative RPO time. All primary updates preceding the Last Sync Time (defined in UTC) are guaranteed to be available for read operations at the secondary. Primary updates after this point in time may or may not be available for reads. There is a separate Last Sync Time value provided for Blobs, Tables and Queues for a storage account. The Last Sync Time is calculated by tracking the geo replicated sync time for each partition and then reporting the minimum time for blobs, tables and queues. Let’s use an example to better illustrate the concept. The below table lists a timeline of operations on blob “myaccount.blob.core.windows.net/mycontainer/blob1.txt” and blob “myaccount.blob.core.windows.net/mycontainer/blob2.txt”</p>
<table cellspacing="0" cellpadding="0" border="1">
<tbody>
<tr>
<td valign="top" width="69">
<p>UTC Time</p>
</td>
<td valign="top" width="178">
<p>User Action</p>
</td>
<td valign="top" width="168">
<p>Replication</p>
</td>
<td valign="top" width="126">
<p>Last Sync</p>
</td>
<td valign="top" width="114">
<p>Read request on secondary</p>
</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:00:00</p>
</td>
<td valign="top" width="178">
<p>User uploaded the blob1 with contents “Hello” – Transaction # 1</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:01:00</p>
</td>
<td valign="top" width="178">
<p>User uploaded the blob2 with contents “Cheers” – Transaction # 2</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:02:00</p>
</td>
<td valign="top" width="178">
<p>User issues read requests for blob1 and blob2 on secondary location</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">
<p>A read on blob1 &amp; blob2 returns 404</p>
</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:03:00</p>
</td>
<td valign="top" width="178">&#160;</td>
<td valign="top" width="168">
<p>The upload transaction # 2 is replicated to secondary location</p>
</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:04:00</p>
</td>
<td valign="top" width="178">
<p>User updated blob1 with contents “Adios” – Transaction # 3</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:05:00</p>
</td>
<td valign="top" width="178">
<p>User issues a read request for blob1 and blob2 on secondary location</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 21:58:00</p>
</td>
<td valign="top" width="114">
<p>A read on blob1 returns 404 and blob2 returns “Cheers”</p>
</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:05:30</p>
</td>
<td valign="top" width="178">&#160;</td>
<td valign="top" width="168">
<p>The upload transaction # 1 is replicated to secondary location</p>
</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 22:01:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:06:00</p>
</td>
<td valign="top" width="178">
<p>User issues a read request for blob1 on secondary location</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 22:01:00</p>
</td>
<td valign="top" width="114">
<p>A read on blob1 returns “Hello”</p>
</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:07:00</p>
</td>
<td valign="top" width="178">&#160;</td>
<td valign="top" width="168">
<p>The upload transaction # 3 is replicated to secondary location</p>
</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 22:04:00</p>
</td>
<td valign="top" width="114">&#160;</td>
</tr>
<tr>
<td valign="top" width="69">
<p>Wed, 23 Oct 2013 22:08:00</p>
</td>
<td valign="top" width="178">
<p>User issues a read request for blob1 on secondary location</p>
</td>
<td valign="top" width="168">&#160;</td>
<td valign="top" width="126">
<p>Wed, 23 Oct 2013 22:04:00</p>
</td>
<td valign="top" width="114">
<p>A read on blob1 returns “Adios”</p>
</td>
</tr>
</tbody>
</table>
<p>A few things to note here:</p>
<ul>
<li>At Wed, 23 Oct 2013 22:03:00, though transaction 2 has been replicated and blob2 is available for read, the Last Sync time is still “Wed, 23 Oct 2013 21:58:00” since transaction 1 has not been replicated yet. The Last Sync Time is a conservative RPO time and guarantees that all transactions up to that time are available for read access on the secondary across all blobs for the storage account. </li>
<li>At Wed, 23 Oct 2013 22:05:30, only when transaction 1 has been replicated, would the Last Sync Time move to 22:01 (since transaction 2 is already replicated). Read on blob1 would return the contents “Hello” set by transaction 1 since changes related transaction 3 have not yet been replicated. </li>
<li>At Wed, 23 Oct 2013 22:07:00, only when transaction 3 has been replicated, would the Last Sync Time move to 22:04:00 to signify that all changes on blob1 and blob2 would be available for read on secondary. At that point, any read on blob1 will reflect the change in contents to “Adios”. </li>
</ul>
<h5>How to find the Last Sync Time using RA-GRS?</h5>
<p>Starting with REST version <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd894041.aspx" target="_blank">2013-08-15</a>, a new REST API “Get Service Stats” is made available for <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn495326.aspx" target="_blank">Blobs</a>, <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn495325.aspx" target="_blank">Tables</a> and <a href="http://msdn.microsoft.com/en-us/library/windowsazure/dn495327.aspx" target="_blank">Queue</a> services. This API is available only from the secondary endpoint and provides the geo replication stats for the service. The stats includes two pieces of information maintained for each service:</p>
<p>1. The status of geo replication: This can be one of the following three values</p>
<blockquote><p>a. Live: Indicates that geo replication is enabled, active and operational</p>
</blockquote>
<blockquote><p>b. Bootstrap: Indicates the initialization phase of bootstrapping the data from primary to secondary when the storage account is change from LRS to GRS. During this phase, the secondary endpoint may not be available for reads.</p>
</blockquote>
<blockquote><p>c. Unavailable: The system cannot compute the Last Sync Time due to an outage or has not yet computed the Last Sync Time.</p>
</blockquote>
<p>2. Last Sync Time: This indicates the replication lag time for the service which we explained above. This is empty if the status is Bootstrap or Unavailable. When the status is in “Live” state, this is a valid UTC time.</p>
<h5><a name="_Toc374464511"></a>What is the RA-GRS SLA and Pricing?</h5>
<p>The benefit of using RA-GRS is that it provides a higher read availability (99.99+%) for a storage account over GRS (99.9+%). When using RA-GRS the write availability continues to be 99.9+% (same as GRS today) and read availability for RA-GRS is 99.99+%, where the data is expected to be read from secondary if primary is unavailable. In terms of pricing, the capacity (GB) charge is slightly higher for RA-GRS than GRS, whereas the transaction and bandwidth charges are the same for GRS and RA-GRS. See the Windows Azure Storage pricing page <a href="http://www.windowsazure.com/en-us/pricing/details/storage/" target="_blank">here</a> for more details about the SLA and pricing.</p>
<h5><a name="_Toc374464512"></a>Storage Analytics for RA-GRS?<strong></strong></h5>
<p>Windows Azure Storage service provides users with <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-analytics.aspx" target="_blank">storage analytics</a> data that can be utilized to monitor the usage of the storage service. With RA-GRS, storage metrics for transactions made to the secondary endpoint are also made available if metrics are enabled using the primary endpoint using Set Service Properties for Windows Azure <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh452235.aspx" target="_blank">Blob</a>, <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh452240.aspx" target="_blank">Table</a> and <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh452232.aspx" target="_blank">Queue</a>. To keep it simple, the metrics data for the transactions issued against secondary endpoint are made available only on the primary endpoint in the following table names:</p>
<ul>
<li>$MetricsHourSecondaryTransactionsBlob </li>
<li>$MetricsHourSecondaryTransactionsTable </li>
<li>$MetricsHourSecondaryTransactionsQueue </li>
<li>$MetricsMinuteSecondaryTransactionsBlob </li>
<li>$MetricsMinuteSecondaryTransactionsTable </li>
<li>$MetricsMinuteSecondaryTransactionsQueue </li>
</ul>
<p>Metrics for transactions made to primary endpoints are still available at:</p>
<ul>
<li>$MetricsHourPrimaryTransactionsBlob </li>
<li>$MetricsHourPrimaryTransactionsTable </li>
<li>$MetricsHourPrimaryTransactionsQueue </li>
<li>$MetricsMinutePrimaryTransactionsBlob </li>
<li>$MetricsMinutePrimaryTransactionsTable </li>
<li>$MetricsMinutePrimaryTransactionsQueue </li>
</ul>
<p>With the preview release of RA-GRS, logs are not yet made available for transactions against the secondary endpoint. Please refer to <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh343270.aspx" target="_blank">MSDN</a> for details on analytics.</p>
<h5><a name="_Toc374464513"></a>Scenarios</h5>
<p>Read-only access to the secondary enables higher read availability. Applications that require higher availability and can handle eventually consistent reads can issue secondary reads when the primary for a storage account is unavailable.</p>
<h3><a name="_Toc374464514"></a>RA-GRS support in the Storage Client Library</h3>
<p>The <a href="http://www.nuget.org/packages/WindowsAzure.Storage" target="_blank">Storage Client Library 3.0</a> which uses REST version 2013-08-15 provides new capabilities for RA-GRS. It provides the ability to query the Last Sync Time for Blobs, Tables and Queues, and it provides library support for reads to automatically retry the secondary if the request to the primary times out.</p>
<p>1. GetServiceStats API for CloudBlobClient, CloudTableClient and CloudQueueClient: This API allows applications to easily retrieve the replication status and LastSyncTime for each service.</p>
<p>Example:</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: &quot;Courier New&quot;, courier, monospace; width: 100%; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; background-color: rgb(244,244,244)">CloudStorageAccount account = CloudStorageAccount.Parse(cxnString);<br/>CloudTableClient client = account.CreateCloudTableClient();<br/>     <br/><span style="color: rgb(0,128,0)">// Note that Get Service Stats is supported only on secondary endpoint </span><br/>client.LocationMode = LocationMode.SecondaryOnly;<br/>ServiceStats stats = client.GetServiceStats();<br/><span style="color: rgb(0,0,255)">string</span> lastSyncTime = stats.GeoReplication.LastSyncTime.HasValue ? <br/>stats.GeoReplication.LastSyncTime.Value.ToString() : <span style="color: rgb(0,96,128)">&quot;empty&quot;</span>; <br/>Console.WriteLine(<span style="color: rgb(0,96,128)">&quot;Replication status = {0} and LastSyncTime = {1}&quot;</span>, stats.GeoReplication.Status, lastSyncTime);</pre>
</div>
<p>2. LocationMode property: This property allows the secondary endpoint to be used when the primary is not available. The important values for this are:</p>
<blockquote>
<p>a. PrimaryOnly: All read requests should be issued only to the primary endpoint.</p>
</blockquote>
<blockquote>
<p>b. PrimaryThenSecondary: Read requests should first be issued to primary and if it fails with retryable error then subsequent retries will alternate between secondary and primary. If secondary access returns 404 (Not Found) for the object then subsequent retries will remain on primary.</p>
</blockquote>
<blockquote>
<p>c. SecondaryOnly: The read will be issued to the secondary endpoint.</p>
</blockquote>
<p>Note that all LocationMode options except for “SecondaryOnly” will continue to send write requests to just the primary endpoint. Using “SecondaryOnly” option for write requests will throw a StorageException.</p>
<p>This property can be set either on:</p>
<ul>
<li>Cloud[Blob|Table|Queue]Client: The LocationMode option is used for all requests issued using via objects associated with this client. </li>
<li>[Blob|Table|Queue]RequestOptions: The LocationMode option can be overridden at an API level using the same client object. </li>
</ul>
<p>Code Example for using PrimaryThenSecondary for download blob request:</p>
<div id="codeSnippetWrapper">
<p>CloudStorageAccount account = CloudStorageAccount.Parse(cxnString);<br/>
    <br/>CloudBlobClient client = account.CreateCloudBlobClient(); </p>
<p>CloudBlobContainer container = client.GetContainerReference(containerName); </p>
<p>CloudBlockBlob blob = container.GetBlockBlobReference(blobName); </p>
<p><span style="color: rgb(0,128,0)">// Set the location mode for the request using request options. This request will first try</span> </p>
<p><span style="color: rgb(0,128,0)">// to download the blob using primary and if that fails, it will try the secondary location for subsequent retries </span></p>
<p>blob.DownloadToFile( </p>
<p>localFileName, </p>
<p>FileMode.OpenOrCreate, </p>
<p><span style="color: rgb(0,0,255)">null</span> <span style="color: rgb(0,128,0)">/* access condition */</span>, </p>
<p><span style="color: rgb(0,0,255)">new</span> BlobRequestOptions() </p>
<p>{ </p>
<p>LocationMode = LocationMode.PrimaryThenSecondary, </p>
<p>ServerTimeout = TimeSpan.FromMinutes(3) </p>
<p>});</p>
</div>
<p>3. A new retry policy interface IExtendedRetryPolicy has been introduced to allow users to extend retries in which target location for subsequent retries can be changed. This interface provides a new method Evaluate which replaces ShouldRetry. Note that ShouldRetry is still retained in this interface for backward compatibility but is unused.</p>
<p>The Evaluate method allows users to return RetryInfo which contains the location to use on subsequent retry in addition to the RetryInterval.</p>
<p>In this example of retry class implementation, we change the target location to be secondary only on the last attempt.</p>
<div id="codeSnippetWrapper">
<pre id="codeSnippet" style="overflow: visible; font-size: 8pt; font-family: &quot;Courier New&quot;, courier, monospace; width: 100%; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; background-color: rgb(244,244,244)"><span style="color: rgb(0,0,255)">public</span> RetryInfo Evaluate(RetryContext retryContext, OperationContext operationContext)<br/>{<br/>    statusCode = retryContext.LastRequestResult.HttpStatusCode;<br/><br/>    <span style="color: rgb(0,0,255)">if</span> (retryContext.CurrentRetryCount &gt;= <span style="color: rgb(0,0,255)">this</span>.maximumAttempts <br/>        || ((statusCode &gt;= 300 &amp;&amp; statusCode &lt; 500 &amp;&amp; statusCode != 408)<br/>        || statusCode == 501 <span style="color: rgb(0,128,0)">// Not Implemented</span><br/>        || statusCode == 505 <span style="color: rgb(0,128,0)">// Version Not Supported</span><br/>            ))<br/>    {<br/>        <span style="color: rgb(0,128,0)">// do not retry</span><br/>        <span style="color: rgb(0,0,255)">return</span> <span style="color: rgb(0,0,255)">null</span>;<br/>    }<br/><br/>    RetryInfo info = <span style="color: rgb(0,0,255)">new</span> RetryInfo();<br/>    info.RetryInterval = EvaluateBackoffTime();<br/>    <span style="color: rgb(0,0,255)">if</span> (retryContext.CurrentRetryCount == <span style="color: rgb(0,0,255)">this</span>.maximumAttempts - 1)<br/>    {<br/>        <span style="color: rgb(0,128,0)">// retry against secondary</span><br/>        info.TargetLocation = StorageLocation.Secondary;<br/>    }<br/><br/>    <span style="color: rgb(0,0,255)">return</span> info;<br/>}</pre>
</div>
<p>We hope you enjoy this new feature and please provide us feedback using comments on this blogs or via <a href="http://social.msdn.microsoft.com/Forums/windowsazure/en-US/home?forum=windowsazuredata" target="_blank">Azure Storage MSDN forum</a>.</p>
<p>Jai Haridas and Brad Calder</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (5)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1621">
				<div id="div-comment-1621" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Guy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comment-1621">
			February 17, 2014 at 9:30 pm</a>		</div>

		<p>Thanks for the helpful blog.</p>
<p>Regarding &quot;we will first try to restore the data in the primary location&quot;</p>
<p>1. Will affected customers be notified via their subscription contact information?</p>
<p>2. I assume that you will try to that only if you can access all the data in the Primary, that will be copied to the new Stamp on the Primary DC, otherwise you will go with the failover, is that right?</p>
<p>3. What happens if the Primary DC is ok, but there is a problem with the secondary DC?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1611">
				<div id="div-comment-1611" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Jai Haridas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comment-1611">
			February 17, 2014 at 11:05 pm</a>		</div>

		<p>@Guy, </p>
<p> &nbsp; &nbsp; 1. Will affected customers be notified via their subscription contact information?</p>
<p>Yes, you will also be able to see the status in the storage account service management APIs: <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/windowsazure/ee460790.aspx">msdn.microsoft.com/&#8230;/ee460790.aspx</a></p>
<p> &nbsp; &nbsp; 2. I assume that you will try to that only if you can access all the data in the Primary, that will be copied to the new Stamp on the Primary DC,</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;otherwise you will go with the failover, is that right?</p>
<p>It will depend on the issue. &nbsp;The options we have are to failover the primary, or to restore data on the primary from the secondary and our choice would depend on the issue at hand.</p>
<p> &nbsp; &nbsp; 3. What happens if the Primary DC is ok, but there is a problem with the secondary DC?</p>
<p>We would restore the secondary from the healthy primary</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1601">
				<div id="div-comment-1601" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/4d73170cd8b846d4ce6694310c5d87ed?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/4d73170cd8b846d4ce6694310c5d87ed?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">chugene</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comment-1601">
			March 19, 2014 at 10:20 am</a>		</div>

		<p>I have Read Access Geo-Redundant setup. I want to validate the replication/sync. &nbsp;I can&#39;t seem to do it using CloudBerry or Windows Azure Explorer. &nbsp;Am I missing something?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1581">
				<div id="div-comment-1581" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Ram</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comment-1581">
			August 12, 2014 at 11:18 pm</a>		</div>

		<p>Is there a tool to view the secondary storage&#39;s content? VS server explorer enables to set the end point. So one can configure the secondary storage. But it seems not to work as you are able to delete entries and also view metrics which supposed to show only on primary.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-3224">
				<div id="div-comment-3224" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/#comment-3224">
			December 9, 2015 at 11:03 am</a>		</div>

		<p>You mention &quot;After the failover occurs, the location that is accepting traffic is considered the new primary location for the storage account. Once the new primary is up and accepting traffic, we will bootstrap to a new secondary to get the data geo redundant again.&quot;</p>
<p>In that case, how can an application know what location the primary and secondary are at? When we create a Geo-Read storage account the primary and secondary locations are given (primary = &nbsp;US West, secondary = US East for example). When a failover occurs, they are switched. Is there a way to determine what location the new primary is at? I ask this because I&#39;m designing some systems that need to be aware of the location for latency purposes.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F12%2F11%2Fwindows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->