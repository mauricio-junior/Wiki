---
layout: windowsazurestorage
title: Introducing Storage Client Library 2.1 RC for .NET and Windows Phone 8
weight: 3
---

<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-129" class="post-129 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">Introducing Storage Client Library 2.1 RC for .NET and Windows Phone 8</h1>		<div class="rating-wrap">
		<div id="star-rating-129" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="129" data-container="body" data-toggle="tooltip" title="1 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt="avatar of windows-azure-storage" src="https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Windows+Azure+Storage&amp;size=extralarge&amp;version=00000000-0000-0000-0000-000000000000" class="avatar avatar-22 photo" height="22" width="22"/><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="59e1aedafa2d4428b7004b2c2fac4adc" href="https://social.msdn.microsoft.com/profile/Windows+Azure+Storage">Windows Azure Storage</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2013-07-11T21:33:18+00:00">July 11, 2013</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comments">28</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/&quot;, &quot;text&quot;: &quot;Introducing Storage Client Library 2.1 RC for .NET and Windows Phone 8&quot;}" href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/&quot;, &quot;text&quot;: &quot;Introducing Storage Client Library 2.1 RC for .NET and Windows Phone 8&quot;}" href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/windowsazurestorage/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>We are pleased to announce the public availability of 2.1 Release Candidate (RC) build for the storage client library for .NET and Windows Phone 8. The 2.1 release includes expanded feature support, which this blog will detail.</p>
<h4>Why RC?</h4>
<p>We have spent significant effort in releasing the storage clients on a more frequent cadence as well as becoming more responsive to client feedback. As we continue that effort, we wanted to provide an RC of our next release, so that you can provide us feedback that we might be able to address prior to the “official” release. Getting your feedback is the goal of this release candidate, so please let us know what you think.</p>
<h4>What’s New?</h4>
<p>This release includes a number of new features, many of which have come directly from client feedback (so please keep this coming), which are detailed below.</p>
<h5>Async Task Methods</h5>
<p>Each public API now exposes an Async method that returns a task for a given operation. Additionally, these methods support pre-emptive cancellation via an overload which accepts a <i>CancellationToken</i>. If you are running under .NET 4.5, or using the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=29576">Async Targeting Pack for .NET 4.0</a>, you can easily leverage the <a href="http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx">async / await pattern</a> when writing your applications against storage. </p>
<h5>Table IQueryable</h5>
<p>In 2.1 we are adding <i>IQueryable</i> support for the Table Service layer on desktop and phone. This will allow users to construct and execute queries via LINQ similar to WCF Data Services, however this implementation has been specifically optimized for Windows Azure Tables and NoSQL concepts. The snippet below illustrates constructing a query via the new <i>IQueryable</i> implementation:</p>
<p>&#160;</p>
<pre class="code"><p>var query = from ent in currentTable.CreateQuery&lt;CustomerEntity&gt;()</p><blockquote><p>where ent.PartitionKey == “users” &amp;&amp; ent.RowKey = “joe”</p></blockquote><blockquote><p>select ent;</p></blockquote><p>&#160;</p></pre>
<p>&#160;</p>
<p>The <i>IQueryable </i>implementation transparently handles continuations, and has support to add <i>RequestOptions</i>, <i>OperationContext</i>, and client side <i>EntityResolvers</i> directly into the expression tree. To begin using this please add a using to the<i> Microsoft.WindowsAzure.Storage.Table.Queryable </i>namespace and construct a query via the <i>CloudTable.CreateQuery&lt;T&gt;()</i> method. Additionally, since this makes use of existing infrastructure optimization such as <i>IBufferManager</i>, Compiled Serializers, and Logging are fully supported. </p>
<h5>Buffer Pooling</h5>
<p>For high scale applications, Buffer Pooling is a great strategy to allow clients to re-use existing buffers across many operations. In a managed environment such as .NET, this can dramatically reduce the number of cycles spent allocating and subsequently garbage collecting semi-long lived buffers. </p>
<p>To address this scenario each Service Client now exposes a <i>BufferManager</i> property of type <i>IBufferManager</i>. This property will allow clients to leverage a given buffer pool with any associated objects to that service client instance. For example, all <i>CloudTable</i> objects created via <i>CloudTableClient.GetTableReference()</i> would make use of the associated service clients BufferManager. The <i>IBufferManager</i> is patterned after the <a href="http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.buffermanager.aspx">BufferManager</a> in System.ServiceModel.dll to allow desktop clients to easily leverage an existing implementation provided by the framework. (Clients running on other platforms such as WinRT or Windows Phone may implement a pool against the <i>IBufferManager</i> interface) </p>
<h5>Multi-Buffer Memory Stream</h5>
<p>During the course of our performance investigations we have uncovered a few performance issues with the <i>MemoryStream</i> class provided in the BCL (specifically regarding Async operations, dynamic length behavior, and single byte operations). To address these issues we have implemented a new Multi-Buffer memory stream which provides consistent performance even when length of data is unknown. This class leverages the <i>IBufferManager</i> if one is provided by the client to utilize the buffer pool when allocating additional buffers. As a result, any operation on any service that potentially buffers data (Blob Streams, Table Operations, etc.) now consumes less CPU, and optimally uses a shared memory pool.</p>
<h5>.NET MD5 is now default</h5>
<p>Our performance testing highlighted a slight performance degradation when utilizing the FISMA compliant native MD5 implementation compared to the built in .NET implementation. As such, for this release the .NET MD5 is now used by default, any clients requiring FISMA compliance can re-enable it as shown below:</p>
<p>&#160;</p>
<pre class="code"><p>CloudStorageAccount.UseV1MD5 = false;</p></pre>
<p>&#160;</p>
<h5>Client Tracing</h5>
<p>The 2.1 release implements .NET tracing, allowing users to enable log information regarding request execution and REST requests (See below for a table of what information is logged). Additionally, Windows Azure Diagnostics provides a trace listener that can redirect client trace messages to the WADLogsTable if users wish to persist these traces to the cloud. </p>
<p>To enable tracing in .NET you must add a trace source for the storage client to the app.config and set the verbosity</p>
<p>&#160;</p>
<pre class="code"><p>&#160;</p><p>&lt;system.diagnostics&gt;<br/>  &lt;sources&gt;<br/>    &lt;source name=&quot;Microsoft.WindowsAzure.Storage&quot;&gt;<br/>      &lt;listeners&gt;<br/>        &lt;add name=&quot;myListener&quot;/&gt;<br/>      &lt;/listeners&gt;<br/>    &lt;/source&gt;<br/>  &lt;/sources&gt;<br/>  &lt;switches&gt;<br/>    &lt;add name=&quot;Microsoft.WindowsAzure.Storage&quot; value=&quot;Verbose&quot; /&gt;<br/>  &lt;/switches&gt;<br/>…</p></pre>
<p>&#160;</p>
<p>&#160;</p>
<p>The application is now set to log all trace messages created by the storage client up to the Verbose level. However, if a client wishes to enable logging only for specific clients or requests they can further configure the default logging level in their application by setting <i>OperationContext.DefaultLogLevel</i> and then opt-in any specific requests via the OperationContext object:</p>
<p>&#160;</p>
<pre class="code"><p>// Disbable Default Logging<br/>OperationContext.DefaultLogLevel = LogLevel.Off;<p>// Configure a context to track my upload and set logging level to verbose<br/>OperationContext myContext = new OperationContext() { LogLevel = LogLevel.Verbose };<p>blobRef.UploadFromStream(stream, myContext);</p></pre>
<p>&#160;</p>
<h5>New Blob APIs</h5>
<p>In 2.1 we have added Blob Text, File, and Byte Array APIs based on feedback from clients. Additionally, Blob Streams can now be opened, flushed, and committed asynchronously via new Blob Stream APIs.</p>
<h5>New Range Based Overloads</h5>
<p>In 2.1 Blob upload API’s include an overload which allows clients to only upload a given range of the byte array or stream to the blob. This feature allows clients to avoid potentially pre-buffering data prior to uploading it to the storage service. Additionally, there are new download range API’s for both streams and byte arrays that allow efficient fault tolerant range downloads without the need to buffer any data on the client side. </p>
<h5>IgnorePropertyAttribute</h5>
<p>When persisting POCO objects to Windows Azure Tables in some cases clients may wish to omit certain client only properties. In this release we are introducing the <i>IgnorePropertyAttribute</i> to allow clients an easy way to simply ignore a given property during serialization and de-serialization of an entity. The following snippet illustrates how to ignore my FirstName property of my entity via the <i>IgnorePropertyAttribute:</i></p>
<p><em></em></p>
<p>&#160;</p>
<pre class="code"><p>public class Customer : TableEntity<br/>{<br/>   [IgnoreProperty]<br/>   public string FirstName { get; set; }<br/>}</p></pre>
<p>&#160;</p>
<h5>Compiled Serializers</h5>
<p>When working with POCO types previous releases of the SDK relied on reflection to discover all applicable properties for serialization / de-serialization at runtime. This process was both repetitive and expensive computationally. In 2.1 we are introducing support for Compiled Expressions which will allow the client to dynamically generate a LINQ expression at runtime for a given type. This allows the client to do the reflection process once and then compile a lambda at runtime which can now handle all future read and writes of a given entity type. In performance micro-benchmarks this approach is roughly 40x faster than the reflection based approach computationally.</p>
<p>All compiled expressions for read and write are held in a static concurrent dictionaries on <i>TableEntity</i>. If you wish to disable this feature simply set <i>TableEntity.DisableCompiledSerializers</i> = true;</p>
<h5>Easily Serialize 3<sup>rd</sup> Party Objects</h5>
<p>In some cases clients wish to serialize objects in which they do not control the source, for example framework objects or objects form 3<sup>rd</sup> party libraries. In previous releases clients were required to write custom serialization logic for each type they wished to serialize. In the 2.1 release we are exposing the core serialization and de-serialization logic for any CLR type via the static <i>TableEntity.[Read|Write]UserObject</i> methods. This allows clients to easily persist and read back entities objects for types that do not derive from <i>TableEntity</i> or implement the <i>ITableEntity</i> interface. This pattern can also be especially useful when exposing DTO types via a service as the client will longer be required to maintain two entity types and marshal between them. </p>
<h5>Numerous Performance Improvements</h5>
<p>As part of our ongoing focus on performance we have included numerous performance improvements across the APIs including parallel blob upload, table service layer, blob write streams, and more. We will provide more detailed analysis of the performance improvements in an upcoming blog post.</p>
<h5>Windows Phone</h5>
<p>The Windows Phone client is based on the same source code as the desktop client, however there are 2 key differences due to platform limitations. The first is that the Windows Phone library does not expose synchronous methods in order to keep applications fast and fluid. Additionally, the Windows Phone library does not provide MD5 support as the platform does not expose an implementation of MD5. As such, if your scenario requires it, you must validate the MD5 at the application layer. The Windows Phone library is currently in testing and will be published in the coming weeks. Please note that it will only be compatible with Windows Phone 8, not 7.x.</p>
<h4>Summary</h4>
<p>We have spent considerable effort in improving the storage client libraries in this release. We welcome any feedback you may have in the comments section below, the forums, or GitHub. </p>
<p>Joe Giardino</p>
<h4>Resources</h4>
<p><a href="https://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/WAD-B406#fbid=Rou_KM-O_sL">Getting the most out of Windows Azure Storage – TechEd NA ‘13</a></p>
<p><a href="http://www.nuget.org/packages/WindowsAzure.Storage">Nuget</a></p>
<p><a href="https://github.com/WindowsAzure/azure-sdk-for-net/tree/preview">Github</a></p>
<p><a href="https://github.com/WindowsAzure/azure-sdk-for-net/blob/preview/microsoft-azure-api/Services/Storage/changelog.txt">2.1 Complete Changelog</a></p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (28)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-289">
				<div id="div-comment-289" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Luiz Bicalho</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-289">
			July 14, 2013 at 5:03 am</a>		</div>

		<p>Where is the cors support?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-290">
				<div id="div-comment-290" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7baef01f55b96f7ef6e7d2270e0b7ec6?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">jaidevh1@hotmail.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-290">
			July 14, 2013 at 2:44 pm</a>		</div>

		<p>@Luiz,CORS will be released sometime this Fall.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-293">
				<div id="div-comment-293" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Keith Murray</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-293">
			July 26, 2013 at 5:30 pm</a>		</div>

		<p>I get an ArgumentNullException whenever I try to deserialize a 3rd party object with ReadUserObject if that object has something like a List&lt;&gt; in it. It serializes just fine, ignoring the property types that aren&#39;t supported. But you cannot deserialize.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-297">
				<div id="div-comment-297" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Joe Giardino</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-297">
			July 29, 2013 at 10:16 am</a>		</div>

		<p>@ Keith Murray</p>
<p>Thanks for your comment. We have identified this issue and resolved it in the refresh release which will be available later this week. </p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-298">
				<div id="div-comment-298" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Deyan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-298">
			August 7, 2013 at 7:57 am</a>		</div>

		<p>Hi guys,</p>
<p>I&#39;m not able to install the NuGet package for a Windows Phone 8 project. The ConfigurationManager dependency seems incompatible with Windows Phone 8. Here&#39;s the error:</p>
<p>Install-Package : Could not install package &#39;Microsoft.WindowsAzure.ConfigurationManager 2.0.1.0&#39;. You are trying to install this package into a project that targets &#39;WindowsPhone,Version=v8.0&#39;, but the package does not contain any assembly references or </p>
<p>content files that are compatible with that framework. For more information, contact the package author.</p>
<p>At line:1 char:1</p>
<p>+ Install-Package Microsoft.WindowsAzure.ConfigurationManager</p>
<p>+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
<p> &nbsp; &nbsp;+ CategoryInfo &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: NotSpecified: (:) [Install-Package], InvalidOperationException</p>
<p> &nbsp; &nbsp;+ FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand</p>
<p>Any ideas?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-299">
				<div id="div-comment-299" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Amit</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-299">
			August 13, 2013 at 12:09 pm</a>		</div>

		<p>Can I use IQueryable with DynamicTableEntity and complex conditions such as .Where(x =&gt; x.PartitionKey.StartsWith(&quot;something&quot; &amp;&amp; x.SomeProperty.TrimEnd(&#39;;&#39;).EndsWith(&quot;1234&quot;)))</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-300">
				<div id="div-comment-300" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/bc90edf95497aec763f5caa39a97b035?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/bc90edf95497aec763f5caa39a97b035?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">developer@snarkyshark.ca</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-300">
			August 14, 2013 at 7:14 am</a>		</div>

		<p>Since making my last comment, I was able to manually install the component packages from WindowsAzure.Storage, all except for the ConfigurationManager package.</p>
<p>Running these three commands worked for the respective packages&#8230;</p>
<p>Install-Package Microsoft.Data.Edm -Pre (this installed Microsoft.Data.Edm 5.6.0-rc1, and added reference to Microsoft.Data.Edm.Portable)</p>
<p>Install-Package Microsoft.Data.OData -Pre (this installed Microsoft.Data.OData 5.6.0-rc1, and added reference to Microsoft.Data.OData.Portable)</p>
<p>Install-Package System.Spacial -Pre (this installed System.Spatial 5.6.0-rc1, and added reference to System.Spatial.Portable)</p>
<p>Finally, running this command continues to fail&#8230;</p>
<p>Install-Package Microsoft.WindowsAzure.ConfigurationManager -Pre (this attempted to install Microsoft.WindowsAzure.ConfigurationManager 2.0.1.0, but failed with the following error)</p>
<p>Install failed. Rolling back&#8230;</p>
<p>Install-Package : Could not install package &#39;Microsoft.WindowsAzure.ConfigurationManager 2.0.1.0&#39;. You are trying to install this package into a project that targets </p>
<p>&#39;WindowsPhone,Version=v8.0&#39;, but the package does not contain any assembly references or content files that are compatible with that framework. For more information, contact </p>
<p>the package author.</p>
<p>I have also attempted to run the WindowsAzure.Storage install again, which now seems to pass the System.Spatial dependency I was previously getting, but now fails on ConfigurationManager</p>
<p>Install-Package WindowsAzure.Storage -Pre (attempted to install Microsoft.WindowsAzure.ConfigurationManager 1.8.0.0, but failed with the following error)</p>
<p>Install failed. Rolling back&#8230;</p>
<p>Install-Package : Could not install package &#39;Microsoft.WindowsAzure.ConfigurationManager 1.8.0.0&#39;. You are trying to install this package into a project that targets </p>
<p>&#39;WindowsPhone,Version=v8.0&#39;, but the package does not contain any assembly references or content files that are compatible with that framework. For more information, contact </p>
<p>the package author.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-301">
				<div id="div-comment-301" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-301">
			August 14, 2013 at 10:11 am</a>		</div>

		<p>@Deyan / Ryan</p>
<p>I am sorry for the delay in the Windows Phone 8 library. The blog noted it would be published in the coming weeks, but that has been slightly delayed. We are now targeting releasing it as part of the RC refresh for 2.1 in the same package. During this time frame OdataLib has refactored to include a portable library for windows phone so we have decided to move to that and restart testing. (See ODataLib 5.6.0-rc1 on nuget for more details). &nbsp;We will update this blog when the library is available publicly. </p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-302">
				<div id="div-comment-302" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-302">
			August 14, 2013 at 1:39 pm</a>		</div>

		<p>@Amit </p>
<p>Yes you absolutely can do complex queries with DynamicTableQuery, however your example uses a few methods that are not supported such as startswith, trimend, endswith etc. The way to correctly do starts with is to use a lexically bounded query that specifies both upper and lower boundaries. For example I would use PartitionKey gte something &amp;&amp; PartitionKey lt something{ ( note &#39;{&#39; is 1 + &#39;z&#39; in AsciiTable). The way to do these comparisions is via the String.CompareTo method;</p>
<p>Additionally when using a query of DynamicTableEntity type and addressing properties which are not included in ITableEntity (PartitionKey, RowKey,Timestamp)you need to access the property via the dictionary and use the correct typed getter. The library will be able to correctly construct the filter string by analyzing the property name argument used for the dictionary accessor and the type of the getter. &nbsp;For example:</p>
<p>var query = </p>
<p>from ent in table.CreateQuery&lt;DynamicTableEntity&gt;()</p>
<p>where ent.Properties[&quot;customerid&quot;].StringValue == &quot;customer_1&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>select ent;</p>
<p>We have a draft of a more in depth blog that will detail specific examples of the IQueryable optimizations in the library that will be forth coming.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-303">
				<div id="div-comment-303" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Bart Czernicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-303">
			August 16, 2013 at 2:07 pm</a>		</div>

		<p>Are there any plans to introduce batching for Retrieve operations? (that is a big performance win)</p>
<p>Are there plans to introduce/support compression? (especially for moving large amounts of data)</p>
<p>Increasing the batch count would be huge tooo&#8230;at least support up to 4meg.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-307">
				<div id="div-comment-307" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Libin TK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-307">
			August 19, 2013 at 6:01 pm</a>		</div>

		<p>Is there any sample code on how to handle continuations?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-308">
				<div id="div-comment-308" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Johan van Tonder</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-308">
			August 20, 2013 at 6:06 pm</a>		</div>

		<p>Hi. Please see the following Microsoft connect bug report: <a rel="nofollow" target="_new" href="https://connect.microsoft.com/VisualStudio/feedback/details/778518/azure-sdk-compute-emulator-controller-actions-hit-multiple-times-in-asp-net-mvc-4-app#tabs">connect.microsoft.com/&#8230;/azure-sdk-compute-emulator-controller-actions-hit-multiple-times-in-asp-net-mvc-4-app</a></p>
<p>Thanks.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-309">
				<div id="div-comment-309" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/8a0cf1abe9eb316b512b9b8348633534?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/8a0cf1abe9eb316b512b9b8348633534?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">jchiarino@gmail.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-309">
			August 22, 2013 at 7:49 am</a>		</div>

		<p>Hello thanks for the great updates. Here is my feedback:</p>
<p>When you build a query for a partition: PartitionKey=samplePK and a RowKey that starts with a prefix for example “foo-“, you need to combine at least 3 filters using the table query CombineFilters. </p>
<p>It would be nice for LinQ to support this scenario and do something like:</p>
<p>var query = currentTable.CreateQuery&lt;CustomerEntity&gt;().Where(ent =&gt; ent.PartitionKey == “samplePK” &amp;&amp; ent.RowKey.StartsWith(“foo-“));</p>
<p>That for example could yield a query like: RowKey GreaterThanOrEqual “foo-“ and RowKey LessThan “foo.” Note the “.” Which is the lexicographic follower of the “-“</p>
<p>Other thing that I was wondering about is asynchronous operations while using LinQ, Without creating Task.Factory.StartNew</p>
<p>Whats the correct way of doing it?</p>
<p>var tableQuery = query.asTableQuery();</p>
<p>and then await table.ExecuteQueryAsync(tableQuery)</p>
<p>Thanks!</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-310">
				<div id="div-comment-310" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">jgauffin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-310">
			August 25, 2013 at 1:22 pm</a>		</div>

		<p>System.Spatial seems to install OK with version 5.6.0 on WP8. So why are you forcing version 5.2.0 in the RC nugetpackage?</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-311">
				<div id="div-comment-311" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">@Bart</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-311">
			August 26, 2013 at 12:55 pm</a>		</div>

		<p>Nothing has been announced. That being said, the JSON support coming by end of CY13 will dramatically reduce payload sizes to and from the server which will have a dramatic affect on latencies, especially on slower network connections. In some cases payloads are reduced 45%-65% depending on the scenario and if type metadata is returned by the server.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-313">
				<div id="div-comment-313" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">mike wiegand</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-313">
			August 28, 2013 at 8:30 am</a>		</div>

		<p>Can someone provide an scenario when I would use the BufferManager??? I understand the concept, but it seems strange that it is attached to one of the storage client classes. Also, will the JSON bits actually be out this fall???</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-316">
				<div id="div-comment-316" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-316">
			August 28, 2013 at 10:19 am</a>		</div>

		<p>@joeUY</p>
<p>Currently startswith is a feature request we have, but is not supported in this release.</p>
<p>As far as executing queries Async, you need to make use of the ExecuteSegmentedAsync method which will return a TableQuerySegment&lt;T&gt; which contains both the results and a potential continuation token. Note that the IQueryable interface only defines the Execute method by default so if you use any additional LINQ operators you will need to use the AsTableQuery() extension or cast back to TableQuery&lt;T&gt; to access these methods. If you use any of the additional extension methods provided such as WithOptions, WithContext, and Resolve you will not require this step as they perform this cast for you.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-318">
				<div id="div-comment-318" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-318">
			August 28, 2013 at 10:40 am</a>		</div>

		<p>@ Libin </p>
<p>Below is a quick sample that will execute a Query in segmented fashion and aggregate the results in a list. </p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TableQuery&lt;DynamicTableEntity&gt; query = (from ent in testTable.CreateQuery&lt;DynamicTableEntity&gt;()</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;where ent.PartitionKey == partitionKey</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;select ent).AsTableQuery();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TableContinuationToken continuationToken = null;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;List&lt;DynamicTableEntity&gt; entities = new List&lt;DynamicTableEntity&gt;();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;do</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TableQuerySegment&lt;DynamicTableEntity&gt; segment = await query.ExecuteSegmentedAsync(continuationToken);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;continuationToken = segment.ContinuationToken;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;entities.AddRange(segment.Results);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while (continuationToken != null);</p>
<p>Hope this helps. Note that you may also specify a maxresults in the ExecuteSegmented method to use smaller pages depending on your scenario.</p>
<p>joe</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-319">
				<div id="div-comment-319" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-319">
			August 28, 2013 at 10:42 am</a>		</div>

		<p>@ jgauffin</p>
<p>2.1 will utilized Odata 5.2 due to constraints in the broader Azure SDK. The next release (2.2) will snap to the latest release in order to support newer features such as JSON etc. For WP specifically the Odata team has moved to shipping a portable library that we have decided to snap to as this will be the supported model going forward. This reset has caused some delays, but we hope to have the CTP of the WP lib our shortly.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-320">
				<div id="div-comment-320" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-320">
			August 28, 2013 at 10:53 am</a>		</div>

		<p>@ mike</p>
<p>The BufferManager is there to provide reuse of buffers across any operations that need to potentially buffer data. For example BlobWriteStream (available calling a Cloud[Block|Page}Blob.OpenWrite method) will pre-buffer one block / page range at a time prior to executing a request to the server. This feature also helps support parallelism by allowing N parallel operations happening on pre-buffered chunks of data. In this case the BufferManager can be used to only create / maintain a much smaller number of buffers than simply newing / GC&#39;ing them constantly. </p>
<p>Table requests also require ContentLength to be known, but this is unavailable prior to serialization as we cannot predict the size of the resulting Odata formatted payload. As such this data has to be prebuffered and then sent for all requests. The BufferManager can help in this situation as well. </p>
<p>The reason the IBufferManager is on the Client objects is that the client reference is held by all associated objects (blobs, containers, tables, queues, etc.) and therefore will can be leveraged by a wide number of objects in a convenient and centralized fashion. With the BufferManager in place time in GC is dramatically reduced as not only do we create and GC fewer number of objects, but the buffers themselves are long lived and get promoted to a higher generation causing subsequent GCs to be even quicker.</p>
<p>I would recommend anyone doing heavy Blob Upload or Tables Traffic to enable this feature, but it is optional. Also note, a given BufferManager implementation does not have to guarantee that buffers are Zero&#39;d out, so please take this in consideration when handling sensitive information as pieces of it may be around in memory for some time after the actual request is executed. (If this is a concern you can simply zero out the buffer in the IBufferManager implementation yourself).</p>
<p>joe</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-321">
				<div id="div-comment-321" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/896782bd0864a27cae37eecd5baced85?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/896782bd0864a27cae37eecd5baced85?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">comtechy@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-321">
			September 3, 2013 at 7:54 pm</a>		</div>

		<p>Getting this error. Someone mentioned that &#39;System.Spatial 5.6.0&#39; works with WP8. can you guys fix the package ? </p>
<p>Install-Package : Could not install package &#39;System.Spatial 5.2.0&#39;. You are trying to install this package into a project that targets &#39;WindowsPhone,Version=v8.0&#39;, but the package does not contain any </p>
<p>assembly references or content files that are compatible with that framework. For more information, contact the package author.</p>
<p>At line:1 char:1</p>
<p>+ Install-Package WindowsAzure.Storage -Pre</p>
<p>+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
<p> &nbsp; &nbsp;+ CategoryInfo &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: NotSpecified: (:) [Install-Package], InvalidOperationException</p>
<p> &nbsp; &nbsp;+ FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-331">
				<div id="div-comment-331" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Brenton Unger</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-331">
			September 29, 2013 at 10:20 am</a>		</div>

		<p>Where is the right place to post bugs? </p>
<p>I&#39;m currently experiencing some very peculiar behavior. Over a WiFi network, my Windows Phone 8 app behaves properly. However on my AT&amp;T network, I receive &quot;not found&quot; errors when trying to call the CreateIfNotExistsAsync() method on a CloudQueue instance.</p>
<p>Any help would be greatly appreciated.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-334">
				<div id="div-comment-334" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-334">
			September 30, 2013 at 11:28 am</a>		</div>

		<p>@Brenton</p>
<p>For bug tracking please raise an issue at the GitHub repo : <a rel="nofollow" target="_new" href="https://github.com/WindowsAzure/azure-sdk-for-net/issues">github.com/&#8230;/issues</a></p>
<p>We will look into this issue further and update.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-338">
				<div id="div-comment-338" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/0161f16247523e8d3ac837fef8dddfe5?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/0161f16247523e8d3ac837fef8dddfe5?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">palchris@msn.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-338">
			October 10, 2013 at 12:16 am</a>		</div>

		<p>Hi, all. </p>
<p>Do you have a release date for the next version of the Azure Storage Library? Hopefully this version will fully support Windows Phone 8. For the moment I get the same frustrating package installation errors, as others have mentioned on the comments section, due to incompatible dependencies to the WP8 platform: </p>
<p>Install-Package : Could not install package &#39;System.Spatial 5.2.0&#39;. You are trying to install this package into a project that targets &#39;WindowsPhone,Version=v8.0</p>
<p>Do anyone have any suggestions/ workarounds that can help me until the next version comes around?</p>
<p>Regards Palchris </p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-339">
				<div id="div-comment-339" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/419b33245887eb453bdf6c8715579628?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/419b33245887eb453bdf6c8715579628?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">serdar.ozler@outlook.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-339">
			October 10, 2013 at 11:25 pm</a>		</div>

		<p>@palchris and @ctarmor</p>
<p>Please install the package at <a rel="nofollow" target="_new" href="http://www.nuget.org/packages/WindowsAzure.Storage-Preview">http://www.nuget.org/&#8230;/WindowsAzure.Storage-Preview</a> which can be used in a Windows Phone 8 or a Windows Store app project.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-340">
				<div id="div-comment-340" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">Serdar Ozler [MSFT]: That did the trick!</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-340">
			October 13, 2013 at 1:18 pm</a>		</div>

		<p>Thanks Serdar! The nuget package manager now installed the packages correctly into my wp8 project! </p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-345">
				<div id="div-comment-345" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">IsakAvis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-345">
			October 28, 2013 at 8:41 am</a>		</div>

		<p>Hi Joe I watched your Channel 9 session and thank you for the wonderful session.</p>
<p><a rel="nofollow" target="_new" href="https://channel9.msdn.com/Events/TechEd/Europe/2013/WAD-B406#fbid=KMEGYU9SXjq">channel9.msdn.com/&#8230;/WAD-B406</a></p>
<p>However I could not get the code that you had used during the session on testing the new features.</p>
<p>I searched in code.msdn.microsoft.com and to the best extent searched the web and could not get it.</p>
<p>Can you point us to the location where this could may have been posted.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-346">
				<div id="div-comment-346" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596cd385878c1dc59067dc534e2ab25?s=112&amp;d=mm&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"/>			<cite class="fn">joegiardino@live.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/windowsazurestorage/2013/07/11/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8/#comment-346">
			October 29, 2013 at 1:41 pm</a>		</div>

		<p>@IsakAvis</p>
<p>These samples are now posted @ <a rel="nofollow" target="_new" href="http://code.msdn.microsoft.com/Windows-Azure-Storage-675fe55b">code.msdn.microsoft.com/Windows-Azure-Storage-675fe55b</a>.</p>

		<div class="reply"><a rel="nofollow" class="comment-reply-login" href="https://blogs.msdn.microsoft.com/windowsazurestorage/wp-login.php?redirect_to=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fwindowsazurestorage%2F2013%2F07%2F11%2Fintroducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8%2F">Log in to Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->