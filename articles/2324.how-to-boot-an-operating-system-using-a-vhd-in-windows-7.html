---
layout: default
title: 'How to Boot an Operating System Using a VHD in Windows 7 - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup"><p style="margin:0in 0in 10pt;"><span class="hps"><b><span style="font-family:arial,sans-serif;color:#000000;">Overview ></div><div class="r4 fiji-r4"></div></div></div></div>
<div class="content-fragment page no-wrapper" id="fragment-6615">
<div class="content-fragment-inner fiji-content-fragment-inner"><div class="content-fragment-top fiji-content-fragment-top"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 fiji-r4"></div></div><div class="content-fragment-content">

<div class="full-post-header"></div>
<div class="full-post">
    <h1 class="post-name">How to Boot an Operating System Using a VHD in Windows 7</h1>
    <div class="post-rating"><span id="ctl00_ctl00_content_content_ctl00_w_6615__1d76b5ed_ctl00_ctl01" title="Rated<br />
<br />
</span></b></span><span style="font-family:arial,sans-serif;color:#000000;"><span class="hps">Booting</span> <span class="hps">a</span> <span class="hps">system using</span> <span class="hps">a</span> <span class="hps">VHD</span> <span class="hps">in</span> <span class="hps">Windows</span> <span class="hps">7<br />
<br />
<br />
</span></span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:arial,sans-serif;color:#000000;" class="hps"><b>Concept</b></span><span style="font-family:arial,sans-serif;color:#000000;"> <br />
<br />
<br />
<span class="hps">Our test environment are better now with the new VHD features on</span> <span class="hps">Windows</span> <span class="hps">7 and</span> <span class="hps">Windows</span> <span class="hps">Server</span> <span class="hps">2008 </span><span class="hps">R2</span>. <span class="hps">If you</span> <span class="hps">have </span><span class="hps">a</span> <span class="hps">VHD</span> <span class="hps">(</span>Virtual <span class="hps">Hard</span> <span class="hps">Disk</span>) <span class="hps">with </span><span class="hps">Windows</span> <span class="hps">7</span> <span class="hps">or </span><span class="hps">Windows</span> <span class="hps">Server</span> <span class="hps">2008 </span><span class="hps">R2</span> <span class="hps">is</span> <span class="hps">now</span> <span class="hps">possible to</span> <span class="hps">boot</span> <span class="hps">this </span><span class="hps">VHD</span> <span class="hps">by the</span> <span class="hps">physical </span><span class="hps">system</span>. <span class="hps">For example</span>, <span class="hps">you can</span> <span class="hps">create</span> <span class="hps">a </span><span class="hps">dual</span><span class="atn">-</span>boot <span class="hps">with </span><span class="hps">Windows</span> <span class="hps">7 at</span> <span class="hps">the first</span> <span class="hps">HD</span> <span class="hps">and</span> <span class="hps">Windows</span> <span class="hps">Server</span> <span class="hps">2008 </span><span class="hps">on the</span> <span class="hps">second</span> <span class="hps">HD </span><span class="hps">and vice</span> <span class="hps">versa</span>, <span class="hps">one of which</span> <span class="hps">is</span> <span class="hps">a</span> <span class="hps">physical disk</span> <span class="hps">and the other</span> <span class="hps">is</span> <span class="hps">a</span> <span class="hps">VHD</span>.</span><span style="font-family:arial,sans-serif;color:#000000;"> <br />
<br />
<br />
<br />
<span class="hps">In this</span> <span class="hps">article</span> <span class="hps">you will</span> <span class="hps">see</span> <span class="hps">how to</span> <span class="hps">boot</span> <span class="hps">a</span> <span class="hps">system with&nbsp;</span><span class="hps">a</span> <span class="hps">Windows</span> <span class="hps">7 </span><span class="hps">VHD</span>. <br />
<br />
<br />
<br />
<span class="hps"><b>Procedure for</b></span><b> <span class="hps">creating</span> <span class="hps">a</span> <span class="hps">dual</span>-boot <span class="hps">a VHD</span></b> <br />
<br />
<br />
<br />
<span class="hps">1</span> <span class="hps">-</span> <span class="hps">To</span> <span class="hps">begin</span> <span class="hps">you must have</span> <span class="hps">a </span><span class="hps">VHD</span> <span class="hps">with</span> <span class="hps">a </span><span class="hps">system</span> <span class="hps">like</span> <span class="hps">Windows </span><span class="hps">Vista</span>, <span class="hps">Windows</span> <span class="hps">7, </span><span class="hps">Windows</span> <span class="hps">Server</span> <span class="hps">2008 </span><span class="hps">or</span> <span class="hps">Windows</span> <span class="hps">Server </span><span class="hps">2008</span> <span class="hps">R2</span>. <span class="hps">The file </span><span class="hps">can</span> <span class="hps">be</span> <span class="hps">on</span> <span class="hps">any</span> <span class="hps">disk volume</span>. <span class="hps">You </span><span class="hps">can</span> <span class="hps">use</span> <span class="hps">Virtual </span><span class="hps">PC</span>, Virtual <span class="hps">Server</span> <span class="hps">or</span> <span class="hps">Hyper</span><span class="atn">-</span>V <span class="hps">to</span> <span class="hps">create</span> <span class="hps">the</span> <span class="hps">VHD</span> <span class="hps">to</span> <span class="hps">a</span> <span class="hps">virtual</span> <span class="hps">system</span>. <br />
<br />
<br />
<br />
<br />
<br />
</span><img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/0257.ArtigoMS_5F00_3-_2800_2_2900_.bmp" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"> <br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">1</span> <span class="hps">&ndash;</span> VHD <span class="hps">File with an </span>operating <span class="hps">system</span> <span class="hps">installed <br />
<br />
<br />
<br />
</span></span><span style="font-family:arial,sans-serif;color:#000000;"><span class="hps">2</span> <span class="hps">-</span> <span class="hps">After</span> <span class="hps">you copy</span> <span class="hps">or</span> <span class="hps">create </span><span class="hps">the</span> <span class="hps">virtual disk</span>, click <b>on <span class="hps">Start</span>&gt; <span class="hps">All Programs</span>&gt; <span class="hps">Accessories</span></b><span class="hps"> and</span> <span class="hps">then</span> <span class="hps">right</span>-click <span class="hps"><b>Command</b></span><b> <span class="hps">Prompt</span></b>, and <span class="hps">then click</span> <span class="hps"><b>Run as</b></span><b> A<span class="hps">dministrator</span></b><span class="hps">.</span></span> <br />
<br />
<br />
<br />
<img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/8508.Artigoms_5F00_1.1.jpg" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"><br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">2</span> <span class="hps">-</span> <span class="hps">Opening</span> <span class="hps">a</span> <span class="hps">command</span> <span class="hps">prompt </span><span class="hps">as</span> <span class="hps">administrator</span> <br />
<br />
<br />
<br />
<span class="hps">3</span> <span class="hps">-</span> <span class="hps">We need to create</span> <span class="hps">a</span> <span class="hps">new</span> <span class="hps">boot</span> <span class="hps">command line</span> <span class="hps">with </span><span class="hps">the</span> </span></b><span class="hps">.</sspan class="hps">bcdedit</span> <span class="hps">(</span>old <span class="hps">method</span> <span class="hps">used in Windows</span> <span class="hps">2000</span> <span class="hps">and</span> <span class="hps">2003</span> <span class="hps">by the</span> <span class="hps">boot.ini</span>). <span class="hps">Enter </span><span class="hps">the command</span> </span><span class="hps"><b><i><span style="font-family:arial,sans-serif;">bcdedit /copy {current} /d &ldquo;Windows Server Core 2008 R2&rdquo;.</span></i></b></span><b><i> </i></b><span style="font-family:arial,sans-serif;color:#000000;">&nbsp;<span class="hps">The name</span> <span class="hps">in double quotes</span> <span class="hps">will</span> <span class="hps">appear</span> <span class="hps">in the </span><span class="hps">boot options</span>.</span> <br />
<br />
<br />
<br />
<br />
<br />
<img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/0882.Artigoms_5F00_1.2.jpg" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"> <br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">3</span> <span class="hps">-</span> <span class="hps">Command</span> <span class="hps">to</span> <span class="hps">create</span> <span class="hps">a</span> <span class="hps">new entry</span> <span class="hps">in the</span> <span class="hps">boot </span><span class="hps">of Windows</span> <span class="hps">7</span></span><span style="font-family:arial,sans-serif;color:#000000;"> <br />
<br />
<br />
<br />
<span class="hps">4</span> <span class="hps">-</span> <span class="hps">After</span> <span class="hps">you run the</span> <span class="hps">above command</span> <span class="hps">is generated</span> <span class="hps">identification number</span> &ldquo;The <span class="hps">entry</span> <span class="hps">was</span> <span class="hps">successfully </span><span class="hps">copied</span> <span class="hps">to</span> <span class="hps">{</span>880c5d1f<span class="atn">-</span>3b47<span class="atn">-</span>9d7f<span class="atn">-</span>11from<span class="atn">-</span>001636ead0ad} &quot;. <span class="hps">Copy</span> <span class="hps">this</span> <span class="hps">ID</span>, <span class="hps">because </span><span class="hps">it will be used</span> <span class="hps">in the next</span> <span class="hps">commands</span>. <br />
<br />
<br />
<br />
<span class="hps">5</span> <span class="hps">-</span> <span class="hps">After</span> <span class="hps">the</span> <span class="hps">ID</span> <span class="hps">is generated</span>, <span class="hps">execute the following commands</span> to <span class="hps">add </span>the <span class="hps">VHD</span> <span class="hps">at</span> <span class="hps">system boot</span>: <br />
<br />
<br />
<br />
</span><span class="hps"><b><i><span style="font-family:arial,sans-serif;">Bcdedit /set &ldquo;id&rdquo; device vhd=[volumeletter]\file.vhd</span></i></b></span></p>
<p style="margin:0in 0in 10pt;"><span class="hps"><b><i><span style="font-family:arial,sans-serif;">Bcdedit /set &ldquo;id&rdquo; device vhd=[ volumeletter]\file.vhd</span></i></b></span></p>
<p style="margin:0in 0in 10pt;"><span class="hps"><b><i><span style="font-family:arial,sans-serif;">bcdedit /set &ldquo;id&rdquo; detecthal on</span></i></b></span><span style="font-family:arial,sans-serif;color:#000000;"> <br />
<br />
<br />
<br />
<span class="hps">NOTE</span>: <span class="hps">Where</span> <span class="hps">&quot;</span>id&quot; <span class="hps">is</span> <span class="hps">the string</span> <span class="hps">generated </span><span class="hps">in</span> <span class="hps">step</span> <span class="hps">3</span> <span class="hps">of the</span> <span class="hps">command</span> <span class="hps">without </span><span class="hps">the</span> <span class="hps">quotes</span> <span class="hps">and </span></span><span class="hps"><b><i><span style="font-family:arial,sans-serif;">volumeletter</span></i></b></span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">is the</span> <span class="hps">drive where</span> <span class="hps">the file</span> <span class="hps">is</span>.</span></p>
<p style="margin:0in 0in 10pt;">&nbsp;<img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/6253.Artigoms_5F00_1.3.jpg" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"> <br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">4</span> <span class="hps">- Example</span> <span class="hps">of</span> <span class="hps">command</span> <span class="hps">bcdedit </span><br />
<br />
<br />
<br />
<span class="hps">6</span> <span class="hps">-</span> <span class="hps">To</span> <span class="hps">view the</span> <span class="hps">boot</span> <span class="hps">options</span>, run <span class="hps">the</span> <span class="hps">command</span> <strong><span class="hps">bcdedit </span><span class="hps">/ v</span></strong> <br />
<br />
<br />
<br />
<span class="hps">7</span> <span class="hps">-</span> <span class="hps">Then</span> <span class="hps">just</span> <span class="hps">restart</span> <span class="hps">the </span><span class="hps">computer and check that the</span> <span class="hps">boot option </span><span class="hps">is already</span> <span class="hps">available</span>.</span> <br />
<br />
<br />
<br />
<img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/0574.Boot.jpg" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"> <br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">5</span> <span class="hps">-</span> <span class="hps">Boot option<br />
<br />
</span><br />
<br />
<span class="hps">8</span> <span class="hps">-</span> <span class="hps">If</span> <span class="hps">you need</span> <span class="hps">to remove</span> <span class="hps">the </span><span class="hps">entry described</span> <span class="hps">above you</span> <span class="hps">just have to</span> <span class="hps">run</span> <span class="hps">the following</span> <span class="hps">command</span>:</span><span class="hps"><b><i><span style="font-family:arial,sans-serif;"> <br />
<br />
<br />
<br />
bcdedit /delete &ldquo;id&rdquo; /cleanup </span></i></b></span><br />
<br />
<br />
<br />
<img alt=" " style="border:0px solid;" src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/75206.Artigoms_5F00_1.4.jpg" /><span style="font-family:arial,sans-serif;color:#000000;" class="hps"><br />
<br />
Figure</span><span style="font-family:arial,sans-serif;color:#000000;"> <span class="hps">6</span> <span class="hps">-</span> <span class="hps">Removing</span> <span class="hps">the option</span> <span class="hps">from</span> <span class="hps">the </span><span class="hps">boot</span> through <span class="hps">bcdedit</span> <br />
<br />
<br />
<br />
<br />
<br />
<span class="hps"><b>Conclusion</b></span></span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:arial,sans-serif;color:#000000;"><span class="hps">This</span> <span class="hps">article</span> <span class="hps">discussed </span><span class="hps">the</span> <span class="hps">method</span> <span class="hps">of </span><span class="hps">booting a</span> <span class="hps">physical machine</span> <span class="hps">by</span> <span class="hps">using</span> <span class="hps">a</span> <span class="hps">virtual</span> <span class="hps">disk</span>.</span> <br />
<br />
<br />
<br />
<br />
<br />
<strong><span style="font-family:tahoma,sans-serif;font-size:10pt;">Leandro Carvalho </span></strong><b><span style="font-family:tahoma,sans-serif;font-size:10pt;"><br />
<br />
</span></b><span style="font-family:tahoma,sans-serif;color:#0682eb;font-size:10pt;">MCSA+S+M| MCSE+S | MCTS | MCITP | MCBMSS | MCT | MVP Virtual Machine <br />
<br />
<a href="http://msmvps.com/blogs/msvirtualization" target="_blank"><span style="color:#0682eb;">MSVirtualization</span></a> | <a href="http://leandroesc.wordpress.com/" target="_blank"><span style="color:#0682eb;">Wordpress</span></a> | <a href="http://www.winsec.org/" target="_blank"><span style="color:#0682eb;">Winsec.org</span></a> | <a href="http://www.itcentral.com.br/" target="_blank"><span style="color:#0682eb;">ITCentral</span></a>&nbsp;| <a href="http://www.linhadecodigo.com.br/Colaborador.aspx?id=568" target="_blank"><span style="color:#0682eb;">LinhadeCodigo</span></a> <br />
<br />
<span style="color:#548dd4;">Twitter</span>: <a href="http://twitter.com/leandroeduardo" target="_blank"><span style="color:#0000ff;">LeandroEduardo</span></a></span> <br />
<br />
</p></div>
    
    
