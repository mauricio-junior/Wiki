---
layout: default
title: WCF入门教程 - TechNet文章 - 中国（简体中文） - TechNet Wiki
weight: 3
---

<div class="post-content user-defined-markup">

<p style="margin-bottom:7.5pt;"><a href="http://msdn.microsoft.com/en-us/library/ms734712.aspx">http://msdn.microsoft.com/en-us/library/ms734712.aspx</a></p>
<h1 style="margin:0in 0in 7.5pt;"><a name="本节中包含的主题旨在帮助您快速了解_Windows_Communication_Foundation_WCF_编程体验_这些主题要根据本主题底部的列表中的顺序完成_通过学习本教程_您可以初步了解创建_WCF_服务和客户端应用程序所需的步骤_服务是一种构造_它公开一个或多个终结点_其中每个终结点都公开一项或多项服务操作_服务的终结点指定下列信息_服务所在的位置_一个绑定_其中包含客户端必须与服务进行通信的信息_一个协定_用于定义服务向其客户端提供的功能"></a><a name="本节中包含的主题旨在帮助您快速了解_Windows_Communication_Foundation_WCF_编程体验_这些主题要根据本主题底部的列表中的顺序完成_通过学习本教程_您可以初步了解创建_WCF_服务和客户端应用程序所需的步骤_服务是一种构造_它公开一个或多个终结点_其中每个终结点都公开一项或多项服务操作_服务的终结点指定下列信息_服务所在的位置_一个绑定_其中包含客户端必须与服务进行通信的信息_一个协定_用于定义服务向其客户端提供的功能"></a><a name="本节中包含的主题旨在帮助您快速了解_Windows_Communication_Foundation_WCF_编程体验_这些主题要根据本主题底部的列表中的顺序完成_通过学习本教程_您可以初步了解创建_WCF_服务和客户端应用程序所需的步骤_服务是一种构造_它公开一个或多个终结点_其中每个终结点都公开一项或多项服务操作_服务的终结点指定下列信息_服务所在的位置_一个绑定_其中包含客户端必须与服务进行通信的信息_一个协定_用于定义服务向其客户端提供的功能"></a><span style="font-size:10.5pt;color:black;">本节中包含的主题旨在帮助您快速了解</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">
 Windows Communication Foundation (WCF) </span><span style="font-size:10.5pt;color:black;">编程体验。这些主题要根据本主题底部的列表中的顺序完成。通过学习本教程，您可以初步了解创建</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务和客户端应用程序所需的步骤。服务是一种构造，它公开一个或多个终结点，其中每个终结点都公开一项或多项服务操作。服务的终结点指定下列信息：服务所在的位置；一个绑定，其中包含客户端必须与服务进行通信的信息；一个协定，用于定义服务向其客户端提供的功能。</span></h1>
<p style="margin-top:0in;"><span style="font-size:10.5pt;color:black;">在完成本教程中的系列主题之后，您将会得到一个正在运行的服务，以及一个可以调用该服务的操作的客户端。前三个主题描述如何使用协定定义服务，如何实现服务，以及如何在代码中配置服务、承载服务和运行服务。所创建的服务是自承载服务，客户端和服务都在同一计算机上运行。服务使用代码而非配置进行配置。另外还可以将服务承载于</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">
 Internet </span><span style="font-size:10.5pt;color:black;">信息服务</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> (IIS)
</span><span style="font-size:10.5pt;color:black;">下。有关如何执行此操作的更多信息，请参见</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">“</span><span style="font-size:10.5pt;color:black;">如何：</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms733766.aspx"><span style="color:#960bb4;">如何：在</span><span style="color:#960bb4;">
 IIS </span><span style="color:#960bb4;">中承载</span><span style="color:#960bb4;"> WCF
</span><span style="color:#960bb4;">服务</span></a>”</span><span style="font-size:10.5pt;color:black;">。也可以在配置文件中配置服务。有关使用配置文件的更多信息，请参见</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms733932.aspx"><span style="color:#960bb4;">使用配置文件配置服务</span></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p style="margin-top:0in;"><span style="font-size:10.5pt;color:black;">后三个主题描述如何创建客户端代理，如何配置客户端应用程序，以及如何创建和使用可以访问服务功能的客户端。服务会发布可以访问的元数据，这些数据定义了客户端应用程序与服务操作进行通信所需的构造。</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">WCF
</span><span style="font-size:10.5pt;color:black;">提供了一个</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span> <span style="color:#960bb4;">
(Svcutil.exe)</span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;color:black;">来自动cn/library/ms7完成以下过程：访问发布的这些元数据，然后使用这些元数据来构造和配置服务的客户端应用程序。</span>
</p>
<p style="margin-top:0in;"><span style="font-size:10.5pt;color:black;">本节中的所有主题均假定您使用</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> Visual Studio 2010
</span><span style="font-size:10.5pt;color:black;">作为开发环境。如果您使用的是其他开发环境，请忽略特定于</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> Visual Studio
</span><span style="font-size:10.5pt;color:black;">的说明。</span> </p>
<table border="1" cellspacing="0" cellpadding="0" width="745" style="border:none;width:558.75pt;border-collapse:collapse;">
<tbody>
<tr style="height:15.75pt;">
<td valign="top" style="border:none;background-color:#fcfec5;padding:7.5pt 8.25pt 0.75pt;height:15.75pt;">
<p><strong><span style="font-size:13pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><img width="1" height="1" alt="Description: ms734712.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></span></strong><strong><span style="font-size:13pt;line-height:115%;color:black;">注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td valign="top" style="border:1pt solid #bbbbbb;background-color:#fcfec5;padding:0.75pt 8.25pt 7.5pt;">
<p style="margin:0.75pt;line-height:14.25pt;"><span>如果运行的是</span> Windows Vista<span>，则必须通过转到</span><span style="font-family:&#39;times new roman&#39;,serif;">“</span><span>开始</span><span style="font-family:&#39;times new roman&#39;,serif;">”</span><span>菜单，然后右击</span>
 Visual Studio 2010 <span>并选择</span><strong><span style="font-family:calibri,sans-serif;">“</span></strong><strong><span>以管理员身份运行</span>”</strong><span>来启动</span> Visual
 Studio<span>。若要始终以管理员身份启动</span> Visual Studio 2010<span>，可以创建一个快捷方式，右击该快捷方式，选择属性，选择</span><span style="font-family:&#39;times new roman&#39;,serif;">“</span><span>兼容性</span><span style="font-family:&#39;times new roman&#39;,serif;">”</span><span>选项卡，然后选中</span><strong><span style="font-family:calibri,sans-serif;">“</span></strong><strong><span>请以管理员身份运行该程序</span>”</strong><span>复选框。当您使用此快捷方式启动</span>
 Visual Studio 2010 <span>时，它将始终以管理员身份运行。</span> </p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-size:10.5pt;color:black;">有关可以下载到硬盘中并运行的示例应用程序，请参见</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/ms751514.aspx"><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">Windows
 Communication Foundation Samples</span></a><span style="font-size:10.5pt;color:black;">中的主题。有关专门针对本主题的示例，请参见</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms751519.aspx"><span style="color:#960bb4;">入门示例</span></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p style="margin-top:0in;"><span style="font-size:10.5pt;color:black;">有关创建服务和客户端的更深入信息，请参见</span><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms731067.aspx"><span style="color:#960bb4;">基本</span><span style="color:#960bb4;">
 WCF </span><span style="color:#960bb4;">编程</span></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h2><a name="本节内_容"></a><a name="本节内_容"></a><a name="本节内_容"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">本节内</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">容</span>
</h2>
<p><a href="http://msdn.microsoft.com/zh-cn/library/ms731835.aspx"><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">如何：定义</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">服务协定</span></a>
</p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何使用用户定义的接口创建</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;line-height:115%;color:black;">协定。协定用于定义服务向外界提供的功能，并向外界的潜在用户描述如何与服务进行通信</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><a href="http://msdn.microsoft.com/zh-cn/library/ms734686.aspx"><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">如何：实现</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">服务协定</span></a>
</p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何实现服务协定。创建了协定后，必须在一个从定义协定的接口继承的类中实现服务所提供的功能</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><a href="http://msdn.microsoft.com/zh-cn/library/ms730935.aspx"><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">如何：承载和运行基本的</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">服务</span></a>
</p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何在代码中配置服务的终结点，以及如何在控制台应用程序内承载服务和启动服务。若要激活服务，必须在运行时环境中配置和承载服务。此环境将创建服务并控制其上下文和生存期</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms733133.aspx"><span style="color:#960bb4;">如何：创建</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span></a></span></p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何从</span><snt-size:10.5pt;line-height:115%;color:#960bb4;">如何：承载和运行基本的</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">服务</span></a>
</p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何在代码中配置服务的终结点，以及如何在控制台应用程序内承载服务和启动服务。若要激活服务，必须在运行时环境中配置和承载服务。此环境将创建服务并控制其上下文和生存期</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms733133.aspx"><span style="color:#960bb4;">如何：创建</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span></a></span></p>
<p style="margin-left:0pan style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;line-height:115%;color:black;">服务检索用于创建</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;line-height:115%;color:black;">客户端的元数据。此过程使用由</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;line-height:115%;color:black;">提供的</span><span class="apple-converted-space" style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)</span></a></span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><a href="http://msdn.microsoft.com/zh-cn/library/ms734663.aspx"><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">如何：配置基本</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;line-height:115%;color:#960bb4;">客户端</span></a>
</p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何配置使用</span><span class="apple-converted-space" style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)</span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;line-height:115%;color:black;">创建的基本客户端。配置客户端需要指定客户端用于访问服务的终结点</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<p><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms730144.aspx"><span style="color:#960bb4;">如何：使用</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span></a></span></p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;line-height:115%;color:black;">描述如何使用</span><span class="apple-converted-space" style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)</span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;line-height:115%;color:black;">生成的</span><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">
 WCF </span><span style="font-size:10.5pt;line-height:115%;color:black;">客户端代理来调用服务所提供的功能</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span>
</p>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_定义_Windows_Communication_Foundation_服务协定"></a><a name="如何_定义_Windows_Communication_Foundation_服务协定"></a><a name="如何_定义_Windows_Communication_Foundation_服务协定"></a><span style="font-size:19pt;color:black;">如何：定义</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">服务协定</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的第一项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务时，第一项任务是定义协定。协定指定服务支持的操作。可以将操作视为一个</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Web
</span><span style="font-size:10.5pt;color:black;">服务方法。通过定义</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> C&#43;&#43;</span><span style="font-size:10.5pt;color:black;">、</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">C#
</span><span style="font-size:10.5pt;color:black;">或</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Visual Basic (VB)
</span><span style="font-size:10.5pt;color:black;">接口可创建协定。接口中的每个方法都对应于特定的服务操作。每个接口都必须将</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/system.servicemodel.servicecontractattribute.aspx"><span style="color:#960bb4;">ServiceContractAttribute<sup>2</sup></span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;color:black;">应用于自身，而每个操作都必须将</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/system.servicemodel.operationcontractattribute.aspx"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">OperationContractAttribute<sup>3</sup></span></a><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">应用于自身。如果接口中的一个方法具有</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">ServiceContractAttribute</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">而没有</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">OperationContractAttribute</span></strong><span style="font-size:10.5pt;color:black;">，则不公开该方法。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在操作过程后面的示例中提供了用于此任务的代码。</span>
</p>
<h2><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">使用接口创建</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Windows Communication Foundation </span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">协</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">定</span>
</h2>
<ol>
<li>通过在“开始”菜单中右击“Visual Studio 2010”并选择“以管理员身份运行”，以管理员身份打开该程序。 </li><li>创建新的控制台应用程序项目。单击“文件”菜单，选择“新建”，然后选择“项目”。在“新��项目”对话框中，选择“Visual Basic”或“Visual C#”，选择“控制台应an><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">OperationContractAttribute</span></strong><span style="font-size:10.5pt;color:black;">，则不公开该方法。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在操作过程后面的示例中提供了用于此任务的代码。</span>
</p>
<h2><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><a name="使用接口创建_Windows_Communication_Foundation_协_定"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">使用接口创建</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Windows Communication Foundation </span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">协</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">定</span>
</h2用程序”模板，然后将其命名为&nbsp;Service。使用默认的“位置”。
</li><li>对于 C# 项目，Visual Studio 会创建名为 Program.cs 的文件。此类会包含名为 Main() 的空方法。对于 VB 项目，Visual Studio 会创建名为 Module1.vb 的文件，其中包含名为 Main() 的空子例程。控制台应用程序项目需要这些方法才能正确生成，因此您可以放心地将这些方法保留在项目中。
</li><li>将默认的&nbsp;Service&nbsp;命名空间更改为&nbsp;Microsoft.ServiceModel.Samples。为此，请在“解决方案资源管理器”中，右击项目，并选择“属性”。确保选择了“属性”对话框左侧的“应用程序”选项卡。对于 C# 项目，在标有“默认命名空间”的编辑框中键入&nbsp;Microsoft.ServiceModel.Samples。对于 VB 项目，在标有“根命名空间”的编辑框中键入Microsoft.ServiceModel.Samples。单击“文件”菜单，然后选择“全部保存”以保存更改。
</li><li>如果使用 C#，请在生成的 Program.cs 文件中将命名空间更改为&nbsp;Microsoft.ServiceModel.Samples，如下面的示例所示。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">namespace</span><span style="font-family:consolas;color:black;"> Microsoft.ServiceModel.Samples </span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> Program</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">static</span> <span style="font-family:consolas;color:blue;">void</span><span style="font-family:consolas;color:black;"> Main(</span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;">[] args)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;color:black;">如果使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> VB</span><span style="font-size:10.5pt;color:black;">，请将</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">
 Namespace </span><span style="font-size:10.5pt;color:black;">语句和</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> End Namespace
</span><span style="font-size:10.5pt;color:black;">语句添加到生成的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Module1.vb
</span><span style="font-size:10.5pt;color:black;">中，如下面的示例所示。</span>
</p>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">VB</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">Namespace</span><span style="font-family:consolas;color:black;"> Microsoft.ServiceModel.Samples</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">Module</span><span style="font-family:consolas;color:black;"> Module1</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">Sub</span><span style="font-family:consolas;color:black;"> Main()</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">End</span> <span style="font-family:consolas;color:blue;">Sub</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">End</span> <span style="font-family:consolas;color:blue;">Module</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">End</span> <span style="font-family:consolas;color:blue;">Namespace</span> </pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>将对&nbsp;System.ServiceModel.dll&nbsp;的引用添加到项目： </li></ol>
<ol style="list-style-type:decimal;">
<ol style="list-style-type:lower-alpha;">
<li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">解决方案资源管理器</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">中，右击项目文件夹下的</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">文件夹，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">对话框中选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“.NET”</span></strong><span style="font-size:10.5pt;">选项卡，向下滚动屏幕，rif;">“</span></strong><strong><span style="font-size:10.5pt;">引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">文件夹，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5p看到</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“System.ServiceModel”</span></strong><span style="font-size:10.5pt;">（版本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;">
 4.0.0.0</span><span style="font-size:10.5pt;">）后，将其选中，然后单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">确定</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li></ol>
</ol>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;margin-left:0.5in;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms731835.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>在使用命令行编译器（例如</span> Csc.exe <span>
或</span> Vbc.exe<span>）时，还必须提供程序集的路径。例如，默认情况下，在运行</span> Windows Vista
<span>的计算机上，路径为：</span><span style="font-family:&#39;times new roman&#39;,serif;">“</span>Windows\Microsoft.NET\Framework\v4.0”<span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<ol>
<li>为&nbsp;System.ServiceModel&nbsp;命名空间添加一个&nbsp;using&nbsp;语句（在 Visual Basic 中为&nbsp;Imports）。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>定义一个名为&nbsp;ICalculator&nbsp;的新接口，并向该接口应用&nbsp;Namespace4&nbsp;&amp;#20540;为“http://Microsoft.ServiceModel.Samples”的&nbsp;ServiceContractAttribute&nbsp;特性。显式指定命名空间是一种最佳做法，因为这样可防止将默认命名空间&amp;#20540;添加到协定名称。
</li></ol>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;margin-left:0.5in;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms731835.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>使用特性给接口或类添加批注时，可以从特性名称中去掉</span><span style="font-family:&#39;times new roman&#39;,serif;">“</span>Attribute<span style="font-family:&#39;times new roman&#39;,serif;">”</span><span>部分。因此</span><span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:calibri,sans-serif;">ServiceContractAttribute</span></strong><span class="apple-converted-space">&nbsp;</span><span>在</span>
 C# <span>中为</span><span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:calibri,sans-serif;">[ServiceContract]</span></strong><span>，在</span> Visual Basic
<span>中为</span><span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:calibri,sans-serif;">&lt;ServiceContract&gt;</span></strong><span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<ol style="list-style-type:decimal;">
<li style="color:black;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;font-family:&#39;segoe ui&#39;,sans-serif;">C#</span></strong>
</li></ol>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">10. </span><span style="font-family:consolas;color:black;">[ServiceContract(Namespace = </span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">11. </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculator</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">12. </span> </pre>
<p style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">13.
</span><span style="font-size:10.5pt;color:black;">在接口中为</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">ICalculator</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">协定公开的每个操作（加、减、乘和除）声明一个方法，并对希望作为公共</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">
 WCF </span><span style="font-size:10.5pt;color:black;">协定的一部分公开的每个方法应用</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">OperationContractAttribute</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">特性。</span>
</p>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">[OperationContract]</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">[OperationContract]</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">[OperationContract]</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">[OperationContract]</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">下面的代码示例演示一个定义服务协定的基本接口。</span>
</p>
<p style="background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System;</span></pre>
<pre><span style="font-family:consolas;color:green;">// Step 5: Add the using statement for the System.ServiceModel namespace</span> </pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529ctyle="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<pre><span style="font-family:consolas;color:blue;">namespace</span><span style="font-family:consolas;color:black;"> Microsoft.ServiceModel.Samples</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; </span><span style="font-family:consolas;color:green;">// Step 6: Define a service contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; [ServiceContract(Namespace = </span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step7: Create the method declaration for the contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<p><span style="font-size:10.5pt;color:black;">现在已创建接口，继续按照</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734686.aspx"><span style="color:#960bb4;">如何：实现</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">服务协定</span><sup><span style="color:#960bb4;">5</span></sup></a></span><span style="font-size:10.5pt;color:black;">中的说明实现该接口。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">6</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<span style="font-size:11pt;line-height:115%;font-family:calibri,sans-serif;"><br clear="all" />
</span>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_实现_Windows_Communication_Foundation_服务协定"></a><a name="如何_实现_Windows_Communication_Foundation_服务协定"></a><a name="如何_实现_Windows_Communication_Foundation_服务协定"></a><span style="font-size:19pt;color:black;">如何：实现</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">服务协定</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的第二项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务要求首先创建使用接口定义的协定。有关创建该接口的更多信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms731835.aspx"><span style="color:#960bb4;">如何：定义</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">服务协定</span><sup><span style="color:#960bb4;">2</span></sup></a></span><span style="font-size:10.5pt;color:black;">。本示例中显示的下一步骤是实现接口。这涉及到创建一个名为</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdanaspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务要求首先创建使用接口定义的协定。有关创建该接口的更多信息，请参见</span><span style="font-size:10.5pt;font-family:,sans-serif;color:black;">CalculatorService</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">的类，该类实现用户定义的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">ICalculator</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">接口。在操作过程后面的示例中提供了用于此任务的代码。</span>
</p>
<h2><a name="实现_WCF_服务协_定"></a><a name="实现_WCF_服务协_定"></a><a name="实现_WCF_服务协_定"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">实现</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;"> WCF
</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">服务协</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">定</span>
</h2>
<ol>
<li>在定义了&nbsp;ICalculator&nbsp;接口的同一文件中创建一个名为&nbsp;CalculatorService&nbsp;的新类。CalculatorService&nbsp;实现&nbsp;ICalculator&nbsp;接口。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> CalculatorService : ICalculator</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>在&nbsp;CalculatorService&nbsp;类中实现在&nbsp;ICalculator&nbsp;接口中定义的每个方法。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 &#43; n2;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Add({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Code added to write output to the console window.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 - n2;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Subtract({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 * n2;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Multiply({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 / n2;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Divide({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-faan><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 / n2;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Divide({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><spamily:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;margin-left:0.5in;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms734686.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>已经添加写入输出代码以方便测试。</span> </p>
</td>
</tr>
</tbody>
</table>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">下面的代码示例演示定义协定的接口和接口的实现。</span>
</p>
<p style="background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:blue;">namespace</span><span style="font-family:consolas;color:black;"> Microsoft.ServiceModel.Samples</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Define a service contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [ServiceContract(Namespace = </span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 1: Create service class that implements the service contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> CalculatorService : ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 2: Implement functionality for the service operations.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 &#43; n2;</span></pre>
<pre><span style="font-familfunctionality for the service operations.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:bluy:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Add({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Code added to write output to the console window.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 - n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Subtract({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 * n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Multiply({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 / n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Divide({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<p><span style="font-size:10.5pt;color:black;">现在已创建并实现了服务协定。生成该解决方案以确保不存在编译错误，然后按照</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms730935.aspx"><span style="color:#960bb4;">如何：承载和运行基本的</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">服务</span><sup><span style="color:#960bb4;">3</span></sup></a></span><span style="font-size:10.5pt;color:black;">中的说明运行服务。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">4</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h2><a name="编译代_码"></a><a name="编译代_码"></a><a name="编译代_码"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">编译代</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">码</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">如果使用的是命令行编译器，则必须引用</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">System.ServiceModel</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">程序集。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">如果使用的是</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Visual Studio</span><span style="font-size:10.5pt;color:black;">，请在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span><span style="font-size:10.5pt;color:black;">生成</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span><span style="font-size:10.5pt;color:black;">菜单上单击</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span><span style="font-size:10.5pt;cle-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">System.ServiceModel</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">程序集。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">如果使用的是</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Visual Studio</span><span style="font-size:10.5pt;color:black;">，请在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span><span style="font-size:10.5pt;color:black;">生成</span><span style="font-size:10.5pt;font-famolor:black;">生成解决方案</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span><span style="font-size:10.5pt;color:black;">（或按</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">
 Ctrl&#43;Shift&#43;B</span><span style="font-size:10.5pt;color:black;">）。</span>
</p>
<span style="font-size:11pt;line-height:115%;font-family:calibri,sans-serif;"><br clear="all" />
</span>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_承载和运行基本的_Windows_Communication_Foundation_服务"></a><a name="如何_承载和运行基本的_Windows_Communication_Foundation_服务"></a><a name="如何_承载和运行基本的_Windows_Communication_Foundation_服务"></a><span style="font-size:19pt;color:black;">如何：承载和运行基本的</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">服务</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的第三项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">本主题描述如何运行基本的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务。此过程包含以下步骤：</span>
</p>
<ul>
<li>为服务创建基址。 </li><li>为服务创建服务主机。 </li><li>启用元数据交换。 </li><li>打开服务主机。 </li></ul>
<p><span style="font-size:10.5pt;color:black;">在过程后面的以下示例中提供了在此任务中编写的代码的完整清单。将下面的代码添加到</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Program</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">类中定义的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Main()</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">方法。此类是在您创建</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Service</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">解决方案时生成的。</span>
</p>
<h2><a name="为服务配置基_址"></a><a name="为服务配置基_址"></a><a name="为服务配置基_址"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">为服务配置基</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">址</span>
</h2>
<ol>
<li>为服务的基址创建&nbsp;Uri2&nbsp;实例。此 URI 指定 HTTP 方案、本地计算机、端口号 8000，以及服务协定中为服务命名空间指定的服务路径 ServiceModelSample/Service。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Uri baseAddress = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> Uri(</span><span style="font-family:consolas;color:#a31515;">&quot;http://localhost:8000/ServiceModelSamples/Service&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<h2><a name="承载服_务"></a><a name="承载服_务"></a><a name="承载服_务"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">承载服</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">务</span>
</h2>
<ol>
<li>导入&nbsp;System.ServiceModel.Description&nbsp;命名空间。这行代码应该与&nbsp;using&nbsp;或&nbsp;imports&nbsp;语句的其余部分一起放置在 Program.cs/Program.vb 文件的顶部。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel.Description;</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>创建一个新的&nbsp;ServiceHost3&nbsp;实例以承载服务。必须指定实现服务协定和基址的类型。对于此示例，基址为http://localhost:8000/ServiceModelSamples/Service，CalculatorService&nbsp;为实现服务协定的类型。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">ServiceHost selfHost = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> ServiceHost(</span><span style="font-family:consolas;color:blue;">typeof</span><span style="font-family:consolas;color:black;">(CalculatorService), baseAddress);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>添加一个捕获&nbsp;CommunicationException4&nbsp;的&nbsp;try-catch&nbsp;语句，并在接下来的三个步骤中将该代码添加到 try 块中。catchviceModel.Description;</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>创建一个新的& 子句应该显示错误信息，然后调用selfHost.Abort()。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">try</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// ...</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">catch</span><span style="font-family:consolas;color:black;"> (CommunicationException ce)</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">{</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;An exception occurred: {0}&quot;</span><span style="font-family:consolas;color:black;">, ce.Message);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; selfHost.Abort();</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">}</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>添加公开服务的终结点。为此，必须指定终结点公开的协议、绑定和终结点的地址。对于此示例，将&nbsp;ICalculator&nbsp;指定为协定，将&nbsp;WSHttpBinding&nbsp;指定为绑定，并将CalculatorService&nbsp;指定为地址。在这里请注意，终结点地址是相对地址。终结点的完整地址是基址和终结点地址的组合。在此例中，完整地址是http://localhost:8000/ServiceModelSamples/Service/CalculatorService。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">selfHost.AddServiceEndpoint(</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">typeof</span><span style="font-family:consolas;color:black;">(ICalculator),</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> WSHttpBinding(),</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:#a31515;">&quot;CalculatorService&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;margin-left:0.5in;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms730935.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>从</span> .NET Framework 4 <span>
开始，如果未显式配置服务的任何终结点，则当打开</span><span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:calibri,sans-serif;">ServiceHost</span></strong><span class="apple-converted-space">&nbsp;</span><span>时，运行时将添加默认终结点。此示例显式添加了一个终结点，以提供如何执行此操作的示例。有关默认终结点、绑定和行为的更多信息，请参见</span><a href="http://msdn.microsoft.com/zh-cn/library/ee358768.aspx"><span style="color:#960bb4;">简化配置</span><sup><span style="color:#960bb4;">5</span></sup></a><span>和</span><span class="apple-converted-space">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/ee530014.aspx"><span style="color:#960bb4;">WCF
</span><span style="color:#960bb4;">服务的简化配置</span><sup><span style="color:#960bb4;">6</span></sup></a><span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<ol>
<li>启用元数据交换。为此，添加服务元数据行为。首先创建一个&nbsp;ServiceMetadataBehavior7&nbsp;实例，将&nbsp;HttpGetEnabled8&nbsp;属性设置为&nbsp;true，然后为服务添加新行为。有关发布元数据时出现的安全问题的更多信息，请参见Security Considerations with Metadata9。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">ServiceMetadataBehavior smb = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> ServiceMetadataBehavior();</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">smb.HttpGetEnabled = </span><span style="font-family:consolas;color:blue;">true</span><span style="font-family:consolas;color:black;">;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">selfHost.Description.Behaviors.Add(smb);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>打开&nbsp;ServiceHost&nbsp;并等待传入消息。用户按 Enter 键时，关闭&nbsp;ServiceHost。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">selfHost.Open();</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;The service is ready.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Press &lt;ENTER&gt; to terminate service.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine();</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.ReadLine();</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Close the ServiceHostBase to shutdown the service.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">selfHost.Close();</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<h2><a name="验证服务是否正常运_行"></a><a name="验证服务是否正常运_行"></a><a name="验证服务是否正常运_行"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">验证服务是否正常运</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">行</span>
</h2>
<ol>
<li>从 Visual Studio 内部运行 service.exe。在 Windows Vista 上运行时，必须使用管理员特权运行服务。由于 Visual Studio 是使用管理员特权运行的，因此 service.exe 也是使用管理员特权运行的。也可以启动新的命令提示，使用管理员特权运行它，并在其中运行 service.exe。
</li><li>打开 Internet Explorer，并浏览到服务的调试页（网址为 http://localhost:8000/ServiceModelSamples/Service）。
</li></ol>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">下面的示例包括本教程中前面步骤的服务协定和实现，并将服务承载于控制台应用程序中。将以下内容编译为可执行文件</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Service.exe</span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在编译代码时，务必引用</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">System.ServiceModel.dll</span></strong><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p style="background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel.Description;</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:blue;">namespace</span><span style="font-family:consolas;color:black;"> Microsoft.ServiceModel.Samples</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Define a service contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; [ServiceContract(Namespace = </span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Service class that implements the service contract.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Added code to write output to the console window.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> CalculatorService : ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 &#43; n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Add({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 - n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Subtract({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 * n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Multiply({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = n1 / n2;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Received Divide({0},{1})&quot;</span><span style="font-family:consolas;color:black;">, n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Return: {0}&quot;</span><span style="font-family:consolas;color:black;">, result);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span><span style="font-family:consolas;color:black;"> result;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> Program</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">static</span> <span style="font-family:consolas;color:blue;">void</span><span style="font-family:consolas;color:black;"> Main(</span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;">[] args)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 1 of the address configuration procedure: Create a URI to serve as the base address.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Uri baseAddress = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> Uri(</span><span style="font-family:consolas;color:#a31515;">&quot;http://localhost:8000/ServiceModelSamples/Service&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 2 of the hosting procedure: Create ServiceHost</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServiceHost selfHost = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> ServiceHost(</span><span style="font-family:consolas;color:blue;">typeof</span><span style="font-family:consolas;color:black;">(CalculatorService), baseAddress);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">try</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre> </pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 3 of the hosting procedure: Add a service endpoint.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selfHost.AddServiceEndpoint(</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">typeof</span><span style="font-family:consolas;color:black;">(ICalculator),</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> WSHttpBinding(),</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;colfamily:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seor:#a31515;">&quot;CalculatorService&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre> </pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 4 of the hosting procedure: Enable metadata exchange.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServiceMetadataBehavior smb = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> ServiceMetadataBehavior();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; smb.HttpGetEnabled = </span><span style="font-family:consolas;color:blue;">true</span><span style="font-family:consolas;color:black;">;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selfHost.Description.Behaviors.Add(smb);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 5 of the hosting procedure: Start (and then stop) the service.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selfHost.Open();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;The service is ready.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Press &lt;ENTER&gt; to terminate service.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.ReadLine();</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Close the ServiceHostBase to shutdown the service.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selfHost.Close();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">catch</span><span style="font-family:consolas;color:black;"> (CommunicationException ce)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;An exception occurred: {0}&quot;</span><span style="font-family:consolas;color:black;">, ce.Message);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selfHost.Abort();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms730935.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>此类服务需要在计算机上注册</span> HTTP <span>
地址以进行侦听的权限。管理员帐户具有此权限，但必须授予非管理员帐户对</span> HTTP <span>
命名空间的权限。有关如何配置命名空间保留的更多信息，请参见</span><a href="http://msdn.microsoft.com/zh-cn/library/ms733768.aspx"><span style="color:#960bb4;">配置</span><span style="color:#960bb4;"> HTTP
</span><span style="color:#960bb4;">和</span><span style="color:#960bb4;"> HTTPS<sup>10</sup></span></a><span>。在</span> Visual Studio
<span>下运行时，必须使用管理员特权运行</span> service.exe<span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-size:10.5pt;color:black;">此时服务正在运行。继续执行</span><a href="http://msdn.microsoft.com/zh-cn/library/ms733133.aspx"><span style="font-size:10.5pt;color:#960bb4;">如何：创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;color:#960bb4;">客户端</span><sup><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">11</span></sup></a><span style="font-size:10.5pt;color:black;">中的步骤。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.micrhref="http://msdn.microsoft.com/zh-cn/library/ms733768.aspx"><span style="color:#960bb4;">配置</span><span style="color:#960bb4;"> HTTP
</span><span style="color:#960bb4;">和</span><span style="color:#960bb4;"> HTTPS<sup>10</sup></span></a><span>。在</span> Visual Studio
<span>下运行时，必须使用管理员特权运行</span> service.exe<span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-size:10.5pt;color:black;">此时服务正在运行。继续执行</span><a href="http://msdn.microsoft.com/zh-cn/library/ms733133.aspx"><span style="font-size:10.5pt;color:#960bb4;">如何：创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 Windows Communication Foundation <osoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">12</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<span style="font-size:11pt;line-height:115%;font-family:calibri,sans-serif;"><br clear="all" />
</span>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_创建_Windows_Communication_Foundation_客户端"></a><a name="如何_创建_Windows_Communication_Foundation_客户端"></a><a name="如何_创建_Windows_Communication_Foundation_客户端"></a><span style="font-size:19pt;color:black;">如何：创建</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">客户端</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的第四项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">本主题描述如何检索</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务中的元数据，以及如何使用这些元数据创建可以访问该服务的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">代理。此任务是通过使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">所提供的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)<sup>2</sup></span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;color:black;">完成的。此工具可以获取服务的元数据，并使用所选语言生成代理的托管源代码文件。除了创建客户端代理外，该工具还会为客户端创建配置文件，以使客户端应用程序能够连接至其某个终结点上的服务。</span>
</p>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms733133.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>可以在</span> Visual Studio 2010 <span>
中向客户端项目添加服务引用，以便在不使用</span><span class="apple-converted-space">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)<sup>2</sup></span></a><span class="apple-converted-space">&nbsp;</span><span>的情况下创建客户端代理。</span>
</p>
</td>
</tr>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="10" height="10" alt="Description: ms733133.Warning(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /><span class="apple-converted-space">&nbsp;</span></strong><strong><span>警告：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>当在</span> Visual Studio 2010 <span>
中从某个类库项目调用</span> WCF <span>服务时，可以使用添加服务引用功能自动生成代理和关联配置文件。该类库项目不会使用配置文件。需要将配置文件复制到包含调用该类库的可执行文件的目录中。</span>
</p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-size:10.5pt;color:black;">客户端应用程序使用生成的代理创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">客户端对象。</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms730144.aspx"><span style="color:#960bb4;">如何：使用</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span><sup><span style="color:#960bb4;">3</span></sup></a></span><span style="font-size:10.5pt;color:black;">中对此过程进行了描述。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在操作过程后面的示例中提供了用于此任务产生的客户端的代码。</span>
</p>
<h2><a name="创建_Windows_Communication_Foundation_客户_端"></a><a name="创建_Windows_Communication_Foundation_客户_端"></a><a name="创建_Windows_Communication_Foundation_客户_端"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">创建</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Windows Communication Foundation </span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">客户</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">端</span>
</h2>
<ol>
<li>通过执行以下步骤，在 Visual Studio 2010 中在当前解决方案中为客户端创建一个新项目： </li><li>为项目添加对&nbsp;System.ServiceModel.dll&nbsp;的引用： </li></ol>
<ol style="list-style-type:decimal;">
<ol style="list-style-type:lower-alpha;">
<li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在包含该服务的同一解决方案中的</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">解决方案资源管理器</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">（位于右上角）中，右击当前解决方案（而不是项目），选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">新项目</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加新项目</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">对话框中，选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Visual
 Basic”</span></strong><span style="font-size:10.5pt;">或</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Visual C#”</span></strong><span style="font-size:10.5pt;">，选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">控制台应用程序</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">模板，然后将其命名为</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">Client</span></strong><span style="font-size:10.5pt;">。使用默认的位置。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">确定</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li></ol>
</ol>
<ol style="list-style-type:decimal;">
<ol style="list-style-type:lower-alpha;">
<li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">rif;">”</span></strong><span style="font-size:10.5pt;">模板，然后将其命名为</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">Client</span></strong><span style="font-size:10.5pt;">。使用默认的位置。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></stron解决方案资源管理器</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">中的</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Client”</span></strong><span style="font-size:10.5pt;">项目下右击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">文件夹，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">添加引用</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“.NET”</span></strong><span style="font-size:10.5pt;">选项卡，从列表框中选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“System.ServiceModel.dll”</span></strong><span style="font-size:10.5pt;">（版本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;">
 4.0.0.0</span><span style="font-size:10.5pt;">），然后单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">确定</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li></ol>
</ol>
<table border="1" cellspacing="0" cellpadding="0" style="border:none;margin-left:0.5in;border-collapse:collapse;">
<tbody>
<tr>
<td style="border:none;padding:7.5pt 8.25pt 8.25pt 0.75pt;">
<p style="text-align:center;"><strong><img width="1" height="1" alt="Description: ms733133.note(zh-cn,VS.100).gif" style="border-width:0px;border-style:solid;" /></strong><strong><span>注意：</span></strong><strong>
</strong></p>
</td>
</tr>
<tr>
<td style="border:1pt solid #bbbbbb;padding:0.75pt 8.25pt 8.25pt 7.5pt;">
<p><span>在使用命令行编译器（例如</span> Csc.exe <span>
或</span> Vbc.exe<span>）时，还必须提供程序集的路径。例如，默认情况下，在运行</span> Windows Vista
<span>的计算机上，路径为：</span>Windows\Microsoft.NET\Framework\v4.0<span>。</span>
</p>
</td>
</tr>
</tbody>
</table>
<ol>
<li>在生成的 Program.cs 或 Program.vb 文件中为&nbsp;System.ServiceModel&nbsp;命名空间添加一个&nbsp;using&nbsp;语句（在 Visual Basic 中为&nbsp;Imports）。
</li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<ol>
<li>在 Visual Studio 中，按 F5 启动在前面的主题中创建的服务。有关更多信息，请参见&nbsp;如何：承载和运行基本的 Windows Communication Foundation 服务4.
</li><li>通过执行以下步骤，使用适当的开关运行ServiceModel 元数据实用工具 (Svcutil.exe)2&nbsp;以创建客户端代码和配置文件： </li></ol>
<ol style="list-style-type:decimal;">
<ol style="list-style-type:lower-alpha;">
<li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">开始</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">菜单上，单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“</span></strong><strong><span style="font-size:10.5pt;">所有程序</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">，然后单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Visual
 Studio 2010”</span></strong><span style="font-size:10.5pt;">。单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Visual Studio
</span></strong><strong><span style="font-size:10.5pt;">工具</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">，然后单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">“Visual
 Studio 2010 </span></strong><strong><span style="font-size:10.5pt;">命令提示</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;">”</span></strong><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">导航到要放置客户端代码的目录。如果使用默认&amp;#20540;创建客户端项目，则该目录为</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;"> C:\Users\&lt;</span><em><span style="font-size:10.5pt;">用户名</span></em><span style="font-size:10.5pt;font-family:verdana,sans-serif;">&gt;\My
 Documents\Visual Studio 10\Projects\Service\Client</span><span style="font-size:10.5pt;">。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">将命令行工具</span><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">ServiceModel
</span><span style="font-size:10.5pt;color:#960bb4;">元数据实用工具</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> (Svcutil.exe)<sup>2</sup></span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span><span style="font-size:10.5pt;">与适当的开关一起使用以创建客户端代码。下面的示例生成服务的代码文件和配置文件。</span>
</li></ol>
</ol>
<p style="margin-left:1in;background-color:white;verticamily:verdana,sans-serif;"> C:\Users\&lt;</span><em><span style="font-size:10.5pt;">用户名</span></em><span style="font-size:10.5pt;font-family:verdana,sans-serif;">&gt;\My
 Documents\Visual Studio 10\Projects\Seral-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:1in;"><span style="font-family:consolas;color:black;">svcutil.exe /language:cs /</span><span style="font-family:consolas;color:blue;">out</span><span style="font-family:consolas;color:black;">:generatedProxy.cs /config:app.config http:</span><span style="font-family:consolas;color:green;">//localhost:8000/ServiceModelSamples/service</span> </pre>
<p style="margin-bottom:12pt;margin-left:1in;"><span style="font-size:10.5pt;line-height:115%;color:black;">默认情况下，将在一个以服务命名的文件（例如，在本示例中将为</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
 CalculatorService.cs </span><span style="font-size:10.5pt;line-height:115%;color:black;">或</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;"> CalculatorService.vb</span><span style="font-size:10.5pt;line-height:115%;color:black;">，其扩展名与编程语言相对应：</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">.vb
</span><span style="font-size:10.5pt;line-height:115%;color:black;">对应于</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;"> Visual Basic</span><span style="font-size:10.5pt;line-height:115%;color:black;">，</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">.cs
</span><span style="font-size:10.5pt;line-height:115%;color:black;">对应于</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;"> C#</span><span style="font-size:10.5pt;line-height:115%;color:black;">）中生成客户端代理代码。</span><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">/out</span></strong><span class="apple-converted-space" style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;line-height:115%;color:black;">开关会将客户端代理文件的名称更改为</span>
<span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
GeneratedProxy.cs</span><span style="font-size:10.5pt;line-height:115%;color:black;">。</span><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">/config</span></strong><span class="apple-converted-space" style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;line-height:115%;color:black;">开关会将客户端配置文件的名称从默认的</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
 Output.config </span><span style="font-size:10.5pt;line-height:115%;color:black;">更改为</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;"> App.config</span><span style="font-size:10.5pt;line-height:115%;color:black;">。请注意，这些文件都是在</span><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
 C:\Users\&lt;</span><em><span style="font-size:10.5pt;line-height:115%;color:black;">用户名</span></em><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">&gt;\My Documents\Visual Studio 10\Projects\Service\Client
</span><span style="font-size:10.5pt;line-height:115%;color:black;">目录中生成的。</span>
</p>
<ol>
<li>在 Visual Studio 中将生成的代理添加到该客户端项目中，方法是在“解决方案资源管理器”中右击该客户端项目，选择“添加”，然后选择“现有项”。选择上面的步骤中生成的“generatedProxy”文件。
</li></ol>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">此示例演示由</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="color:#960bb4;">ServiceModel
</span><span style="color:#960bb4;">元数据实用工具</span><span style="color:#960bb4;"> (Svcutil.exe)<sup>2</sup></span></a><span class="apple-converted-space">&nbsp;</span></span><span style="font-size:10.5pt;color:black;">生成的客户端代码。</span>
</p>
<p style="background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre> </pre>
<pre><span style="font-family:consolas;color:green;">//------------------------------------------------------------------------------</span> </pre>
<pre><span style="font-family:consolas;color:green;">// &lt;auto-generated&gt;</span> </pre>
<pre><span style="font-family:consolas;color:green;">//&nbsp;&nbsp;&nbsp;&nbsp; This code was generated by a tool.</span> </pre>
<pre><span style="font-family:consolas;color:green;">//&nbsp;&nbsp;&nbsp;&nbsp; Runtime Version:2.0.50727.1366</span> </pre>
<pre><span style="font-family:consolas;color:green;">//</span> </pre>
<pre><span style="font-family:consolas;color:green;">//&nbsp;&nbsp;&nbsp;&nbsp; Changes to this file may cause incorrect behavior and will be lost if</span> </pre>
<pre><span style="font-family:consolas;color:green;">//&nbsp;&nbsp;&nbsp;&nbsp; the code is regenerated.</span> </pre>
<pre><span style="font-family:consolas;color:green;">// &lt;/auto-generated&gt;</span> </pre>
<pre><span style="font-family:consolas;color:green;">//------------------------------------------------------------------------------</span> </pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">[System.CodeDom.Compiler.GeneratedCodeAttribute(</span><span style="font-family:consolas;color:#a31515;">&quot;System.ServiceModel&quot;</span><span style="font-family:consolas;color:black;">, </span><span style="font-family:consolas;color:#a31515;">&quot;3.0.0.0&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">[System.ServiceModel.ServiceContractAttribute(Namespace=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples&quot;</span><span style="font-family:consolas;color:black;">, ConfigurationName=</span><span style="font-family:consolas;color:#a31515;">&quot;ICalculator&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;[System.ServiceModel.OperationContractAttribute(Action=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/Add&quot;</span><span style="font-family:consolas;color:black;">, ReplyAction=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/AddResponse&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;[System.ServiceModel.OperationContractAttribute(Action=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/Subtract&quot;</span><span style="font-family:consolas;color:black;">, ReplyAction=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/SubtractResponse&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;[System.ServiceModel.OperationContractAttribute(Action=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/Multiply&quot;</span><span style="font-family:consolas;color:black;">, ReplyAction=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/Multip/span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolaslyResponse&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;[System.ServiceModel.OperationContractAttribute(Action=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/Divide&quot;</span><span style="font-family:consolas;color:black;">, ReplyAction=</span><span style="font-family:consolas;color:#a31515;">&quot;http://Microsoft.ServiceModel.Samples/ICalculator/DivideResponse&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">[System.CodeDom.Compiler.GeneratedCodeAttribute(</span><span style="font-family:consolas;color:#a31515;">&quot;System.ServiceModel&quot;</span><span style="font-family:consolas;color:black;">, </span><span style="font-family:consolas;color:#a31515;">&quot;3.0.0.0&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">interface</span><span style="font-family:consolas;color:black;"> ICalculatorChannel : ICalculator, System.ServiceModel.IClientChannel</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">[System.Diagnostics.DebuggerStepThroughAttribute()]</span></pre>
<pre><span style="font-family:consolas;color:black;">[System.CodeDom.Compiler.GeneratedCodeAttribute(</span><span style="font-family:consolas;color:#a31515;">&quot;System.ServiceModel&quot;</span><span style="font-family:consolas;color:black;">, </span><span style="font-family:consolas;color:#a31515;">&quot;3.0.0.0&quot;</span><span style="font-family:consolas;color:black;">)]</span></pre>
<pre><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">partial</span> <span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> CalculatorClient : System.ServiceModel.ClientBase&lt;ICalculator&gt;, ICalculator</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span><span style="font-family:consolas;color:black;"> CalculatorClient()</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span><span style="font-family:consolas;color:black;"> CalculatorClient(</span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;"> endpointConfigurationName) : </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">(endpointConfigurationName)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span><span style="font-family:consolas;color:black;"> CalculatorClient(</span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;"> endpointConfigurationName, </span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;"> remoteAddress) : </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">(endpointConfigurationName, remoteAddress)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span><span style="font-family:consolas;color:black;"> CalculatorClient(</span><span style="font-family:consolas;color:blue;">string</span><span style="font-family:consolas;color:black;"> endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : </span></pre>
<pre><span style="font-family:console="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">(endpointConfigurationName, remoteAddress)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;cas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">(endpointConfigurationName, remoteAddress)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span><span style="font-family:consolas;color:black;"> CalculatorClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">(binding, remoteAddress)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Add(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span> <span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">.Channel.Add(n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Subtract(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span> <span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">.Channel.Subtract(n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Multiply(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span> <span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">.Channel.Multiply(n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:consolas;color:blue;">public</span> <span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> Divide(</span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n1, </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> n2)</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">return</span> <span style="font-family:consolas;color:blue;">base</span><span style="font-family:consolas;color:black;">.Channel.Divide(n1, n2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<pre> </pre>
<p><span style="font-size:10.5pt;color:black;">现在您已经创建了一个</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">客户端。请继续执行</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734663.aspx"><span style="color:#960bb4;">如何：配置基本</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span><sup><span style="color:#960bb4;">5</span></sup></a></span><span style="font-size:10.5pt;color:black;">中的步骤配置该客户端。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">6</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_配置基本_Windows_Communication_Foundation_客户端"></a><a name="如何_配置基本_Windows_Communication_Foundation_客户端"></a><a name="如何_配置基本_Windows_Communication_Foundation_客户端"></a><span style="font-size:19pt;color:black;">如何：配置基本</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">客户端</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的第五项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">本主题要将使用</span><a href="http://msdn.microsoft.com/zh-cn/library/aa347733.aspx"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">ServiceModel
</span><span style="font-size:10.5pt;color:#960bb4;">元数据实用工具</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> (Svcutil.exe)<sup>2</sup></span></a><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">生成的客户端配置文件添加到客户端项目中，并解释客户端配置元素的内容。配置客户端包括指定客户端用于访问服务的终结点。每个终结点都有一个地址、一个绑定和一个协定，所有这些元素都必须在配置客户端的过程中指定。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在过程后面的示例中提供了为客户端生成的配置文件的内容。</span>
</p>
<h2><a name="配置_Windows_Communication_Foundation_客户_端"></a><a name="配置_Windows_Communication_Foundation_客户_端"></a><a name="配置_Windows_Communication_Foundation_客户_端"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">配置</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Windows Communication Foundation </span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">客户</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">端</span>
</h2>
<ol>
<li>在 Visual Studio 中，将在前一过程如何：创建 Windows Communication Foundation 客户端3中生成的 App.config 配置an class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">生成的客户端配置文件添加到客户端项目中，并解释客户端配置元素的内容。配置客户端包括指定客户端用于访问服务的终结点。每个终结点都有一个地址、一个绑定和一个协定，所有这些元素都必须在配置客户端的过程中指定。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在过程后面的示例中提供了为客户端生成的配置文件的内容。</span>
</p>
<h2><a name="配置_Windows_Communication_Foundation_客户_端"></a><a name="配置_Windows_Communication_Foundation_客户_端"></a><a name="配置_Windows_Communication_Foundation_客户_端"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">配置</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 W文件添加到客户端项目中。在“解决方案资源管理器”中右击客户端项目，选择“添加”，然后选择“现有项”。接下来，从上一步在其中运行 SvcUtil.exe 的目录中选择 App.config 配置文件。（之所以命名为 App.config 文件，是因为在使用 Svcutil.exe 工具生成此文件时使用了&nbsp;/config:app.config&nbsp;开关）。单击“确定”。默认情况下，“添加现有项”对话框会筛选出具有
 .config 扩展名的所有文件。若要查看这些文件，请从位于“添加现有项”对话框右下角的下拉列表框中选择“所有文件(*.*)”。 </li><li>打开生成的配置文件。Svcutil.exe 会为绑定上的每一项设置都生成&amp;#20540;。下面的示例显示了生成的配置文件。请在&nbsp;&lt;system.serviceModel&gt;4&lt;endpoint&gt; 节下查找&nbsp;5&nbsp;元素。下面的配置文件是所生成的文件的简化版本。
</li></ol>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">3.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">4.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&lt;configuration&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">5.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&lt;system.serviceModel&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">6.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;bindings&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">7.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;wsHttpBinding&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">8.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;binding name=&quot;WSHttpBinding_ICalculator&quot;&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">9.<span style="font-size:7pt;font-family:&#39;times new roman&#39;;">&nbsp; </span></span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/binding&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">10. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/wsHttpBinding&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">11. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bindings&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">12. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;client&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">13. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;endpoint</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">14. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address=&quot;http://localhost:8000/ServiceModelSamples/Service/CalculatorService&quot;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">15. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binding=&quot;wsHttpBinding&quot;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">16. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration=&quot;WSHttpBinding_ICalculator&quot;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">17. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contract=&quot;Microsoft.ServiceModel.Samples.ICalculator&quot;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">18. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;WSHttpBinding_ICalculator&quot;&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">19. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/endpoint&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">20. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/client&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">21. </span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&lt;/system.serviceModel&gt;</span></pre>
<pre style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-family:consolas;color:black;">22. </span><span style="font-family:consolas;color:black;">&lt;/c/span><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;WSHttpBinding_ICalculator&quot;&gt;</span></pre>
<pre stonfiguration&gt; </span></pre>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;color:black;">此示例配置的终结点可供客户端在访问位于以下地址的服务时使用：</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">http://localhost:8000/ServiceModelSamples/service</span></p>
<p style="margin-left:0.5in;"><span style="font-size:10.5pt;color:black;">终结点元素指定</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Microsoft.ServiceModel.Samples.ICalculator</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">协定将用于通过系统提供的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/system.servicemodel.wshttpbinding.aspx"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">WsHttpBinding<sup>6</sup></span></a><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">配置的通信。此绑定指定</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">
 HTTP </span><span style="font-size:10.5pt;color:black;">作为传输协议、可互操作安全性以及其他配置详细信息。</span>
</p>
<p style="margin-left:0.5in;text-indent:-0.25in;"><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">23.
</span><span style="font-size:10.5pt;color:black;">有关如何在此配置下使用生成的客户端的更多信息，请参见</span><a href="http://msdn.microsoft.com/zh-cn/library/ms730144.aspx"><span style="font-size:10.5pt;color:#960bb4;">如何：使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;color:#960bb4;">客户端</span><sup><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">7</span></sup></a><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">下面的示例演示为客户端生成的配置文件的内容。</span>
</p>
<pre><span style="font-family:consolas;color:black;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&lt;configuration&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; &lt;system.serviceModel&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; &lt;bindings&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;wsHttpBinding&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;WSHttpBinding_ICalculator&quot;&nbsp;&nbsp;&nbsp;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closeTimeout=&quot;00:01:00&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; openTimeout=&quot;00:01:00&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receiveTimeout=&quot;00:10:00&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendTimeout=&quot;00:01:00&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bypassProxyOnLocal=&quot;false&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transactionFlow=&quot;false&quot;&nbsp; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hostNameComparisonMode=&quot;StrongWildcard&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxBufferPoolSize=&quot;524288&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxReceivedMessageSize=&quot;65536&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; messageEncoding=&quot;Text&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textEncoding=&quot;utf-8&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useDefaultWebProxy=&quot;true&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allowCookies=&quot;false&quot;&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxDepth=&quot;32&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxStringContentLength=&quot;8192&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxArrayLength=&quot;16384&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxBytesPerRead=&quot;4096&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxNameTableCharCount=&quot;16384&quot; /&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;reliableSession ordered=&quot;true&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactivityTimeout=&quot;00:10:00&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enabled=&quot;false&quot; /&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;security mode=&quot;Message&quot;&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transport clientCredentialType=&quot;Windows&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxyCredentialType=&quot;None&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; realm=&quot;&quot; /&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;message clientCredentialType=&quot;Windows&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;negotiateServiceCredential=&quot;true&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; algorithmSuite=&quot;Default&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;establishSecurityContext=&quot;true&quot; /&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/security&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; &lt;/wsHttpBinding&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; &lt;/bindings&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; &lt;client&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; &lt;endpoint address=&quot;http://localhost:8000/ServiceModelSamples/Service/CalculatorService&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding=&quot;wsHttpBinding&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration=&quot;WSHttpBinding_ICalculator&quot;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;ICalculator&quot; </span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;WSHttpBinding_ICalculator&quot;&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;identity&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;userPrincipalName value=&quot;user@contoso.com&quot; /&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/identity&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/endpoint&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; &lt;/client&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp; &lt;/system.serviceModel&gt;</span></pre>
<pre><span style="font-family:consolas;color:black;">&lt;/configuration&gt;</span></pre>
<p><span style="font-size:10.5pt;color:black;">现在已配置完客户端。请继续执行</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms730144.aspx"><span style="color:#960bb4;">如何：使用</span><span style="color:#960bb4;">
 Windows Communication Foundation </span><span style="color:#960bb4;">客户端</span><sup><span style="color:#960bb4;">7</span></sup></a></span><span style="font-size:10.5pt;color:black;">中的步骤。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">8</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h1 style="margin:0in 0in 7.5pt;"><a name="如何_使用_Windows_Communication_Foundation_客户端"></a><a name="如何_使用_Windows_Communication_Foundation_客户端"></a><a name="如何_使用_Windows_Communication_Foundation_客户端"></a><span style="font-size:19pt;color:black;">如何：使用</span><span style="font-size:19pt;font-family:arial,sans-serif;color:black;">
 Windows Communication Foundation </span><span style="font-size:19pt;color:black;">客户端</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">这是创建基本</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">服务和可以调用该服务的客户端所需的六项任务中的最后一项任务。有关全部六项任务的概述，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/ms734712.aspx"><span style="color:#960bb4;">入门教程</span><sup><span style="color:#960bb4;">1</span></sup></a></span><span style="font-size:10.5pt;color:black;">主题。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">在创建并配置了</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Communication Foundation (WCF)
</span><span style="font-size:10.5pt;color:black;">代理后，就可以创建客户端实例，进而编译客户端应用程序并使用它与</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务进行通信。本主题描述创建和使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">客户端的过程。此过程执行三项操作：</span>
</p>
<ol style="list-style-type:decimal;">
<li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;"> WCF
</span><span style="font-size:10.5pt;">客户端。</span> </li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">从生成的代理调用服务操作。</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="font-size:10.5pt;">在完成操作调用后关闭客户端。</span>
</li></ol>
<p><span style="font-size:10.5pt;color:black;">在过程后面的示例中还提供了过程中所讨论的代码。此任务中的代码应放置在客户端项目中所生成的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Program</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">类的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><code><span style="font-size:10pt;color:black;">Main()</span></code><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">方法中。</span>
</p>
<h2><a name="使用_Windows_Communication_Foundation_客户_端"></a><a name="使用_Windows_Communication_Foundation_客户_端"></a><a name="使用_Windows_Communication_Foundation_客户_端"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">使用</span><span style="font-size:18.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Windows Communication Foundation </span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">客户</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">端</span>
</h2>
<ol>
<li>为要调用的服务的基址创建&nbsp;EndpointAddress2&nbsp;实例，然后创建 WCF&nbsp;Client&nbsp;对象。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">//Step 1: Create an endpoint address and an instance of the WCF Client.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">CalculatorClient client = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> CalculatorClient();</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>从&nbsp;Client&nbsp;内调用客户端操作。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Step 2: Call the service operations.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Call the Add service operation.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value1 = 100.00D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value2 = 15.99D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = client.Add(value1, value2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Add({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Call the Subtract service operation.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value1 = 145.00D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value2 = 76.54D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">result = client.Subtract(value1, value2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Subtract({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Call the Multiply service operation.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value1 = 9.00D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value2 = 81.25D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">result = client.Multiply(value1, value2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Multiply({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">// Call the Divide service operation.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value1 = 22.00D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">value2 = 7.00D;</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">result = client.Divide(value1, value2);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Divide({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<ol>
<li>在 WCF 客户端上调用&nbsp;Close&nbsp;并等待，直到用户按 Enter 终止应用程序。 </li></ol>
<p style="margin-left:0.5in;background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:green;">//Step 3: Closing the client gracefully closes the connection and cleans up resources.</span> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">client.Close();</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"> </pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine();</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Press &lt;ENTER&gt; to terminate client.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre style="margin-left:0.5in;"><span style="font-family:consolas;color:black;">Console.ReadLine();</span></pre>
<pre style="margin-left:0.5in;"> </pre>
<h2><a name="示_例"></a><a name="示_例"></a><a name="示_例"></a><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">示</span><span style="font-size:18.5pt;line-height:115%;color:#3f529c;">例</span>
</h2>
<p><span style="font-size:10.5pt;color:black;">下面的示例演示如何创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">客户端，如何调用客户端操作，以及在完成操作调用后如何关闭客户端。</span>
</p>
<p><span style="font-size:10.5pt;color:black;">将生成的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">客户端和下面的代码示例编译为可执行文件</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Client.exe</span><span style="font-size:10.5pt;color:black;">。在编译代码时，务必引用</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">System.ServiceModel</span></strong><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p style="background-color:white;vertical-align:middle;"><strong><span style="font-size:10.5pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:black;">C#</span></strong></p>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.Collections.Generic;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.Text;</span></pre>
<pre><span style="font-family:consolas;color:blue;">using</span><span style="font-family:consolas;color:black;"> System.ServiceModel;</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:blue;">namespace</span><span style="font-family:consolas;color:black;"> ServiceModelSamples</span></pre>
<pre><span style="font-family:consolas;color:black;">{</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">class</span><span style="font-family:consolas;color:black;"> Client</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">static</span> <span style="font-family:consolas;color:blue;">void</span><span style="font-family:consolas;color:black;"> Main()</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">//Step 1: Create an endpoint address and an instance of the WCF Client.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CalculatorClient client = </span><span style="font-family:consolas;color:blue;">new</span><span style="font-family:consolas;color:black;"> CalculatorClient();</span></pre>
<pre> </pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Step 2: Call the service operations.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Call the Add service operation.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value1 = 100.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value2 = 15.99D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> result = client.Add(value1, value2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n="font-family:consolas;color:green;">// Call the Add service operation.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value1 = 100.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:blue;">double</span><span style="font-family:consolas;color:black;"> value2 = 15.99D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span stylbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Add({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Call the Subtract service operation.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value1 = 145.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value2 = 76.54D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = client.Subtract(value1, value2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Subtract({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Call the Multiply service operation.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value1 = 9.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value2 = 81.25D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = client.Multiply(value1, value2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Multiply({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">// Call the Divide service operation.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value1 = 22.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value2 = 7.00D;</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = client.Divide(value1, value2);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Divide({0},{1}) = {2}&quot;</span><span style="font-family:consolas;color:black;">, value1, value2, result);</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:consolas;color:green;">//Step 3: Closing the client gracefully closes the connection and cleans up resources.</span> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.Close();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine();</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(</span><span style="font-family:consolas;color:#a31515;">&quot;Press &lt;ENTER&gt; to terminate client.&quot;</span><span style="font-family:consolas;color:black;">);</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.ReadLine();</span></pre>
<pre> </pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><span style="font-family:consolas;color:black;">}</span></pre>
<pre> </pre>
<p><span style="font-size:10.5pt;color:black;">确保在尝试使用客户端之前服务正在运行。有关更多信息，请参见</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><a href="http://msdn.microsoft.com/zh-cn/library/ms730935.aspx"><span style="font-size:10.5pt;color:#960bb4;">如何：承载和运行基本的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 Windows Communication Foundation </span><span style="font-size:10.5pt;color:#960bb4;">服务</span><sup><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">3</span></sup></a><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">.</span></p>
<p><span style="font-size:10.5pt;color:black;">若要启动客户端，请在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">解决方案资源管理器</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">中右击</span><strong><span style="font-sce"ize:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">客户端</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，然后依次选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">调试</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">和</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">启动新实例</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">。</span>
</p>
<pre><span style="font-family:consolas;color:black;">Add(100,15.99) = 115.99</span></pre>
<pre><span style="font-family:consolas;color:black;">Subtract(145,76.54) = 68.46</span></pre>
<pre><span style="font-family:consolas;color:black;">Multiply(9,81.25) = 731.25</span></pre>
<pre><span style="font-family:consolas;color:black;">Divide(22,7) = 3.14285714285714</span></pre>
<pre><span style="font-family:consolas;color:black;">Press &lt;ENTER&gt; to terminate client.</span></pre>
<p><span style="font-size:10.5pt;color:black;">如果看到此输出，则说明成功完成了教程。此示例演示如何在代码中配置</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">客户端。有关疑难解答信息，请参见</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513.aspx"><span style="color:#960bb4;">入门教程疑难解答</span><sup><span style="color:#960bb4;">4</span></sup></a></span><span style="font-size:10.5pt;color:black;">。</span>
</p>
<h1 style="margin:0in 0in 7.5pt;"><a name="入门教程疑难解答"></a><a name="入门教程疑难解答"></a><a name="入门教程疑难解答"></a><span style="font-size:19pt;color:black;">入门教程疑难解答</span>
</h1>
<p><strong><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:#5d5d5d;">.NET Framework 4</span></strong>
</p>
<p><span style="font-size:10.5pt;color:black;">本主题列出使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span><span style="font-size:10.5pt;color:black;">入门教程</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span><span style="font-size:10.5pt;color:black;">时最常遇见的问题及其解决方法。</span>
</p>
<ol style="list-style-type:decimal;">
<li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q1"><span style="font-size:10.5pt;color:#960bb4;">无法在硬盘上找到项目文件。</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q2"><span style="font-size:10.5pt;color:#960bb4;">尝试运行服务应用程序时出现以下错误：</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">HTTP
</span><span style="font-size:10.5pt;color:#960bb4;">无法注册</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> URL http://&#43;:8000/ServiceModelSamples/Service/</span><span style="font-size:10.5pt;color:#960bb4;">。进程不具有此命名空间的访问权限。</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q3"><span style="font-size:10.5pt;color:#960bb4;">尝试使用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 Svcutil.exe </span><span style="font-size:10.5pt;color:#960bb4;">工具时出现以下错误：</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“svcutil”</span><span style="font-size:10.5pt;color:#960bb4;">不是内部或外部命令，也不是可操作的程序或批处理文件。</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q4"><span style="font-size:10.5pt;color:#960bb4;">无法找到由</span>
<span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">Svcutil.exe
</span><span style="font-size:10.5pt;color:#960bb4;">生成的</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> App.config
</span><span style="font-size:10.5pt;color:#960bb4;">文件。</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q5"><span style="font-size:10.5pt;color:#960bb4;">编译客户端应用程序期间出现以下错误：</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“CalculatorClient”</span><span style="font-size:10.5pt;color:#960bb4;">不包含</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“&lt;</span><span style="font-size:10.5pt;color:#960bb4;">方法名称</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">&gt;”</span><span style="font-size:10.5pt;color:#960bb4;">的定义，并且找不到可接受类型为</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“CalculatorClient”</span><span style="font-size:10.5pt;color:#960bb4;">的第一个参数的扩展方法</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“&lt;</span><span style="font-size:10.5pt;color:#960bb4;">方法名称</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">&gt;”(</span><span style="font-size:10.5pt;color:#960bb4;">是否缺少</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 using </span><span style="font-size:10.5pt;color:#960bb4;">指令或程序集引用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">?)</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q6"><span style="font-size:10.5pt;color:#960bb4;">编译客户端应用程序期间出现以下错误：找不到类型或命名空间名称</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">“CalculatorClient”(</span><span style="font-size:10.5pt;color:#960bb4;">是否缺少</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">
 using </span><span style="font-size:10.5pt;color:#960bb4;">指令或程序集引用</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">?)</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li><li style="color:black;margin-bottom:12pt;"><span style="color:windowtext;"><a href="http://msdn.microsoft.com/zh-cn/library/bb924513(d=printer).aspx#BKMK_q7"><span style="font-size:10.5pt;color:#960bb4;">运行客户端期间出现以下错误：未处理的异常</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">:
 System.ServiceModel.EndpointNotFoundException: </span><span style="font-size:10.5pt;color:#960bb4;">无法连接到</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> http://localhost:8000/ServiceModelSamples/Service/CalculatorService</span><span style="font-size:10.5pt;color:#960bb4;">。</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;">TCP
</span><span style="font-size:10.5pt;color:#960bb4;">错误代码</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:#960bb4;"> 10061:
</span><span style="font-size:10.5pt;color:#960bb4;">由于目标计算机主动拒绝，未能建立连接。</span></a></span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;">&nbsp;</span>
</li></ol>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">无法在硬盘上找到项目文件。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Vista
</span><span style="font-size:10.5pt;color:black;">和</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">°</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">7
</span><span style="font-size:10.5pt;color:black;">中，</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">Visual Stu,sans-serif;">&nbsp;</span>
</li></ol>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">无法在硬盘上找到项目文件。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows Vista
</span><span style="font-size:10.5pt;color:black;">和</span><span styldio
</span><span style="font-size:10.5pt;color:black;">将项目文件保存在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> c:\users\&lt;</span><span style="font-size:10.5pt;color:black;">用户名</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">\Documents\Visual
 Studio 2010\Projects </span><span style="font-size:10.5pt;color:black;">下，对于</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Windows
</span><span style="font-size:10.5pt;color:black;">的早期版本，保存在</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> c:\Documents and Settings\&lt;</span><span style="font-size:10.5pt;color:black;">用户名</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&gt;\My
 Documents\Visual Studio 2010\Projects </span><span style="font-size:10.5pt;color:black;">下。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">尝试运行服务应用程序时出现以下错误：</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">HTTP
</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">无法注册</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 URL http://&#43;:8000/ServiceModelSamples/Service/</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">。进程不具有此命名空间的访问权限。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">必须使用管理特权来运行承载</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WCF
</span><span style="font-size:10.5pt;color:black;">服务的进程。如果从</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Visual Studio 2010
</span><span style="font-size:10.5pt;color:black;">内运行服务，则必须以管理员身份运行</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Visual Studio 2010</span><span style="font-size:10.5pt;color:black;">。为此，请单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">开始</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，右击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“Visual
 Studio 2010”</span></strong><span style="font-size:10.5pt;color:black;">，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">以管理员身份运行</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">。如果从命令行提示符运行服务，则必须按类&amp;#20284;方式以管理员身份启动命令行提示符。单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">开始</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，右击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">命令提示符</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，然后选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">以管理员身份运行</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">尝试使用</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Svcutil.exe </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">工具时出现以下错误：</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“svcutil”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">不是内部或外部命令，也不是可操作的程序或批处理文件。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">Svcutil.exe
</span><span style="font-size:10.5pt;color:black;">必须位n class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Svcutil.exe </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">工具时出现以下错误：</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“svcutil”</s于系统路径中。最简单的解决方案是使用命令提示符。单击</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">开始</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，依次选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">所有程序</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">、</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“Visual
 Studio 2010”</span></strong><span style="font-size:10.5pt;color:black;">、</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“Visual Studio Tools”</span></strong><span style="font-size:10.5pt;color:black;">和</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“Visual
 Studio 2010 </span></strong><strong><span style="font-size:10.5pt;color:black;">命令提示</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">。对于</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">
 Visual Studio 2010 </span><span style="font-size:10.5pt;color:black;">中附带的所有工具，此命令提示均能将系统路径设置为正确的位置。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">无法找到由</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 Svcutil.exe </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">生成的</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 App.config </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">文件。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">默认情况下，</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">添加现有项</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">对话框仅显示具有以下扩展名的文件：</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">.cs</span><span style="font-size:10.5pt;color:black;">、</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">.resx</span><span style="font-size:10.5pt;color:black;">、</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">.settings</span><span style="font-size:10.5pt;color:black;">、</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">.xsd
</span><span style="font-size:10.5pt;color:black;">和</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> .wsdl</span><span style="font-size:10.5pt;color:black;">。通过在</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">添加现有项</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">对话框右下角的下拉列表框中选择</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">“</span></strong><strong><span style="font-size:10.5pt;color:black;">所有文件</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">(*.*)</span></strong><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">”</span></strong><span style="font-size:10.5pt;color:black;">，可以指定您希望查看所有文件类型。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">编译客户端应用程序期间出现以下错误：</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“CalculatorClient”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">不包含</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“&lt;</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">方法名称</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">&gt;”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">的定义，并且找不到可接受类型为</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“CalculatorClient”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">的第一个参数的扩展方法</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“&lt;</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">方法名称</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">&gt;”(</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">是否缺少</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 using </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">指令或程序集引用</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">?)</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">仅向外界公开标记有</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">ServiceOperationAttribute</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">的那些方法。如果在</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">ICalculator</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">接口的某个方法中省略了</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">ServiceOperationAttribute</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">特性，则当所编译的客户端应用程序调用缺少该特性的操作���，便会收到此错误消息。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">编译客户端应用程序期间出现以下错误：找不到类型或命名空间名称</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“CalculatorClient”(</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">是否缺少</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 using </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">指令或程序集引用</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">?)</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">如果未将</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Proxy.cs
</span><span style="font-size:10.5pt;color:black;">或</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> Proxy.vb
</span><span style="font-size:10.5pt;color:black;">文件添加到客户端项目，则会收到此错误。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">运行客户端期间出现以下错误：未处理的异常</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">:
 System.ServiceModel.EndpointNotFoundException: </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">无法连接到</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 http://localhost:8000/ServiceModelSamples/Service/CalculatorService</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">。</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">TCP
</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">错误代码</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 10061: </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">由于目标计算机主动拒绝，未能建立连接。</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">如果在未运行服务的情况下运行客户端应用程序，则会出现此错误。</span>
</p>
<p><a title="折叠"><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">未处理的异常</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">:
 System.ServiceModel.Security.SecurityNegotiationException: </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">目标</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“http://localhost:8000/ServiceModelSamples/Service/CalculatorService”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">与</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">“http://localhost:8000/ServiceModelSamples/Service/CalculatorService”</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">的</span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;font-family:&#39;segoe ui&#39;,sans-serif;color:#3f529c;">
 SOAP </span></strong></span><span class="lwcollapsibleareatitle"><strong><span style="font-size:16pt;line-height:115%;color:#3f529c;">安全协商失败</span></strong></span></a>
</p>
<div style="text-align:center;"><span style="font-size:10.5pt;line-height:115%;font-family:verdana,sans-serif;color:black;">
<hr align="center" style="color:#e5e5e5;" />
</span></div>
<p><span style="font-size:10.5pt;color:black;">此错误发生在已加入域但没有网络连接的计算机上。将计算机连接到网络，或者同时关闭客户端和服务的安全性。对于服务，将创建</span><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;"> WSHttpBinding
</span><span style="font-size:10.5pt;color:black;">的代码修改为以下代码。</span>
</p>
<pre><span style="font-family:consolas;color:black;">// Step 3 of the hosting procedure: Add a service endpoint</span></pre>
<pre><span style="font-family:consolas;color:black;">selfhost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(SecurityMode.None), &quot;CalculatorService&quot;);</span></pre>
<pre> </pre>
<p><span style="font-size:10.5pt;color:black;">对于客户端，将</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&lt;binding&gt;</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">元素下的</span><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><strong><span style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&lt;security&gt;</span></strong><span class="apple-converted-space" style="font-size:10.5pt;font-family:verdana,sans-serif;color:black;">&nbsp;</span><span style="font-size:10.5pt;color:black;">元素更改为以下内容：</span>
</p>
<pre><span style="font-family:consolas;color:black;">&lt;security mode=&quot;Node&quot; /&gt;</span></pre>

</div>
    
    