---
layout: default
title: How to Use Data-Tier Application Import and Export with a Windows Azure SQL Database - TechNet Articles - United States (English) - TechNet Wiki
weight: 3
---

<div class="post-content user-defined-markup">

<p>This article describes the import and export features in the Microsoft SQL Server “Denali” Data-tier Application Framework 2012 RC0 to import and export data with SQL Database. The import and export features provide the ability to retrieve<br />
and restore an entire database, including schema and data, in a single file<br />
operation. </p>
<div class="alert">
<table width="100%" cellspacing="0" cellpadding="0" style="border-width:0px;margin-left:1px;">
<tbody>
<tr>
<th align="left" style="border:1px solid silver;background-color:gainsboro;"><img class="note" alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/10x10/__key/communityserver-wikis-components-files/00-00-00-00-05/6013.note.gif" />Note</th>
</tr>
<tr>
<td style="border:1px solid silver;">If you wish to contribute to this page, use the<span class="Apple-converted-space">
</span><em>Edit</em><span class="Apple-converted-space"> </span>tab at the top (sign-in required). If you wish to provide feedback for this documentation please either send e-mail to<span class="Apple-converted-space">
</span><a href="mailto:azuredocs@microsoft.com?subject=Documentation%20Feedback%20for%20TechNet%20Wiki%20topic%20%E2%80%9CInside%20SQL%20Azure%E2%80%9D&amp;body=Please%20enter%20feedback%20below:" style="color:dodgerblue;font-weight:normal;text-decoration:none;">azuredocs@microsoft.com</a><span class="Apple-converted-space">
</span>or use the Comment field at the bottom of this page (sign-in required). To provide feedback or ask questions about using Data-Tier Application Import or Export with SQL Database, use the MSDN forums at<a href="http://social.msdn.microsoft.com/Forums/en-US/sqlazurelabssupport/threads/" target="_blank" style="color:dodgerblue;font-weight:normal;text-decoration:none;">http://social.msdn.microsoft.com/Forums/en-US/sqlazurelabssupport/threads/<span class="Apple-converted-space">
</span><img title="This link is external to TechNet Wiki. It will open in a new window." alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-components-sitefiles/10_5F00_external.png" /><span class="Apple-converted-space">
</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<hr />
<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Microsoft_SQL_Server_Data-tier_Application_Framework_TwentyTwelve_RCOh">Microsoft SQL Server Data-tier Application Framework 2012 RC0</a></li><li class="hierarchy-item"><a href="#Installation">Installation</a></li><li class="hierarchy-item"><a href="#Usage">Usage</a></li><li class="hierarchy-item"><a href="#DAC_Import_Export_FAQ">DAC Import/Export FAQ</a></li></ul><div class="hierarchy-list-footer"> </div></div><a name="_DAC"></a>
<hr />
<h2><a name="Microsoft_SQL_Server_Data-tier_Application_Framework_TwentyTwelve_RCOh">Microsoft SQL Server Data-tier Application Framework 2012 RC0</a></h2>
<a name="Microsoft_SQL_Server_Data-tier_Application_Framework_TwentyTwelve_RCOh">
<p>The SQL Server Data-tier Application (DAC) framework is a component based on the .NET Framework that provides application lifecycle services for database development and management. Application lifecycle services include extract, build, deploy, upgrade,
 import, and export for data-tier applications in SQL Azure, SQL Server code named ‘Denali’ CTP 3, SQL Server 2008 R2, SQL Server 2008, SQL Server 2005, and limited support for SQL Server 2000.</p>
<p>For an introduction to and more information on the DAC Framework, this whitepaper is available:</p>
</a>
<p><a href="http://msdn.microsoft.com/en-us/library/ff381683(SQL.100).aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ff381683(SQL.100).aspx
<img title="This link is external to TechNet Wiki. It will open in a new window." alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-components-sitefiles/10_5F00_external.png" style="border-width:0px;border-style:solid;" />
</a>.</p>
<hr />
<h2><a name="Installation"></a><a name="_Installation"></a>Installation</h2>
<p>In order to use the new import and export services, you will need the <a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=9cfb2d51-5ff4-4491-b0e5-b386f32c0992">
.NET 4</a> runtime installed. </p>
<p>With .NET 4 installed, you will then install the <a href="http://www.microsoft.com/download/en/details.aspx?id=28147">
SQL Server 2012 RC0 Manageability Tool Kit</a> on your machine. The packages for the redistributable components are available at the following links:</p>
<ul>
<li><strong>x64 (64 bit binaries) </strong>
<ul>
<li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x64/dacframework.msi">Data-tier Application Framework</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x64/tsqllanguageservice.msi">T-SQL Language Service</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x64/SQLDOM.MSI">ScriptDOM</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x64/SQLSysClrTypes.msi">System CLR Types</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x64/SharedManagementObjects.msi">Shared Management Objects</a>
</li></ul>
</li><li><strong>x86 (32 bit binaries)</strong>
<ul>
<li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/dacframework.msi">Data-tier Application Framework</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/tsqllanguageservice.msi">T-SQL Language Service</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/SQLDOM.MSI">ScriptDOM</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/SQLSysClrTypes.msi">System CLR Types</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/SharedManagementObjects.msi">Shared Management Objects</a>
</li></ul>
</li></ul>
<p>The SQL DAC Examples demonstrate the SQL SErver DAC API usage. You can get a copy at
<a href="http://sqldacexamples.codeplex.com/">http:/sqldacexamples.codeplex.com</a>.</p>
<hr />
<h2><a name="Usage"></a><a name="_Usage"></a>Usage</h2>
<p>You can leverage the import and export services by using DacCli.EXE in the&nbsp;<a tier Application Framework</a>
</li><li><a href="http://download.microsoft.com/download/0/0/F/00FA23F3-A9F5-49A9-88CE-7544868EF61D/ENU/x86/tsqllanguaghref="http://social.technet.microsoft.com/sqldacexamples.codeplex.com">SQL DAC Examples</a> which is provided as an example only, or by using the<br />
public methods on the<strong> Microsoft.SQLServer.Management.DAC.dll</strong> in the<strong>DACStore</strong> class.
</p>
<p><a name="Sample_Commands"><strong></strong></a><strong>Sample Commands</strong></p>
<p>Assume a database exists that is running on SQL Server 2008 R2, which a user has federated (or integrated security) access to. The database can be exported to a “.bacpac” file by calling the sample EXE with the following arguments:</p>
<blockquote dir="ltr">
<p><em>DacCli.exe -s serverName -d databaseName -f C:\filePath\exportFileName.bacpac
<strong>-x -e</strong></em></p>
</blockquote>
<p>Once exported, the export file can be imported to a SQL Database with:</p>
<blockquote dir="ltr">
<p><em>DacCli.exe -s serverName.database.windows.net -d databaseName -f C:\filePath\exportFileName.bacpac
<strong>-i</strong> -u userName -p password</em></p>
</blockquote>
<p>A DAC database running in SQL Server or SQL Database can be unregistered and<br />
dropped with:</p>
<blockquote dir="ltr">
<p><em>DacCli.exe -s serverName.database.windows.net <strong>-drop</strong> databaseName -u userName -p password</em></p>
</blockquote>
<p>You can also just as easily export a SQL Database to a local “.bacpac”<br />
export file and import it into SQL Server.</p>
<hr />
<h2><a name="DAC_Import_Export_FAQ"></a><a name="_FAQ"></a>DAC Import/Export FAQ</h2>
<p><strong><a name="What_is_in_a_ldquo_bacpac_rdquo_export_file"></a>What is in a ���.bacpac” export file?
</strong></p>
<p>The export file contains all supported database schema objects and table data in a single package. Schema objects include logins, users, schemas, tables, columns, constraints, indexes, views, stored procedures, functions, triggers, and other objects relevant
 to the definition of a database. All SQL Database data<br />
types except SQL variant are supported in this CTP.</p>
<p><strong><a name="Is_an_export_file_a_backup"></a>Is an export file a backup? </strong>
</p>
<p>No. The export file does not have a transaction log or historical data. The export file simply contains the contents of a SELECT * for any given table and is not transactionally consistent by itself.</p>
<p><strong><a name="What_rsquo_s_the_best_way_to_create_a_transactionally_consistent_database_archive"></a>What’s the best way to create a transactionally consistent database archive?
</strong></p>
<p>You may choose to provide transactional consistency for an export operation by creating a database copy on SQL Database and then exporting from the copy. If<br />
you’re exporting from on-premise SQL Servers, you can isolate the database by<br />
placing it in single-user mode or read-only mode, or by exporting from a<br />
database snapshot.</p>
<p>What versions of SQL Server can I export from?</p>
<ul>
<li>
<p>SQL Database</p>
</li><li>
<p>SQL Server “Denali”</p>
</li><li>
<p>SQL Server 2008 R2 </p>
</li><li>
<p>SQL Server 2008</p>
</li><li>
<p>SQL Server 2005</p>
</li><li>
<p>SQL Server 2000</p>
</li></ul>
<p><strong><a name="What_versions_of_SQL_Server_can_I_import_to"></a>What versions of SQL Server can I import to?
</strong></p>
<ul>
<li>
<p>SQL Database</p>
</li><li>
<p>SQL Server “Denali” </p>
</li><li>
<p>SQL Server 2008 R2</p>
</li><li>
<p>SQL Server 2008 (SP1 and newer)</p>
</li><li>
<p>SQL Server 2005 (SP4 and newer)</p>
</li></ul>
<p><strong><a name="Do_I_have_to_use_the_EXE"></a>Do I have to use the .EXE? </strong>
</p>
<p>For developers, the import and export services are provided as public methods on the<strong>Microsoft.SQLServer.Management.DAC.dll</strong> in the
<strong>DACStore</strong> class and can be called directly without the EXE provided above. The source for the executable will be made available as a sample on how to consume these new services within your own applications.</p>
<p><strong><a name="Why_do_I_see_ldquo_Cannot_extract_a_DAC_from_database_0_because_it_has_objects_not_supported_in_a_DAC_or_is_missing_dependencies_rdquo"></a>Why do I see “<em>Cannot extract a DAC from database {0} because it has objects not supported in
 a DAC, or is missing dependencies.</em>”? </strong></p>
<p>The DAC Framework does not currently support all SQL Server schema objects. As a result, when exporting from database servers other than SQL Database, you may<br />
experience this error. You will need to remove the object identified in the<br />
error as that object is not supported by the DAC application model and likely<br />
cannot be deployed to SQL Database.</p>
<p><strong><a name="Can_I_specify_the_type_or_size_of_SQL_Azure_database_during_an_import"></a>Can I specify the type or size of SQL Database during an import?
</strong></p>
<p>Yes, you can specify the edition and size of database to import to by setting flags for the EXE. The following sample will create a business edition database with a maximum size of 30 GB:</p>
<blockquote dir="ltr">
<p><em>DacImportExportCli.exe -s serverName.database.windows.net -d databaseName -f C:\filePath\exportFileName.bacpac
<strong>-i –edition business –size 30</strong> -u userName -p password</em></p>
</blockquote>
<p><strong><a name="My_Azure_import_fails_because_of_connection_issues_what_can_I_do"></a>My Azure import fails because of connection issues, what can I do?
</strong></p>
<p>Unfortunately, connections are not always reliable, especially Internet connections. In the event of a failed import or export, you can always try again.</p>
<p>Import and export operations are currently atomic and cannot be resumed. Look for future announcements and updates on enhancements on import and export services for SQL Database.</p>
<p><strong><a name="What_is_the_largest_supported_database"></a>What is the largest supported database?
</strong></p>
<p>The export and import services do not have a specific database size limitation, but SQL Database does. For the most recent database size capabilities<br />
for SQL Database, please follow this link: <a href="http://msdn.microsoft.com/en-us/library/ee621788.aspx" target="_blank">
http://msdn.microsoft.com/en-us/library/ee621788.aspx <img title="This link is external to TechNet Wiki. It will open in a new window." alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-components-sitefiles/10_5F00_external.png" style="border-width:0px;border-style:solid;" /></a></p>
<p><strong><a name="I_imported_my_database_and_dropped_it_so_why_can_rsquo_t_I_import_it_again"></a>I imported my database and dropped it, so why can’t I import it again?
</strong></p>
<p>The DAC Framework supports versioned deployments; which means that when a DAC service is used to create or upgrade a database, the database schema is registered for future reference. You will be unable to re-register database schema for the same database
 and therefore have to remove the registration before importing again. The provided EXE removes DAC registrations with the –drop command, even for databases that no longer exist. Sample:</p>
<blockquote dir="ltr">
<p><em>DacImportExportCli.exe -s serverName.database.windows.net -drop databaseName -u userName -p password</em></p>
</blockquote>
<p><strong><a name="I_receive_a_failure_when_importing_to_SQL_Azure_how_can_I_resolve_this"></a>I receive a failure when importing to SQL Database, how can I resolve this?
</strong></p>
<p>Imports to SQL Database can fail if the database contains diagrams and support<br />
objects. You can often resolve this by dropping the diagrams and support objects<br />
before exporting the database. Use the following to drop the diagrams and<br />
associated objects, then export the database again and then try to import into<br />
SQL Database.</p>
<div>
<div><code>USE DatabaseName</code></div>
<div><code></code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_alterdiagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_upgraddiagrams</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_upgraddiagrams</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_helpdiagrams</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_helpdiagramdefinition</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_creatediagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_renamediagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_alterdiagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_dropdiagram</code></div>
<div><code>DROP</code> <code>FUNCTION</code> <code>fn_diagramobjects</code></div>
<div><code>DROP</code> <code>TABLE</code> <code>sysdiagrams</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>dt_properties</code></div>
</div>
<p><strong><a name="How_do_I_get_help"></a>How do I get help? </strong></p>
<p>Please use the MSDN forums to ask questions or give feedback.</p>
<ul>
<li><a href="http://social.msdn.microsoft.com/Forums/en-US/sqlazurelabssupport/threads/" target="_blank">http://social.msdn.microsoft.com/Forums/en-US/sqlazurelabssupport/threads/
<img title="This link is external to TechNet Wiki. It will open in a new window." alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communitye></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_renamediagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_alterdiagram</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>sp_dropdiagram</code></div>
<div><code>DROP</code> <code>FUNCTION</code> <code>fn_diagramobjects</code></div>
<div><code>DROP</code> <code>TABLE</code> <code>sysdiagrams</code></div>
<div><code>DROP</code> <code>PROCEDURE</code> <code>dt_properties</code></div>
</div>
<p><strong><server-components-sitefiles/10_5F00_external.png" style="border-width:0px;border-style:solid;" /></a>
</li></ul>

</div>
    
    