---
layout: default
title: 'MRS – Customizando Métricas para Move Mailbox - Parte 02 - artigos TechNet - Brasil (Português) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<div>
<p class="ppTopic"><span><div class="table-of-contents"><h2 class="title">Sumário</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Introdu_ccedil_atilde_o">Introdução</a></li><li class="hierarchy-item"><a href="#Onde_encontro_o_MRS_Configuration_File">Onde encontro o MRS Configuration File?</a></li><li class="hierarchy-item"><a href="#Como_editar_o_MRS_Configuration_File"></a></li><li class="hierarchy-item"><a href="#Como_editar_o_MRS_Configuration_File">Como editar o MRS Configuration File?</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Exemplo_de_Instru_ccedil_atilde_o_de_Customiza_ccedil_atilde_o_do_MRS"></a></li><li class="hierarchy-item"><a href="#Exemplo_de_Instru_ccedil_atilde_o_de_Customiza_ccedil_atilde_o_do_MRS">Exemplo de Instrução de Customização do MRS</a></li><li class="hierarchy-item"><a href="#Customizando_valores_do_MRS"></a></li><li class="hierarchy-item"><a href="#Customizando_valores_do_MRS">Customizando valores do MRS</a></li><li class="hierarchy-item"><a href="#Exemplo_de_Customiza_ccedil_atilde_o_do_MRS">Exemplo de Customização do MRS</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></div><br />
<br />
MRS – Customizando métricas para move mailbox - Parte 02</span></p>
</div>
<h1><a name="Introdu_ccedil_atilde_o"></a><span>Introdução</span></h1>
<p class="ppBodyText"><span>Umas das tarefas mais interessantes para se praticar com Exchange Server, com certeza é a migração de plataforma. Muitos clientes que possuem a plataforma Exchange Server 2007 estão migrando para o Exchange Server 2010, enfim, mas
 o que quero dizer é, precisaremos executar milhares de move-mailbox.<br />
<br />
</span><span>Por várias vezes visualizei ambientes enormes, hard</span><span></span><span>ware poderosos, DC’</span><span></span><span>s em x64 dentre outros poderosos itens d</span><span></span><span>e hardware, porém seus administradores, não conheciam o
 MRS Configuration File e com isto não conseguiam expandir o poder de migração de seus servidores, sendo assim geravam imensas filas de aguardo (QUEUE) e as migrações eram lentas e levavam muito tempo para serem finalizadas.<br />
<br />
</span></p>
<p><span></span><span></span></p>
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/1134.get_2D00_move_2D00_where.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/1134.get_2D00_move_2D00_where.png" style="border-width:0px;border-style:solid;width:351px;height:181px;vertical-align:middle;" /></a>
<br />
<br />
<span>Porque isto acontece? Ao trabalharmos com os valores no modelo Default do MRS Configuration File,
</span><span>somos limitados pela configuration do MRS (Mailbox Replication Service), para isto vamos customizar o MRS Configuration File.<br />
<br />
</span>
<h1><a name="Onde_encontro_o_MRS_Configuration_File"></a><span>Onde encontro o MRS Configuration File?
</span></h1>
<p class="ppBodyText"><span>O arquivo de configuração do MRS (Mailbox Replication Service) esta disponível dentro dos servidores CAS (Client Access Server), no seguinte local:</span></p>
<p class="ppBodyText"><strong><span>“Unidade”:\Program Files\Microsoft\Exchange Server\V14\Bin</span></strong></p>
<p class="ppBodyText"><span>Na imagem abaixo podemos visualizar o diretório default para o MRS Configuration File.</span></p>
<span><br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/6330.msexchangereplication.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/6330.msexchangereplication.png" style="border-width:0px;border-style:solid;" /></a>
<br />
<br />
<br />
Dentro do diretório localize o arquivo idêntico ao selecionado na imagem demonstrada acima, o nome do arquivo do MRS é
<strong>MSExchangeMailboxReplication.exe.Config</strong>.<br />
<br />
<br />
</span>
<div style="padding:1pt 4pt;margin-right:0cm;margin-left:7.1pt;">
<p class="ppNote" style="text-indent:0cm;margin-left:0cm;">
<strong><span>Nota: Quando visualizar o arquivo por default o nome do arquivo estará como MSExchangeMailboxReplication.exe, porém ao visualizar a coluna TYPE poderá visualizar que este arquivo é um arquivo CONFIG File e não um executável.</span></strong></p>
</div>
<h1><span></span></h1>
<h1><a name="Como_editar_o_MRS_Configuration_File"></a></h1>
<h1><a name="Como_editar_o_MRS_Configuration_File"></a><span>Como editar o MRS Configuration File?</span></h1>
<p class="ppBodyText"><span>Primeiro lugar você precisa entender com o MRS Configuration File funciona, baseado no arquivo&nbsp;
<strong>MSExchangeMailboxReplication.exe.Config</strong> podemos editar este arquivo, preferencialmente com o Notepad.</span></p>
<p class="ppBodyText"><span>Após abrir o <strong>MSExchangeMailboxReplication.exe.Config
</strong>&nbsp;com o notepad, podemos dividir o arquivo em três partes:</span></p>
<ol>
<li>Códigos do MRS (XML code) </li><li>Instruções de Customização do MRS </li><li>Valores do MRS </li></ol>
<p class="ppBodyText"><span>Vamos focar nossa atenção nas duas últimas opções, sendo assim abaixo existe um exemplo de Instrução de Customização do MRS, logo abaixo:</span></p>
<h2><span></span></h2>
<h2><a name="Exemplo_de_Instru_ccedil_atilde_o_de_Customiza_ccedil_atilde_o_do_MRS"></a></h2>
<h2><a name="Exemplo_de_Instru_ccedil_atilde_o_de_Customiza_ccedil_atilde_o_do_MRS"></a><span>Exemplo de Instrução de Customização do MRS</span></h2>
<div>
<p class="ppCodeLanguage" style="text-indent:0cm;margin-left:0cm;">
<span>MRS Configuration File<br />
</span></p>
</div>
<div style="border-width:1pt medium;border-style:solid none;padding:1pt 0cm;">
<p class="ppCodeCxSpFirst" style="text-indent:0cm;margin-left:0cm;">
<span>&lt;!-- Mailbox Replication Service configuration </span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; Setting Name - Default, MinValue, MaxValue</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxRetries - 60, 0, 1000</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxCleanupRetries - 5, 0, 100</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; RetryDelay - 00:00:30, 00:00:10, 00:30:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxMoveHistoryLength - 2, 0, 100 </span></p>
<:0cm;">
<span>MRS Configuration File<br />
</span></p>
</div>
<div style="border-width:1pt medium;border-style:solid none;padding:1pt 0cm;">
<p class="ppCodeCxSpFirst" style="text-indent:0cm;margin-left:0cm;">
<span>&lt;!-- Mailbox Replication Service configuration </span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; Setting Name - Default, MinValue, MaxValue</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxRetries - 60, 0, 1000</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxCleanupRetries - 5, 0, 100</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; RetryDelay - 00:00:30, 00:00:10, 00:30:00</span></p>
<p class="ppCodeCxSpMp class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxActiveMovesPerSourceMDB - 5, 0, 100</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxActiveMovesPerTargetMDB - 2, 0, 100</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxActiveMovesPerSourceServer - 50, 0, 1000</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxActiveMovesPerTargetServer - 5, 0, 1000</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxTotalMovesPerMRS - 100, 0, 1024</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; FullScanMoveJobsPollingPeriod - 00:10:00, 00:03:00, 1.00:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinimumTimeBeforePickingJobsFromSameDatabase - 00:00:04, 00:00:00, 01:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; ServerCountsNotOlderThan - 00:10:00, 00:00:00, 01:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MRSAbandonedMoveJobDetectionTime - 01:00:00, 01:00:00, 12:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; BackoffIntervalForProxyConnectionLimitReached - 00:30:00, 00:00:30, 1.00:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeCheckPeriod - 00:00:10, 00:00:01, 02:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeTimeout = 00:30:00, 00:00:00, 12:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeLogRollDelay = 00:01:00, 00:00:00, 12:00:00</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; EnableDataGuaranteeCheck = false, false, true</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DisableMrsProxyCompression = false, false, true</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DisableMrsProxyBuffering = false, false, true</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinBatchSize = 100, 2, 1000</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinBatchSizeKB = 256, 16, 16384 </span></p>
<p class="ppCodeCxSpLast" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp; --&gt;</span></p>
</div>
<p class="ppBodyText"><span><br />
Neste exemplo podemos visualizar as seguintes informações: nome da configuração, valor default, valor minímo e valor máximo das configurações.</span></p>
<p class="ppBodyText"><span>Baseado nestes valores podemos estudar o melhor cenário para nossa implementação e fazer as configurações de acordo com nossa necessidade.</span></p>
<h2><span></span></h2>
<h2><a name="Customizando_valores_do_MRS"></a></h2>
<h2><a name="Customizando_valores_do_MRS"></a><span>Customizando valores do MRS</span></h2>
<p class="ppBodyText"><span>Agora que conhecemos os valores que o MRS nos dá suporte, podemos customizar estes valores, para termos uma migração Move-Mailbox mais performática e principalmente estável. Vale ressaltar que conhecer o hardware para o qual a solução
 foi especificada é pré-requisito para que você tenha sucesso em sua implementação.</span></p>
<p class="ppBodyText"><span>No exemplo acima, podemos visualizar vários valores, porém gostaria de destacar algumas variáveis que deverão ser alteradas para termos um processo melhor.<br />
<br />
</span></p>
<table class="ppTableGrid" border="1" cellspacing="0" cellpadding="0" width="100%" style="border:currentColor;width:100%;border-collapse:collapse;">
<tbody>
<tr>
<td valign="top">
<p class="ppTableText"><span style="font-size:14px;"><strong><span>Nome da Propriedade</span></strong></span></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:1.5pt 1.5pt medium medium;border-style:solid solid none none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><strong><span>Descrição</span></strong></p>
</td>
</tr>
<tr>
<td style="padding:0cm 5.4pt;width:32%;">
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxRetries</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número máximo de vezes que o MRS irá tentar executar uma tarefa depois de encontrar uma falha. Pode-se &nbsp;especificar um valor de 0 a 1000. O valor padrão é 60</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">RetryDelay</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica a quantidade de tempo que o MRS irá esperar, antes de tentar executar uma tarefa novamente após uma falha. Pode-se&nbsp; especificar um valor de 0:00:10 (10 segundos) até 0:30:00 (30
 minutos). O valor padrão é 0:00:30 (30 segundos).</span> </p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxMoveHistoryLength</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número máximo de histórico que será mantido dentro da caixa postal no momento da movimentação. Pode-se especificar um valor de 0 a 100. O valor padrão é de 02 para o histórico.</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxActiveMovesPerSourceMDB</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número total de tarefas que o MRS poderá realizar ao mesmo tempo em um Database de Origem simultaneamente. O valor padrão é 05, mas podemos especificar valores na range de 0 à
 100.</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxActiveM8%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número máximo de histórico que será mantido dentro da caixa postal no momento da movimentação. Pode-se especificar um valor de 0 a 100. O valor padrão é de 02 para o histórico.</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxActiveMovesPerSourceMDB</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número total de tarefas que o MRS poderá realizar ao mesmo tempo em um Database de Origem simultaneamente. O valor padrão é 05, mas podemos especificar valores na range de 0 à
 100.</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><emovesPerTargetMDB</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;">Esta propriedade especifica o número total de tarefas que o MRS poderá realizar ao mesmo tempo em um Database de Destino simultaneamente. O valor padrão é 02, mas podemos especificar valores na range de 0
 à 100.</span></p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxActiveMovesPerSourceServer</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;"><span class="hps" style="font-size:12px;">Esta propriedade especifica o</span>
<span class="hps" style="font-size:12px;">número total de tarefas</span> <span class="hps" style="font-size:12px;">
MRS</span> <span class="hps" style="font-size:12px;">pode realizar</span>, que incluem
<span class="hps" style="font-size:12px;">o servidor como origem de dados</span>. <span class="hps" style="font-size:12px;">
Você pode especificar um</span> <span class="hps" style="font-size:12px;">valor de 0 a</span>
<span class="hps" style="font-size:12px;">1000.</span> <span class="hps" style="font-size:12px;">
O valor padrão</span> <span class="hps" style="font-size:12px;">é de 50</span> <span class="hps" style="font-size:12px;">
movimentos</span> <span class="hps" style="font-size:12px;">simultâneos.</span></span>
</p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxActiveMovesPerTargetServer</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;"><span class="hps" style="font-size:12px;">Esta propriedade especifica o</span>
<span class="hps" style="font-size:12px;">número total de tarefas</span> <span class="hps" style="font-size:12px;">
MRS</span> <span class="hps" style="font-size:12px;">pode realizar</span>, que incluem
<span class="hps" style="font-size:12px;">o servidor como destino de dados</span>.
<span class="hps" style="font-size:12px;">Você pode especificar um</span> <span class="hps" style="font-size:12px;">
valor de 0 a</span> <span class="hps" style="font-size:12px;">1000.</span> <span class="hps" style="font-size:12px;">
O valor padrão</span> <span class="hps" style="font-size:12px;">é de 50</span> <span class="hps" style="font-size:12px;">
movimentos</span> <span class="hps" style="font-size:12px;">simultâneos.</span></span>
</p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">MaxTotalMovesPerMRS</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;"><span class="hps" style="font-size:12px;">Esta propriedade especifica o</span>
<span class="hps" style="font-size:12px;">número total de tarefas</span> <span class="hps" style="font-size:12px;">
que</span> <span class="hps" style="font-size:12px;">uma única instância do</span>
<span class="hps" style="font-size:12px;">MRS</span> <span class="hps" style="font-size:12px;">
pode executar</span> <span class="hps" style="font-size:12px;">de cada vez.</span>
<span class="hps" style="font-size:12px;">Você pode especificar um</span> <span class="hps" style="font-size:12px;">
valor de 0 a</span> <span class="hps" style="font-size:12px;">1000.</span> <span class="hps" style="font-size:12px;">
O valor padrão é</span> <span class="hps" style="font-size:12px;">100 movimentos</span>
<span class="hps" style="font-size:12px;">simultâneos.</span></span> </p>
</td>
</tr>
<tr>
<td>
<p class="ppTableText" style="text-align:center;"><em><span style="font-size:13px;">FullScanMoveJobsPollingPeriod</span></em></p>
</td>
<td valign="top"><br />
</td>
<td valign="top" style="border-width:medium 1.5pt 1.5pt medium;border-style:none solid solid none;padding:0cm 5.4pt;width:68%;">
<p class="ppTableText"><span style="font-size:12px;"><span class="hps" style="font-size:12px;">Esta propriedade especifica</span>
<span class="hps" style="font-size:12px;">quantas vezes cada</span> <span class="hps" style="font-size:12px;">
instância da</span> <span class="hps" style="font-size:12px;">MRS</span> <span class="hps" style="font-size:12px;">
verifica</span> <span class="hps" style="font-size:12px;">se existem novas tarefas de trabalho</span>.
<span class="hps" style="font-size:12px;">Você pode especificar</span> <span class="hps" style="font-size:12px;">
um valor de no mínimo </span>&nbsp;<span class="hps" style="font-size:12px;">00:03:00</span>
<span class="hps" style="font-size:12px;">(3 minutos</span>), até o valor máximo de&nbsp;
<span class="hps" style="font-size:12px;">1.00:00:00</span> <span class="hps" style="font-size:12px;">
(1 dia)</span>. <span class="hps" style="font-size:12px;">O valor padrão é</span> <span class="hps" style="font-size:12px;">
0:10:00</span> <span class="hps" style="font-size:12px;">(10 minutos)</span>.</span>
</p>
</td>
</tr>
</tbody>
</table>
<p class="ppBodyText"><span>&nbsp;</span></p>
<h2><a name="Exemplo_de_Customiza_ccedil_atilde_o_do_MRS"></a><span>Exemplo de Customização do MRS</span></h2>
<p class="ppBodyText"><span>Os valores no exemplo abaixo foram customizados baseados nas seguintes variáveis:</span></p>
<ul>
<li>Processamento dos Servidores (Ambiente Novo e Ambiente Antigo) </li><li>Memória dos Servidores (Ambiente Novo e Ambiente Antigo) </li><li>Disco / Storage dos Servidores (Ambiente Novo e Ambiente Antigo) </li><li>Número de Servidores CAS (Ambiente Novo) </li><li>Tamanho médio de Caixas Postais a serem migradas (Ambiente Antigo) </li></ul>
<p class="ppBodyText"><span>Baseado nas variáveis acima, podemos pré-estipular quais campos deverão ser modificados para termos uma maior performance no move-mailbox.<br />
<br />
</span></p>
<div style="padding:1pt 4pt;margin-right:0cm;margin-left:7.1pt;">
<p class="ppNote" style="text-indent:0cm;margin-left:0cm;">
<strong><span>Nota: Quando fizer uma alteração em um MRS configuration File, cuide para que todos os servidores CAS deste mesmo site, tenham a mesma configuração.<br />
</span></strong></p>
</div>
<div>
<p class="ppCodeLanguage" style="text-indent:0cm;margin-left:0cm;">
<span>MRS Configuration File<br />
</span></p>
</div>
<div style="border-width:1pt medium;border-style:solid none;padding:1pt 0cm;">
<p class="ppCodeCxSpFirst" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp; &lt;MRSConfiguration </span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxRetries = &quot;60&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxCleanupRetries = &quot;5&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp; &nbsp;MaxStallRetryPeriod = &quot;00:15:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; RetryDelay = &quot;00:00:30&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MaxMoveHistoryLength = &quot;2&quot; </span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxActiveMovesPerSourceMDB = &quot;150&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxActiveMovesPerTargetMDB = &quot;150&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxActiveMovesPerSourceServer = &quot;500&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxActiveMovesPerTargetServer = &quot;500&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxTotalMovesPerMRS = &quot;400&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; FullScanMoveJobsPollingPeriod = &quot;00:03:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinimumTimeBeforePickingJobsFromSameDatabase = &quot;00:00:04&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; ServerCountsNotOlderThan = &quot;00:10:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MRSAbandonedMoeServer = &quot;500&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxActiveMovesPerTargetServer = &quot;500&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; MaxTotalMovesPerMRS = &quot;400&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span style="color:red;">&nbsp;&nbsp;&nbsp; FullScanMoveJobsPollingPeriod = &quot;00:03:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinimumTimeBeforePickingJobsFromSameDatabase = &quot;00:00:04&quot;</span></p>
<p class="ppCodeCxSpveJobDetectionTime = &quot;01:00:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; BackoffIntervalForProxyConnectionLimitReached = &quot;00:30:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeCheckPeriod = &quot;00:00:10&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeTimeout = &quot;00:30:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DataGuaranteeLogRollDelay = &quot;00:01:00&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; EnableDataGuaranteeCheck = &quot;true&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DisableMrsProxyCompression = &quot;false&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; DisableMrsProxyBuffering = &quot;false&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinBatchSize = &quot;100&quot;</span></p>
<p class="ppCodeCxSpMiddle" style="text-indent:0cm;margin-left:0cm;">
<span>&nbsp;&nbsp;&nbsp; MinBatchSizeKB = &quot;256&quot; /&gt;</span></p>
<p class="ppCodeCxSpLast" style="text-indent:0cm;margin-left:0cm;">
<span>&lt;/configuration&gt;</span></p>
</div>
<p class="ppBulletList" style="text-indent:0cm;margin-left:8.65pt;"><span><br />
Após estas configurações não esqueça todos os servidores CAS dentro deste mesmo site, deverão ter os valores configurados idênticos.</span></p>
<p class="ppBulletList" style="text-indent:0cm;margin-left:8.65pt;"><span>O arquivo pode ser alterado e após isto o MRS entenderá os novos valores customizados e irá trabalhar com as alterações efetuadas.</span></p>
<p class="ppBulletList" style="text-indent:0cm;margin-left:8.65pt;"><span>Até mais,
<br />
Rover Marinho <br />
Twitter: @rovermarinho <br />
Blog: http://rovermarinho.wordpress.com</span></p>
<p class="ppBulletList" style="text-indent:0cm;margin-left:8.65pt;"><span>&nbsp;</span></p>

</div>
    
    
