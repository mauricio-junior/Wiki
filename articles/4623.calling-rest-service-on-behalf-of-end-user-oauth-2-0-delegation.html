---
layout: default
title: 'Calling REST Service On Behalf Of End User - OAuth 2.0 Delegation - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

Back to <a class="ExistingPageLass="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 ink" href="/wiki/contents/articles/3669.azure-active-directory-solutions-for-developers.aspx" title="Click to view the page titled: Windows Azure Active Directory Solutions For Developers">Windows Azure Active Directory Solutions For Developers</a>&nbsp;<br />
<br />
<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Scenario">Scenario</a></li><li class="hierarchy-item"><a href="#Solution_Approach">Solution Approach</a></li><li class="hierarchy-item"><a href="#Analysis">Analysis</a></li><li class="hierarchy-item"><a href="#How_To_s">How To&#39;s</a></li><li class="hierarchy-item"><a href="#Code_Samples">Code Samples</a></li><li class="hierarchy-item"><a href="#Resources">Resources</a></li></ul><div class="hierarchy-list-footer"> </div></div><br />
<h1><a name="Scenario"></a>Scenario</h1>
In this scenario you are developing an application where the end user consumes a web site which needs to access services that require authentication for the end user and in turn apply authorization logic for authenticated users.&nbsp;<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4382.OAuth-2.0-Delegation-Scenario.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/350x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4382.OAuth-2.0-Delegation-Scenario.png" style="border-width:0px;border-style:solid;" /></a><br />
<ul>
<li>Internet facing web applications. </li><li>Heterogeneous browsers running on heterogeneous client machines possessed by end users.
</li><li>Each application manages identities independently. </li><li>Each application developed using different development technologies (.Net, Java, PHP, etc.).
</li><li>Each service exposes its functionality via RESTful web services endpoints. </li><li>Aggregator solution is a web application developed using Microsoft’s .Net technology.
</li><li>There are significant challenges (technological or legal) to synchronize identities between the applications.
</li><li>The aggregator application needs to reuse current identification and authentication processes without compromising it.<br />
<div><br />
</div>
</li></ul>
<h1><a name="Solution_Approach"></a>Solution Approach</h1>
Microsoft Windows Identity Foundation OAuth Helper Components offer implementation of building blocks to enable end user delegated authorization for RESTful architectures. It follows OAuth 2.0 protocol recommendations.&nbsp;<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/3173.OAuth-2.0-Delegation-Solution.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/350x0/__key/communityserver-wikis-components-files/00-00-00-00-05/3173.OAuth-2.0-Delegation-Solution.png" style="border-width:0px;border-style:solid;" /></a><br />
<ul>
<li><strong>OAuth client</strong>. OAuth client resides on 3rd party aggregating web site requesting to work on behalf of the end user. Responsible for requesting an OAuth token from Authorization Server and submitting the token to Protected Resource along
 with actual request for data. </li><li><strong>Authorization Service</strong>. &nbsp;Authorization Service is responsible for accepting requests from the OAuth 2.0 clients for authorization and refresh tokens. From OAuth 2.0 specification: “A server capable of issuing tokens after successfully authenticating
 the resource owner and obtaining authorization. The authorization server may be the same server as the resource &nbsp;server, or a separate entity.” ACS plays the role of Authorization Service.
</li><li><strong>Resource protection component</strong>. Resource protection component resides on Protected Resource side and responsible for parsing incoming tokens. The outcome of the parsing the token is either denying or granting access to the Protected Resource
 requested by the aggregator application on behalf of the end user. </li><li><strong>UI consent pages. </strong>UI consent pages is responsible for accepting end user’s credentials for submitting it to original identity management system, and for asking user’s consent for using his or her information from the original system.&nbsp;<br />
<div><br />
</div>
</li></ul>
<div>
<h1><a name="Analysis"></a>Analysis</h1>
Refer to the whitepaper available as part of the available download in resources section.</div>
<h1><a name="How_To_s"></a><a name="How%20To&#39;s"></a>How To&#39;s</h1>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/hh289317.aspx">How To: Authenticate to a REST WCF Service Deployed to Windows Azure Using ACS</a>
</li></ul>
<h1><a name="Code_Samples"></a><a name="Code%20Samples"></a>Code Samples</h1>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/gg185937.aspx">Code Sample: OAuth 2.0 Delegation</a>
</li></ul>
<h1><a name="Resources"></a>Resources</h1>
<ul>
<li><a href="https://connect.microsoft.com/site1168/Downloads/DownloadDetails.aspx?DownloadID=35417">Windows Identity Foundation Extension for OAuth CTP Version 1-4 for production</a>
</li></ul>

</div>
    
    
