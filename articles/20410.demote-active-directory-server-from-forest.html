---
layout: default
title: 'Demote Active Directory Server from Forest - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">Last night I faced a critical issue over one of active directory servers. It could not replicate data over the forest. After long search I found the need to remove the failed DC
 server from the forest.</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">Error below:</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">It has been too long since this machine laragment-inner fiji-content-fragment-inner"><div class="content-fragment-top fiji-content-fragment-top"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 fiji-r4"></div></div><div class="content-fragment-content">

<div class="full-post-header"></div>
<div class="full-post">
    <h1 class="post-name">Demote Active Directory Server from Forest</h1>
    

    <div class="post-content user-defined-markup">

<p style="font-family:&#39;Open Sans&#39;,sast replicated with the named source machine. The time between replications with this source has exceeded the tombstone lifetime. Replication
 has been stopped with this source.&nbsp;<br />
The reason that replication is not allowed to continue is that the two machine&#39;s views of deleted objects may now be different. The source machine may still have copies of objects that have been deleted (and garbage collected) on this machine. If they were
 allowed to replicate, the source machine might return objects which have already been deleted.</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">To &nbsp;remove a server from the forest follow the below steps:</p>
<ol style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Forceful removal of DC </li><li>Metadata cleanup&nbsp; </li></ol>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">Before you start you need to make sure there is a server on the network to serve&nbsp;authentication&nbsp;requests. To check you can run the below command:</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">netdom /query fsmo</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/fsmo011.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/fsmo011.png?w=407" alt="Image" id="i-1301" style="border:0px none;" /></a></p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><span style="text-decoration:underline;"><strong>Forceful removal of DC</strong></span></p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">To resolve this behavior for Windows Server 2008 can run the&nbsp;dcpromo/forceremoval&nbsp;command to forcibly remove AD DS from a domain controller.</p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li><span>Click Start, click Run, and then type the following command:&nbsp;dcpromo /forceremoval</span>
</li><li>Click OK. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove01.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove01.png?w=650" alt="Image" id="i-1328" class="size-full wp-image" style="border:0px none;" /></a><a href="http://tmitegypt.files.wordpress.com/2013/05/remove02.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove02.png?w=650" alt="Image" id="i-1329" class="size-full wp-image" style="border:0px none;" /></a><a href="http://tmitegypt.files.wordpress.com/2013/05/remove03.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove03.png?w=650" alt="Image" id="i-1330" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>At the Welcome to the Active Directory Installation Wizard page, click Next. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove04.png?w=493" alt="Image" id="i-1331" class="size-full wp-image" style="border:0px none;" /><a href="http://tmitegypt.files.wordpress.com/2013/05/remove05.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove05.png?w=496" alt="Image" id="i-1332" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type administrator password </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove07.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove07.png?w=650" alt="Image" id="i-1334" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>If DNS service&nbsp;detected on the server a warning massage will appear. Click ok to delete the DNS configuration.&nbsp;
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove06.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove06.png?w=650" alt="Image" id="i-1333" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>On Summary click next. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove08.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove08.png?w=650" alt="Image" id="i-1335" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>After completing click finish </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove09.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove09.png?w=493" alt="Image" id="i-1336" class="size-full wp-image" style="border:0px none;" /></a></p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">If the computer rif;font-size:13px;line-height:19px;">
<li>On Summary click next. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.that you are removing is a global catalog server, click OK in the message window.</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><span style="text-decoration:underline;"><strong>Metadata cleanup&nbsp;</strong></span></p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">To clean up the metadata need to use the Ntdsutil.exe tool. This will be used on the DC server with below services:</p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Active Directory Sites and Services, </li><li>Active Directory Users and Computers. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">Also, make sure that you use an account that is a member of the Enterprise Admins universal group.</p>
<blockquote style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<p>Caution: Using the Ntdsutil utility incorrectly may result in partial or complete loss of Active Directory functionality.</p>
</blockquote>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">To clean up metadata:</p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>At the command line, type Ntdsutil and press ENTER. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt01.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt01.png?w=650" alt="Image" id="i-1354" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>At the Ntdsutil: prompt, type metadata cleanup and press Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt02.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt02.png?w=587" alt="Image" id="i-1355" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>At the metadata cleanup: prompt, type connections and press Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt03.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt03.png?w=585" alt="Image" id="i-1356" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>At the server connections: prompt, type connect to server &lt;servername&gt;, where &lt;servername&gt; is the domain controller (any functional domain controller in the same domain) from which you plan to clean up the metadata of the failed domain controller. Press
 Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt04.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt04.png?w=554" alt="Image" id="i-1357" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type quit and press Enter to return you to the metadata cleanup: prompt. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt05.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt05.png?w=582" alt="Image" id="i-1358" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type select operation target and press Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt06.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt06.png?w=473" alt="Image" id="i-1359" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type list domains and press Enter. This lists all domains in the forest with a number associated with each.
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt07.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt07.png?w=614" alt="Image" id="i-1360" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type select domain &lt;number&gt;, where &lt;number&gt; is the number corresponding to the domain in which the failed server was located. Press Enter.
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt08.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt08.png?w=624" alt="Image" id="i-1361" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type list sites and press Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt09.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt09.png?w=632" alt="Image" id="i-1362" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type select site &lt;number&gt;, where &lt;number&gt; refers to the number of the site in which the domain controller was a member. Press Enter.
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt10.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt10.png?w=632" alt="Image" id="i-1363" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type list servers in site and press Enter. This will list all servers in that site with a corresponding number.
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt11.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt11.png?w=632" alt="Image" id="i-1364" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type select server &lt;number&gt; and press Enter, where &lt;number&gt; refers to the domain controller to be removed.
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt12.png?w=588" alt="Image" id="i-1365" class="size-full wp-image" style="border:0px none;" /></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type quit and press Enter. The Metadata cleanup menu is displayed. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/nt13.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt13.png?w=400" alt="Image" id="i-1366" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>Type remove selected server and press Enter. </li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><img src="http://tmitegypt.files.wordpress.com/2013/05/nt14.png?w=585" alt="Image" id="i-1367" class="size-full wp-image" style="border:0px none;" /></p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">You will receive a warning message. Read it, and if you agree, press Yes.</p>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">At this point, Active Directory confirms that the domain controller was removed successfully. If you receive an error that the object could not be found, Active Directory might
 have already been removed from the domain controller.</p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li><span>In Active Directory Sites and Services, expand the appropriate site.</span>
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove142.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove142.png?w=516" alt="Image" id="i-1384" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li><span>Delete the server object associated with the failed domain controller.</span>
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove15.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove15.png?w=650" alt="Image" id="i-1386" class="size-full wp-image" style="border:0px none;" /></a></p>
<ul style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li>In Active Directory Users and Computers, expand the domain controllers container.
</li><li>Delete the computer object associated with the failed domain controller. </li><li>AD will display another confirmation window. If you&#39;re sure that you want to delete the&nbsp;failed object, click Yes.
</li><li>
<p>To remove the failed server object from DNS</p>
</li><li>
<p>In the DNS snap-in,ly:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;">
<li><span>Delete the server object associated with the failed domain controller.</span>
</li></ul>
<p style="font-family:&#39;Open Sans&#39;,sans-serif;font-size:13px;line-height:19px;"><a href="http://tmitegypt.files.wordpress.com/2013/05/remove15.png" style="color:#3c2bb6;"><img src="http://tmitegypt.files.wordpress.com/2013/05/remove15.png?w expand the zone that is related to the domain from which the server has been removed.</p>
</li><li>
<p>Remove the CNAME record in the _msdcs.root domain of forest zone in DNS. You should also delete the HOSTNAME and other DNS records.</p>
</li><li>
<p>If you have reverse lookup zones, also remove the server from these zones.</p>
</li></ul>

</div>
    
    
