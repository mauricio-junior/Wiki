---
layout: default
title: 'Running the Dynamics CRM 2011 Demo VPC Image on Windows 7 - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p><em>Originally a blog article by Leon Tribe. Read the original here:</em> <a href="http://leontribe.blogspot.com/2011/06/running-dynamics-crm-vpc-on-windows-7.html">
http://leontribe.blogspot.com/2011/06/running-dynamics-crm-vpc-on-windows-7.html</a><br />
<br />
<br />
Microsoft have now released a VPC demo image for Dynamics CRM 2011</p>
<p><a href="https://mbs.microsoft.com/Cms/Templates/document/General.aspx?NRMODE=Published&amp;NRNODEGUID={060C9677-229D-49E1-9F00-95E56D9F1657}&amp;NRORIGINALURL=/partnersource/deployment/methodology/vpc/MSD_CRM2011VirtualMachine&amp;NRCACHEHINT=Guest&amp;wa=wsignin1.0" title="https://mbs.microsoft.com/Cms/Templates/document/General.aspx?NRMODE=Published&amp;NRNODEGUID={060C9677-229D-49E1-9F00-95E56D9F1657}&amp;NRORIGINALURL=/partnersource/deployment/methodology/vpc/MSD_CRM2011VirtualMachine&amp;NRCACHEHINT=Guest&amp;wa=wsignin1.0"><span style="color:#de7008;">https://mbs.microsoft.com/Cms/Templates/document/General.aspx?NRMODE=Published&amp;NRNODEGUID={060C9677-229D-49E1-9F00-95E56D9F1657}&amp;NRORIGINALURL=/partnersource/deployment/methodology/vpc/MSD_CRM2011VirtualMachine&amp;NRCACHEHINT=Guest&amp;wa=wsignin1.0</span></a></p>
<p>A nice set of two virtual machines; one running Dynamics CRM and the other running Exchange.</p>
<h3><a name="The_Problem"></a>The Problem</h3>
<p>The problem is Dynamics CRM 2011 only runs on 64 bit servers. Therefore the VPC image is 64 bit. The only software Microsoft provides to run 64 bit VPC images on is Hyper-V. Hyper-V only runs on Windows Server 2008, which is also 64 bit. Therefore, if we
 are to embrace all things Microsoft, and want to run the demo on a laptop, we need to install Windows Server 2008 on our laptop.</p>
<p>Unfortunately Windows Server 2008 was not built to be run on laptops. It has no concept of things like hibernation and power management. No one says ‘I am so glad I installed Windows Server 2008 on my laptop’. So what is the solution?</p>
<h3><a name="The_Solution"></a>The Solution</h3>
<p>While Microsoft provides no software to run 64 bit VPC images on a laptop operating system like Windows 7, Sun Microsystems does. VirtualBox (<a href="http://www.virtualbox.org/"><span style="color:#de7008;">http://www.virtualbox.org</span></a>) runs on Windows
 7 and plays nicely with Microsoft VPC 64 bit images.</p>
<p>So, the first step is downloading and installing VirtualBox. The latest version, at the time of writing is 4.0.8. Download the installer and hit ‘Next’, ‘Yes’ and ‘Install’ a lot.</p>
<p><a href="http://lh6.ggpht.com/-mGOMhjc0B_4/Tep4a7g8vEI/AAAAAAAAAVU/ps1Uq57CDwA/s1600-h/image%25255B3%25255D.png"><img width="471" height="368" title="image" alt="image" src="http://lh5.ggpht.com/-Czy2JI6TsZk/Tep4cf91O-I/AAAAAAAAAVY/7qI3czo0br0/image_thumb%25255B1%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Now that you have installed VirtualBox we need to run it and add our downloaded VPC image to it. To do this we click the ‘New’ button.</p>
<p><a href="http://lh3.ggpht.com/-FUmKVuRdleg/Tep4djWWD_I/AAAAAAAAAVc/ZkmXrYC9i_c/s1600-h/image%25255B8%25255D.png"><img width="658" height="494" title="image" alt="image" src="http://lh4.ggpht.com/-AdFpg-W9jvA/Tep4e5niyDI/AAAAAAAAAVg/ZNZjkO4qy2g/image_thumb%25255B4%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>The wizard will guide you through adding the VPC image. Set up VirtualBox to run the image as a Windows Server 2008 64 bit</p>
<p><a href="http://lh4.ggpht.com/-EuXnJFPXi4g/Tep4f9Cy4II/AAAAAAAAAVk/VkEk56mtDFA/s1600-h/image%25255B13%25255D.png"><img width="662" height="462" title="image" alt="image" src="http://lh6.ggpht.com/-r3_UNpkRDiE/Tep4hFJXHvI/AAAAAAAAAVo/YR3UTsbnlNs/image_thumb%25255B7%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Next you will need to assign memory. The guide suggests 4G RAM but I only have 2G RAM to spare.</p>
<p>Please note: In the end I had to set this to over 2000 MB to avoid the guest blue screening due to running out of memory.</p>
<p><a href="http://lh4.ggpht.com/-l6D5EYU-iTc/Tep4iC4J0gI/AAAAAAAAAVs/gvfuQxzQNxk/s1600-h/image%25255B18%25255D.png"><img width="662" height="462" title="image" alt="image" src="http://lh4.ggpht.com/-fTpg8rCEvjI/Tep4jT8gY3I/AAAAAAAAAVw/MBLe1oUTEAo/image_thumb%25255B10%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Next you will want to use an existing disk. Browse to the disk you have extracted from the Microsoft demo download.</p>
<p><a href="http://lh5.ggpht.com/-_Q_pB9beTWM/Tep4ktDcQqI/AAAAAAAAAV0/pJHNIgjt3ug/s1600-h/image%25255B23%25255D.png"><img width="680" height="474" title="image" alt="image" src="http://lh4.ggpht.com/-U_pUfdQXv5w/Tep4mKYVGTI/AAAAAAAAAV4/lzmfaNUMDCI/image_thumb%25255B13%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>After this you click ‘Finish’.</p>
<p><a href="http://lh6.ggpht.com/-EzkNrqTrbuI/Tep4nIh3ZCI/AAAAAAAAAV8/GZbiF9kJ9CU/s1600-h/image%25255B28%25255D.png"><img width="593" height="446" title="image" alt="image" src="http://lh4.ggpht.com/-5FRJSBqT274/Tep4o73qKDI/AAAAAAAAAWA/iIC7TL6Jj48/image_thumb%25255B16%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>If you try to start the image at this point you will see the Blue Screen of Death about five seconds into booting. First we must click on ‘Storage’, remove the SATA hard drive and add it back as an IDE drive. It should look like this when you are done.</p>
<p><a href="http://lh3.ggpht.com/-7mC6VGlBVZU/Tep4p-YFaqI/AAAAAAAAAWE/RQkk-wFWm_U/s1600-h/image%25255B33%25255D.png"><img width="597" height="463" title="image" alt="image" src="http://lh5.ggpht.com/-Qhnhu4xQgWY/Tep4q9MDvGI/AAAAAAAAAWI/76J51Rbln-o/image_thumb%25255B19%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Click OK and start up the machine. Many popup boxes appear but once you wade through them it should kick into operation.</p>
<h3><a name="Fixing_The_Memory"></a>Fixing The Memory</h3>
<p>The biggest problem you will have, if you are running the image on a host machine with 4G RAM, is the lack of memory available to the guest. To be honest, if you are going to be performing extended demos with this image you will need a machine with at least
 8G RAM. However, if you don’t have this option, here is a quick bit of memory optimization. That cheeky SQL Server is grabbing as much as possible. In fact, on my work machine, SQL was chewing through 600M RAM when I ran this image. To fix the situation we
 need to run SQL Server Management Studio.</p>
<p><a href="http://lh6.ggpht.com/-4v1ZoCMCRyc/Tep4tJpP5OI/AAAAAAAAAWM/3B07RBqZ7y4/s1600-h/image%25255B48%25255D.png"><img width="551" height="460" title="image" alt="image" src="http://lh5.ggpht.com/-LkCkL5vQkw0/Tep4vt6chZI/AAAAAAAAAWQ/5KhHuxbOZsQ/image_thumb%25255B26%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Once logged in, we can adjust the memory management of our SQL Server.</p>
<p><a href="http://lh3.ggpht.com/-aLow3zb4uag/Tep4w6clvnI/AAAAAAAAAWU/afod_gFv-5U/s1600-h/image%25255B53%25255D.png"><img width="485" height="405" title="image" alt="image" src="http://lh5.ggpht.com/-P1FfCEn9msc/Tep4yEACCqI/AAAAAAAAAWY/loNOV8CQMEs/image_thumb%25255B29%25255D.png?imgmax=800" style="border:0px currentcolor;padding-top:0px;padding-right:0px;padding-left:0px;display:inline;" /></a><a></a></p>
<p>Going to the Memory area we see that SQL Server can grab up to 640M RAM from the machine. Given our limitations, we can set this to something more palatable, say 500M RAM, giving the guest just that little more to run. The downside of this is SQL Server
 may be a little slower in responding to database requests or may timeout. However, given the VPC image will not run in our case without a little extra memory, throttling is the lesser of two evils.
</p>
<p>Another option to gain a little extra memory is to see how much idle memory the host has (via task manager). Leaving yourself a buffer of, say 200M RAM, if the host is not close to maximum you can boost the memory allocated to the guest.</p>
<p>Hopefully these little tricks will get it working on your machine.</p>
<p>Good luck.</p>

</div>
    
    
