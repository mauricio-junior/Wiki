---
layout: default
title: 'Management Pack Health Model Exercise #2 - Creating an Event Monitor Targeted at Class with Multiple Instances - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p>This document is part of the <a href="http://go.microsoft.com/fwlink/?LinkID=275817" target="_blank">
<span>Operations Manager Management Pack Authoring Guide
<img title="This link is external to TechNet Wiki. It will open in a new window." alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-components-sitefiles/10_5F00_external.png" style="border-width:0px;border-style:solid;" />
</span></a>.&nbsp; </p>
<hr />
<p><div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Overview">Overview</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Versions">Product Versions</a></li><li class="hierarchy-item"><a href="#Prerequisites">Prerequisites</a></li><li class="hierarchy-item"><a href="#Revisions">Revisions</a></li><li class="hierarchy-item"><a href="#Sample_Code">Sample Code</a></li><li class="hierarchy-item"><a href="#Details">Details</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Procedures"></a></li><li class="hierarchy-item"><a href="#Using_the_Authoring_Console">Authoring Console Procedure</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Using_Visual_Studio_Authoring_Extensions"></a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Using_Visual_Studio_Authoring_Extensions">Visual Studio Authoring Extensions Procedure</a></li><li class="hierarchy-item"><a href="#See_Also">See Also</a></li></ul><div class="hierarchy-list-footer"> </div></div><br />
<br />
</p>
<hr />
<h1><a name="Overview"></a>Overview</h1>
<p>The following procedure shows how to create an event monitor using&nbsp; the Operations Manager 2007 Authoring console and Visual Studio Authoring Extensions that is targeted at a class that has multiple instances on the agent. Because multiple instances are
 expected, additional criteria is required that includes a property of the target object. This ensures that each copy of the monitor applies to only a single instance of the target class.&nbsp;
</p>
<h2>Product <a name="Versions"></a>Versions</h2>
<p>This exercise applies to the following products:</p>
<ul>
<li>System Center Operations Manager 2007 R2 </li><li>System Center 2012 Operations Manager </li><li>System Center 2012 Operations Manager SP1 </li></ul>
<h2><a name="Prerequisites"></a>Prerequisites</h2>
<p>Before you perform this procedure, you must first complete the following prerequisite procedures:</p>
<ul>
<li><a href="http://social.technet.microsoft.com/wiki/contents/articles/14273.how-to-create-a-new-management-pack-in-operations-manager.aspx"><span>Creating a New Management Pack
</span></a>- Create the management pack. </li><li><a href="http://social.technet.microsoft.com/wiki/contents/articles/14274.management-pack-service-model-exercise-1-creating-a-class-in-operations-manager-en-us.aspx"><span>Creating a Class</span></a>&nbsp;- Create the class that
 is the target for the monitor. </li></ul>
<h2><a name="Revisions"></a>Revisions</h2>
<p>The Microsoft System Center team has validated this procedure as of <strong>Revision #2</strong>.&nbsp; We will continue to review any changes and periodically provide validations on later revisions as they are made.&nbsp; Please feel free to make any corrections
 or additions to this procedure that you think would assist other users</p>
<h2><a name="Sample_Code"></a>Sample Code</h2>
<p>A sample of the completed code for each exercise is available in the <a href="http://gallery.technet.microsoft.com/Operations-Manager-9185d978">
TechNet Gallery</a>.&nbsp; There is a separate sample for each exercise that includes the management pack completed at the end of that exercise and each preceding exercise.&nbsp; This strategy allows you to work through each exercise in order and then compare your results.&nbsp;
 For VSAE, this also includes the Visual Studio solution.&nbsp; </p>
<h2><a name="Details"></a>Details</h2>
<p class="heading">The event monitor created in this procedure has the following characteristics:
</p>
<ul>
<li class="unordered">Runs on any computer that has an instance of <strong>MyApplicationComponent</strong>.
</li><li class="unordered">Sets the monitor to a <strong>critical</strong> state when an event in the
<strong>Application</strong> event log with an event source of <strong>MyApplication</strong> and an event number of
<strong>201</strong> is detected. </li><li class="unordered">Sets the monitor to a <strong>healthy</strong> state when an event in the
<strong>Application</strong> event log with an event source of <strong>MyApplication</strong> and an event number of
<strong>202</strong> is detected. </li><li class="unordered">&nbsp;The name of the component is included in parameter 1 of the event.
</li></ul>
<hr />
<h1 class="heading"><a name="Procedures"></a></h1>
<h1 class="heading"><a name="Using_the_Authoring_Console"></a>Authoring Console Procedure</h1>
<ol class="ordered">
<li>In the Authoring Console, select <strong>Health Model</strong>, and then select
<strong>Monitors</strong>. </li><li>In the <strong>Monitors</strong> pane, expand <strong>My Application Component</strong>, and then expand
<strong>System.Health.EntityState</strong>. </li><li>Right-click <strong>System.Health.AvailabilityState</strong>, select <strong>
New</strong>, select <strong>Windows Events</strong>, select <strong>Simple</strong>, and then select
<strong>Event Reset</strong>. </li><li>On the <b>General</b> page, do the following:
<ol class="ordered">
<li><b>In the <strong>ElementID</strong> box, type <strong>MyMP.Monitor.<strong>MyApplicationComponentEventError</strong></strong>.</b>
<b></b></li><li>In the <strong>Display Name</strong> box, type <strong>MyApplication <strong>
Component&nbsp;</strong>Event Error</strong>. </li><li>In the <b>Target</b> box, select <b>MyMP.<strong>MyApplicationComponent</strong></b>.
</li><li>In the <strong>Parent Monitor</strong> box, select <strong>System.Health.AvailabilityState</strong>.
</li><li>In the <strong>Category</strong> box, select <strong>AvailabilityHealth</strong>. Click
<strong>Next</strong>. </li></ol>
</li><li>On the <strong>Event Log (Unhealthy Event)</strong> page,&nbsp;do the following:
<ol>
<li>In the <strong>Log Name</strong> box, keep the default value of <strong>Application</strong>.
</li><li>Click <b>Next</b>. </li></ol>
</li><li>On the <strong>Event Expression (Unhealthy Event)</strong> page, do the following:
<ol>
<li>For the <strong>Event ID</strong> value, type <strong>201</strong>. </li><li>For the <strong>Event Source</strong> value, type <strong>MyApplication</strong>.
</li><li>Click <strong>Insert</strong>. </li><li>Click the button to the right side of the <strong>Parameter Name</strong> box on the new entry.
</li><li>Select <strong>Specify event specific parameter to use</strong>. </li><li>Specify <strong>1</strong> for the event parameter. </li><li>Click <strong>OK</strong>. </li><li>In the <strong>Operator</strong> box, select <strong>equals</strong>. </li><li>Click the button to the right side of the <strong>Value</strong> box and select
<strong>ComponentName</strong>, </li><li>Click <strong>Next</strong>. </li></ol>
</li><li>On the <strong>Event Log (Healthy Event)</strong> page,&nbsp;do the following:
<ol>
<li>In the <strong>Log Name</strong> box, keep the default value of <strong>Application</strong>.
</li><li>Click <b>Next</b>. </li></ol>
</li><li>On the <strong>Event Expression (Healthy Event)</strong> page, do the following:
<ol>
<li>For the <strong>Event ID</strong> value, type <strong>202</strong>. </li><li>For the <strong>Event Source</strong> value, type <strong>MyApplication</strong>.
</li><li>Click <strong>Insert</strong>. </li><li>Click the button to the right side of the <strong>Parameter Name</strong> box on the new entry.
</li><li>Select <strong>Specify event specific parameter to use</strong>. </li><li>Specify <strong>1</strong> for the event parameter. </li><li>Click <strong>OK</strong>. </li><li>In the <strong>Operator</strong> box, select <strong>equals</strong>. </li><li>Click the button to the right side of the <strong>Value</strong> box and select
<strong>ComponentName</strong>. </li><li>Click <strong>Next</strong>. </li></ol>
</li><li>Expand <strong>System.Health.AvailabilityState</strong>. </li><li>Right-click <strong>MyMP.Monitor.MyApplicationEventError</strong> and select <strong>
Properties</strong>. </li><li>On the <strong>Health</strong> tab, for <strong>FirstEventRaised</strong>, change the
<strong>Health State</strong> to <strong>Critical</strong>. </li><li>On the <strong>Alerting</strong> tab, check <strong>Generate alerts for this monitor</strong>.
</li><li>Click <strong>OK</strong>. </li></ol>
<hr />
<h2 class="heading"><a name="Using_Visual_Studio_Authoring_Extensions"></a></h2>
<h1 class="heading"><a name="Using_Visual_Studio_Authoring_Extensions"></a>Visual Studio Authoring Extensions Procedure</h1>
<ol>
<li>Create the Monitor:<br />
<ol>
<li>In Solution Explorer, right click&nbsp;<strong>Monitors.mptg </strong>and then select
<strong>Open</strong>. </li><li>Right click in the&nbsp; template window and select <strong>Add Template</strong>.
</li><li>Change the name of the template to <strong>Monitors.mptg </strong>and click <strong>
Add</strong>. </li><li>Select <b>Monitor (Unit)</b> and click <b>OK</b>. </li></ol>
</li><li>Configure the Monitor Properties:<br />
<ol>
<li>Right click the entry for <b>NewUnitMonitor </b>and select <b>Properties Window</b>.
</li><li>Change the <b>ID </b>to <strong>Monitor.MyApplicationComponentEventError</strong>.
</li><li>Change the <b>Display Name </b>to <strong>My Application Component Event Error</strong>.
</li></ol>
</li><li>Select the Monitor Target:<br />
<ol>
<li>Select Target and click the ellipse (...) button on the right of the field.&nbsp; </li><li>Select <b><b>MyMP.MyApplicationComponent</b></b> and click <b>OK</b>. </li></ol>
</li><li>Select the Monitor Type:<br />
<ol>
<li>Select <b>Monitor Type ID </b>and click the ellipse (...) button on the right of the field.&nbsp;
</li><li>Select&nbsp;<strong>Microsoft.Windows.2SingleEventLog2StateMonitorType</strong> and click
<b>OK</b>. </li><li>Select <b>Parent Monitor ID </b>and click the ellipse (...) button on the right of the field.
</li><li>Select&nbsp;<strong>System.Health.AvailabilityState</strong> and click <b>OK</b>. </li></ol>
</li><li>Configure the Monitor:<br />
<ol>
<li>Select <b>Monitor Configuration</b> and click the ellipse (...) button on the right of the field.&nbsp;
</li><li>Copy the following XML into the configuration window between the &lt;Configuration&gt; tags.&nbsp; Note that you can use Intellisense to manually type in each entry.<br />
<br />
<div class="reCodeBlock">
<div><span><code>&lt;!-- Computer name for the first event.&nbsp; We will use a variable to get the target computer name. --&gt;</code></span></div>
<div><span><code>&lt;</code><code style="font-weight:bold;">FirstComputerName</code><code>&gt;$Target/Host/Host/Property[Type=&quot;Windows!Microsoft.Windows.Computer&quot;]/NetworkName$&lt;/</code><code style="font-weight:bold;">FirstComputerName</code><code>&gt;</code></span></div>
<div><span><code>&lt;!-- Name of the log containing the first event. --&gt;</code></span></div>
<div><span><code>&lt;</code><code style="font-weight:bold;">FirstLogName</code><code>&gt;Application&lt;/</code><code style="font-weight:bold;">FirstLogName</code><code>&gt;</code></span></div>
<div><span>&nbsp;</span></div>
<div><span><code>&lt;!-- Expression for the first event --&gt;</code></span></div>
<div><span><code>&lt;</code><code style="font-weight:bold;">FirstExpression</code><code>&gt;</code></span></div>
<div><span><code>&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">And</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the first event number --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;UnsignedInteger&quot;</code><code>&gt;EventDisplayNumber&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;UnsignedInteger&quot;</code><code>&gt;201&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the first event source --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;PublisherName&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-wesp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;PublisherName&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></divight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;MyApplication&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the first event parameter --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;Params/Param[1]&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;ComponentName&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
</code></span></span><span style="font-family:Segoe UI;"></span>
<div><span><code>&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">And</code><code>&gt;<br />
</code></span></span><span><code>&lt;/</code><code style="font-weight:bold;">FirstExpression</code><code>&gt;<br />
<br />
</code></span><span><code>&lt;!-- Computer name for the second event.&nbsp; We will use a variable to get the target computer name. --&gt;</code></span></div>
</div>
</div>
<div class="reCodeBlock">
<div><span><code>&lt;</code><code style="font-weight:bold;">SecondComputerName</code><code>&gt;$Target/Host/Host/Property[Type=&quot;Windows!Microsoft.Windows.Computer&quot;]/NetworkName$&lt;/</code><code style="font-weight:bold;">SecondComputerName</code><code>&gt;</code></span></div>
<div><span><code>&lt;!-- Name of the log containing the first event. --&gt;</code></span></div>
<div><span><code>&lt;</code><code style="font-weight:bold;">SecondLogName</code><code>&gt;Application&lt;/</code><code style="font-weight:bold;">SecondLogName</code><code>&gt;</code></span></div>
<div><span>&nbsp;</span></div>
<div><span><code>&lt;!-- Expression for the second event --&gt;</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div><span><code>&lt;</code><code style="font-weight:bold;">SecondExpression</code><code>&gt;</code></span></div>
<div><span><code>&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">And</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the second event number --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;UnsignedInteger&quot;</code><code>&gt;EventDisplayNumber&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;UnsignedInteger&quot;</code><code>&gt;202&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></</span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the second event source --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;PublisherName&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;MyApplication&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;!-- Expression for the second event parameter --&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">XPathQuery</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;Params/Param[1]&lt;/</code><code style="font-weight:bold;">XPathQuery</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Operator</code><code>&gt;Equal&lt;/</code><code style="font-weight:bold;">Operator</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;</code><code style="font-weight:bold;">Value</code>
<code>Type</code><code>=</code><code style="color:blue;">&quot;String&quot;</code><code>&gt;ComponentName&lt;/</code><code style="font-weight:bold;">Value</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">ValueExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">SimpleExpression</code><code>&gt;</code></span></span></div>
<div><span><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">Expression</code><code>&gt;</code></span></span></div>
</code></span></span><span style="font-family:Segoe UI;"></span>
<div><span><code>&nbsp;&nbsp;</code><span><code>&lt;/</code><code style="font-weight:bold;">And</code><code>&gt;</code></span></span></div>
</div>
<div><span><code>&lt;/</code><code style="font-weight:bold;">SecondExpression</code><code>&gt;<br />
<br />
</code></span></div>
</div>
</li><li>Select <b>Monitor Operational States </b>and click the ellipse (...) button on the right of the field.
</li><li>Next to <strong>FirstEventRaised</strong>, select <strong>Critical</strong>. </li><li>Next to <strong>SecondEventRaised</strong>, select <strong>Healthy</strong>. </li><li>Click <strong>OK</strong>, </li></ol>
</li><li>Save and Compile the Project:
<ol>
<li>Select <b>File</b>, and then click <b>Save Monitors.mptg</b>. </li><li>Select <b>Build </b>and then <b>Build Solution</b>. </li><li>Ensure that you don&#39;t receive any errors. </li></ol>
</li></ol>
<h1><a name="See_Also"></a>See Also</h1>
<a href="http://social.technet.microsoft.com/wiki/contents/articles/15207.operations-manager-management-pack-authoring-unit-monitors.aspx"></a>
<ul>
<li><a href="http://social.technet.microsoft.com/wiki/contents/articles/15207.operations-manager-management-pack-authoring-unit-monitors.aspx">Unit Monitors</a>
</li><li><a href="http://social.technet.microsoft.com/wiki/contents/articles/15203.operations-manager-management-pack-authoring-events.aspx">Events</a>
<a href="http://social.technet.microsoft.com/wiki/contents/articles/15207.operations-manager-management-pack-authoring-unit-monitors.aspx">
</a></li></ul>

</div>
    
    
