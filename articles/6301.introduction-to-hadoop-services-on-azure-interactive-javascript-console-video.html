---
layout: default
title: 'Introduction to Hadoop Services on Azure Interactive JavaScript Console (video) - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<script src="https://i1.social.s-msft.com/wiki/rrcontent/18839adc85fee1b0971fa3728f8f3979-b1af1b7835ad549c70d465c5efb07b5e-RequestReducedScript.js" type="text/javascript" ></script><div id="video_be7fb745-985d-4bcc-bfd5-9c36d7ab96a3"><noscript><embed src="https://www.youtube.com/v/wkqZTwbfhwA?fs=1&amp;rel=0" type="application/x-shockwave-flash" wmode="transparent" width="550" height="330" allowfullscreen="true"></embed></noscript></div><script type="text/javascript">
cs_setInnerHtml('video_be7fb745-985d-4bcc-bfd5-9c36d7ab96a3','<embed src=\"https:\/\/www.youtube.com\/v\/wkqZTwbfhwA?fs=1&amp;rel=0\" type=\"application\/x-shockwave-flash\" wmode=\"transparent\" width=\"550\" height=\"330\" allowfullscreen=\"true\"><\/embed>');
</script>
<hr />
<p><a name="See_Also"></a></p>
<a name="See_Also">
<p><span style="font-size:14px;color:#000000;">The Microsoft Azure deployment of Hadoop Services for Windows lets you set up a private Hadoop cluster on Azure. One of the included administration/deployment tools is an Interactive Console for JavaScript and
 Hive. This video introduces the Interactive JavaScript console. Tester David Zhang demonstrates running several JavaScript commands against your Hadoop cluster.</span></p>
See Also</a>
<ul><li><span style="color:#000000;"><a href="http://social.technet.microsoft.com/wiki/contents/articles/6204.apache-hadoop-on-windows.aspx#videos"><span style="font-size:14px;"><strong>More Videos</strong> about Hadoop Services on Windows and Windows Azure
</span></a></span><span style="font-size:14px;"></span></li><li><a href="http://social.technet.microsoft.com/wiki/contents/articles/6204.apache-hadoop-on-windows.aspx"><span style="font-size:14px;color:#0066dd;">Apache Hadoop Services on Windows -
<strong>wiki</strong> <strong>Homepage</strong></span></a> <span style="font-size:14px;">
</span></li><li><span style="font-size:14px;color:#000000;"><a href="http://www.youtube.com/playlist?list=PLD471EE01A293CC34&amp;feature=plcp">Microsoft&#39;s
<strong>Big Data channel</strong> on YouTube</a></span>
<p><span style="color:#000000;"></span></p>
<hr />
<h2><a name="transcript">Transcript (edited for readability)</a></h2>
<p style="margin:0in 0in 10pt;"><span style="font-size:14px;font-family:calibri;color:#548dd4;"><strong>Introduction to the Hadoop Services&nbsp;on Azure Interactive JavaScript Console (video)</strong></span></p>
<p><span style="font-size:12pt;font-family:calibri;">Hi, my name is David Zhang and I&#39;m a Tester on the Microsoft Hadoop Services for Windows team. In this video I&#39;ll introduce you to the Interactive JavaScript console on Windows Hadoop.
</span></p>
<ol>
<li>I&#39;m going to start by going to the Hadooponazure.com website and signing myself in. &nbsp; I provisioned a cluster earlier so it&#39;s going to bring me back that cluster.
</li><li>I click on the <strong>Interactive Console</strong> tile.&nbsp;&nbsp; <br />
This is an interactive console that&#39;s sitting on top of my Hadoop cluster. It&#39;s powered by JavaScript and running inside my browser. It evaluates simple JavaScript expressions. It also lets me run file system commands, HDFS commands, as if I was on a client
 console somewhere. &nbsp; For example, if I type hash and a file system command, it is actually now sending the
<span style="font-family:&#39;arial unicode ms regular&#39;;"><strong>ls</strong></span> command to the HDFS.
</li></ol>
<p><span style="font-size:12pt;font-family:calibri;">We have a bunch of commands in the browser and in this video I’m going to do a quick walkthrough of those features. I’ll use the WordCount sample to find the top 10 most-common words in the Gutenberg samples
 that come installed with Hadoop Services on Windows Azure.</span></p>
<p><span style="font-family:cambria;font-size:18px;color:#4f81bd;">Upload the Sample Files to the HDFS
</span></p>
<p>&nbsp;</p>
<ol>
<li>I’ll start by writing a MapReduce program as a JavaScript script. <br />
I open NotePad and I have a pre-prepared script that I paste in here. You can see that this is a very simple MapReduce script.
<br />
I have a Mapper and a Reducer defined as functions. What the WordCount sample does is look at the words in the corpus and emit ‘ones’ for each distinct word in the corpus. And the Reducer is summing up all those ones for each of the words to give you a word
 count. It&#39;s the standard wordcount example but now it&#39;s written in JavaScript which keeps the program a lot cleaner.
</li><li>Save this as a file named <span style="font-family:&#39;arial unicode ms regular&#39;;">
<strong>wordcount.js</strong></span>. </li><li>Upload this file to the HDFS.
<ol>
<li>To do this, there is a command on the Interactive JavaScript console called put so we do<strong> fs.put().</strong>
</li><li>This brings up a dialog where we select the file we previously saved. </li><li>Press <strong>Upload</strong>. <br />
<span style="font-size:12pt;font-family:calibri;">You can see the file is now uploaded. If we run
<strong><span style="font-family:&#39;arial unicode ms regular&#39;;">ls</span></strong> again, we see that the file is actually on the HDFS.</span>
</li></ol>
</li><li>Next let&#39;s also upload the Gutenberg examples onto the HDFS.
<ol>
<li>Make a directory on the HDFS called gutenberg.<br />
<span style="font-size:12pt;font-family:calibri;">And unfortunately, because the browser only allows you to upload one file at a time, I need to do this three times.<br />
</span><span style="font-size:12pt;font-family:calibri;">The good thing about this is that like with a normal console, I can press
<strong>up</strong> to get to the previous command. So there&#39;s less typing involved.</span>
</li><li>Upload each of the 3 files into the gutenberg directory I just created. </li></ol>
<p><span style="font-size:12pt;font-family:calibri;">So now the 3 files are uploaded. &nbsp;Let’s review what I’ve done so far.</span></p>
<ul>
<li>The WordCount.js file is loaded and I&#39;ve created the gutenberg directory. </li><li>The gutenberg directory has the 3 files are loaded. </li><li>And I check the WordCount JavaScript file that I loaded – I can see it&#39;s what I typed (pasted) into NotePad.
</li></ul>
</li></ol>
<h2><a name="Write_and_Run_the_MapReduce_Query"></a><span style="font-family:cambria;font-size:18px;color:#4f81bd;">Write and Run the MapReduce Query</span></h2>
<p><span style="font-size:12pt;font-family:calibri;">The next thing I&#39;ll do is use the Gutenberg files as input and run the JavaScript MapReduce program on it. But I’m going to do this in such a way that I order the word count I get descending by the top 10.</span></p>
<ol>
<li>I do this by writing a query (see complete query below) that:
<ul>
<li>
<p><span style="font-size:12pt;"><span style="font-family:calibri;">a)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-size:12pt;font-family:calibri;">takes input from the
<strong>gutenbery</strong> directory, </span></p>
</li><li><span style="font-size:12pt;"><span style="font-family:calibri;">b)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbs">Write and Run the MapReduce Query</span></h2>
<p><span style="font-size:12pt;font-family:calibri;">The next thing I&#39;ll do is use the Gutenberg files as input and run the JavaScript MapReduce program on it. But I’m going to do this in such a way that I order the word count I get descending by thep;
</span></span><span style="font-size:12pt;font-family:calibri;">runs <strong>MapReduce</strong> using the
<strong>WordCount</strong> JavaScript, </span></li><li><span style="font-size:12pt;"><span style="font-family:calibri;">c)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-size:12pt;font-family:calibri;">using 2 columns; the first column is called
<strong>word</strong> and the 2nd column is called <strong>count</strong> of type
<strong>long,</strong> &nbsp;</span> </li><li><span style="font-size:12pt;"><span style="font-family:calibri;">d)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-size:12pt;font-family:calibri;">orders by <strong>
count</strong> descending,</span> </li><li><span style="font-size:12pt;"><span style="font-family:calibri;">e)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-size:12pt;font-family:calibri;">takes the top 10,</span>
</li><li><span style="font-size:12pt;"><span style="font-family:calibri;">f)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-size:12pt;font-family:calibri;">and stores the results in a folder called
<strong>gbtop10</strong>.</span> </li></ul>
<p><span style="font-size:12pt;font-family:calibri;">&nbsp;</span></p>
<p><strong><span style="font-family:&#39;times new roman&#39;,serif;">js&gt;From(“gutenburg”).mapReduce(“WordCount.js”, “word, count:long”).orderBy(“count &nbsp;DESC”).take(10).to(“gbtop10”)</span></strong></p>
<p><span style="font-size:12pt;font-family:calibri;">&nbsp;</span></p>
</li><li>Run the query and, while it is processing, select the <strong>ViewLog</strong> link and press SHIFT.&nbsp; This opens a new browser window that displays the job status. &nbsp;In this window we can see that a lot is going on.
<ul>
<li>I pulled in the logs from Pig, as the Pig script is executing. </li><li>The query I typed in the console is translated into a set of Pig queries. &nbsp;And Pig translates those Pig queries into a set of MapReduce jobs, and runs each of those jobs on the Hadoop cluster.
</li><li>As it&#39;s doing that, &nbsp;it&#39;s generating some output to the Standard Output which is what I am seeing here in the browser.
</li><li>When the job completes, the Pig job displays a <strong>Success</strong> message.
</li></ul>
</li></ol>
<h2><a name="Verify_the_Results_of_the_MapReduce_Job"></a><span style="font-family:cambria;font-size:18px;color:#4f81bd;">Verify the Results of the MapReduce Job</span></h2>
<ol>
<li>I first verify that the output directory I specified, gbtop10, is in the HDFS.&nbsp; I do this by typing ls. &nbsp;It’s there.
</li><li>Then I type #ls gbtop10 to see the contents of the gbtop10 directory.&nbsp; &nbsp;I see the very familiar part -r-00000 file, which is a very standard naming scheme that MapReduce uses.
</li><li>I open this file by typing &nbsp;#cat gbtop10/part-r-00000.&nbsp; I see the top 10 most common words in the Gutenberg text have been found, along with the count.
</li></ol>
<p><span style="font-size:12pt;font-family:calibri;">As expected, <em>the</em> is the most-common word in the corpus, with 47,430 occurrences.</span></p>
<h2><a name="Convert_the_data_into_a_JavaScript_array"></a><span style="font-family:cambria;font-size:18px;color:#4f81bd;">Convert the data into a JavaScript array</span></h2>
<p><span style="font-size:12pt;font-family:calibri;">So now that I have these results in the HDFS I can read these results back out into my JavaScript console.
<em>fs.read</em> is a function we provide that allows me to do that.</span></p>
<ol>
<li>To read from the file named gbtop10, I type:
<p><span style="font-size:12pt;font-family:&#39;times new roman&#39;,serif;">Js&gt; file &nbsp;= fs.read(“gbtop10”)</span></p>
<p><span style="font-size:12pt;font-family:calibri;">If I don&#39;t specify any files, it reads all the files in that directory and concatenates them into one string.&nbsp; And that data is now stored in the variable
<em>file</em>.</span></p>
</li><li>I can see the data by typing file.data.&nbsp; </li><li>To turn that data into a set of JavaScript objects, I use the parse function:
<p><strong><span style="font-size:12pt;font-family:&#39;times new roman&#39;,serif;">js&gt; data = parse(file.data, “word, &nbsp;count:long”)</span></strong></p>
<p><span style="font-size:12pt;font-family:calibri;">I tell it to parse the file <strong>
data</strong> and I give it a schema string &nbsp;and you notice that it&#39;s the same schema string that I used before. So I’m saying that the data I am using is actually 2 columns.&nbsp; The first column I call
<strong>word</strong> and the second column is called <strong>count</strong> of type
<strong>long</strong>. The first column I don&#39;t specify a type and it defaults to string.</span></p>
</li><li>The function returns a JavaScript array of 10 elements, where each element is a JavaScript object with 2 properties. &nbsp;The first property is called word and it has a string and the second property is called count and it has the integer value of the count.
</li></ol>
<h2><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><a name="Create_a_bar_graph_of_the_top_10_words"></a><span style="font-family:cambria;font-size:18px;color:#4f81bd;">Create
 a bar graph of the top 10 words</span></h2>
<p><span style="font-size:12pt;font-family:calibri;">This data is now a JavaScript array and it has all the standard JavaScript things that JavaScript arrays come with.
</span></p>
<ul>
<li>When I enter typeof data, JavaScript returns object. </li><li>When I enter data.length, JavaScript returns 10. </li></ul>
<p><span style="font-size:12pt;font-family:calibri;">The good thing about this is that I can push this into our graphing function, because our graphing functions can take a JavaScript array with this schema and this data.</span></p>
<ol>
<li>At the JavaScript prompt, type graph.bar(data)
<p><span style="font-size:12pt;font-family:calibri;">What I get is a bar graph of the top 10 words in the Gutenberg examples.</span><br />
This bar graph is made using SVG which is a new HTML5 feature. I can do all sorts of things with it.
</p>
</li><li>Click on the graph to open it in a new window. &nbsp; </li><li>Drag the handles to resize the graph.&nbsp; </li><li>I can also copy and save the picture if I wanted to as an SVG or a PNG. </li><li>And &nbsp;I can also copy the picture and paste it into another program like Paint or PowerPoint.
</li></ol>
<p style="margin:0in 0in 10pt;"><span style="line-height:115%;font-size:12pt;font-family:calibri;">That&#39;s the end of the demo. Thank you for watching.
</span></p>
<p>&nbsp;</p>
</li></ul>
</div>
    
    
