---
layout: default
title: Kerberos Interoperability Step-by-Step Guide for Windows Server 2003 - TechNet Articles - United States (English) - TechNet Wiki
weight: 3
---

<div class="post-content user-defined-markup">

<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;"><br />
<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Overview">Overview</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Kerberos_Configuration_Utilities">Kerberos Configuration Utilities</a></li><li class="hierarchy-item"><a href="#Kerberos_Test_Utilities">Kerberos Test Utilities</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Using_non-Windows_Kerberos_Clients">Using non-Windows Kerberos Clients</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Configuration_steps_when_using_non-Windows_Kerberos_clients">Configuration steps when using non-Windows Kerberos clients</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_create_Computer_and_User_Accounts">To create Computer and User Accounts</a></li><li class="hierarchy-item"><a href="#To_configure_the_UNIX_hosts">To configure the UNIX hosts</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Support_for_non-Windows_Kerberos_Services">Support for non-Windows Kerberos Services</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Service_Instance_Accounts">Service Instance Accounts</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_create_a_service_instance_account_in_the_Active_Directory">To create a service instance account in the Active Directory</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Using_an_MIT_KDC_with_a_Stand-alone_Windows_Server_TwentyOhThree_Client">Using an MIT KDC with a Stand-alone Windows Server 2003 Client</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Configuring_the_server_and_client">Configuring the server and client</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_configure_the_MIT_KDC_server">To configure the MIT KDC server</a></li><li class="hierarchy-item"><a href="#To_configure_the_Windows_Server_TwentyOhThree_client">To configure the Windows Server 2003 client</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Setting_Trust_with_a_Kerberos_Realm">Setting Trust with a Kerberos Realm</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Configuring_the_Realm_Trust">Configuring the Realm Trust</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_set_up_access_to_services">To set up access to services</a></li><li class="hierarchy-item"><a href="#To_set_up_a_trust">To set up a trust</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Creating_Account_Mappings">Creating Account Mappings</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_create_account_mappings">To create account mappings</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Creating_Transitive_Cross-Realm_Trust_with_Child_Domains">Creating Transitive Cross-Realm Trust with Child Domains</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_create_a_transitive_cross-realm_trust">To create a transitive cross-realm trust</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Using_MIT_GSS_Sample_Applications">Using MIT GSS Sample Applications</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#GSS_Sample_Client_and_Server_Applications">GSS Sample Client and Server Applications</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#To_create_the_sample_service_account_and_keytab">To create the sample service account and keytab</a></li><li class="hierarchy-item"><a href="#To_run_the_GSS_sample_client_and_server_application_using_the_Windows_Server_TwentyOhThree_KDC">To run the GSS sample client and server application
 using the Windows Server 2003 KDC</a></li><li class="hierarchy-item"><a href="#To_test_GSS_API_RFC-1964_Interoperability">To test GSS API (RFC-1964) Interoperability</a></li><li class="hierarchy-item"><a href="#To_run_the_GSS_server_application_on_the_Windows_Server_TwentyOhThree_member">To run the GSS server application on the Windows Server 2003
 member</a></li><li class="hierarchy-item"><a href="#To_run_the_GSS_client_application_using_the_Windows_Server_TwentyOhThree_member_against_an_MIT_GSS_server">To run the GSS client application
 using the Windows Server 2003 member against an MIT GSS server</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></div><br />
<br />
This step-by-step guide examines the use of the Kerberos interoperability features with the Windows®&nbsp;Server&nbsp;2003 operating system
</span></p>
<p style="margin:3pt 0in;"><strong><span class="LabelEmbedded" style="font-family:arial;font-size:13px;">Configuration Process Flow</span></strong></p>
<ol>
<li><span style="font-family:arial;font-size:13px;">Create the computer and the user accounts on the Windows&nbsp;Server&nbsp;2003 client</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the UNIX host</span>
</li><li><span style="font-family:arial;font-size:13px;">Create a service instance account in Active Directory</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the MIT KDC server</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the Windows&nbsp;Server&nbsp;2003 client</span>
</li><li><span style="font-family:arial;font-size:13px;">Set up client access to the MIT services</span>
</li><li><span style="font-family:arial;font-size:13px;">Set up the trust for the non-Windows Kerberos realm</span>
</li></ol>
<p><span style="font-family:arial;font-size:13px;"></span><br />
&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Overview"></a><a name="_Toc251573423"><span style="font-family:arial;">Overview</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;"><br />
The Windows&nbsp;Server&nbsp;2003 operating system implementation of the Kerberos version 5 protocol is designed for interoperability with other security services based on the MIT Kerberos version 5 reference implementation. The interoperability objectives for the Windows&nbsp;Server&nbsp;2003
 release support the following configurations: </span></p>
<ul>
<li style="text-align:justify;"><span style="font-family:arial,sans-serif;font-size:10pt;">A Windows&nbsp;Server&nbsp;2003 domain controller can serve as the Kerberos Key Distribution Center (KDC) server for client and host systems using non-Windows implementations of
 Kerberos. UNIX systems can use kinit and the RC4-HMAC, DES-CBC-MD5 or DES-CBC-CRC encryption type to authenticate to the Windows Server 2003 KDC.
</span></li><li style="text-align:justify;"><span style="font-family:arial,sans-serif;font-size:10pt;">The Windows&nbsp;Server&nbsp;2003 Kerberos Security Support Provider (SSP) implements the General Security Service Application Program Interface (GSS-API) Kerberos Mechanism Token
 formats described in RFC 1964. Windows Server 2003 does not provide the GSS-API; instead, the Kerberos support is available to Microsoft Win32® API-based applications using the SSPI APIs implemented by the Kerberos SSP. Client applications on UNIX using GSS-API
 can obtain session tickets to services on Windows&nbsp;Server&nbsp;2003, and client applications on Windows&nbsp;Server&nbsp;2003 using SSPI APIs can obtain session tickets to services on UNIX, both can utilize security services such as mutual authentication, message integrity,
 and confidentiality.</span> </li></ul>
<p dir="ltr" style="margin-right:0px;"><strong>Note</strong><br />
<br />
<span style="font-family:arial,sans-serif;font-size:10pt;">For more details on GSS-API and SSPI interoperability please review:
<a href="http://windowssdk.msdn.microsoft.com/library/default.asp?url=/library/en-us/secauthn/security/sspi_kerberos_interoperability_with_gssapi.asp">
http://windowssdk.msdn.microsoft.com/library/default.asp?url=/library/en-us/secauthn/security/sspi_kerberos_interoperability_with_gssapi.asp</a></span></p>
<ul>
<li style="text-align:justify;"><span style="font-family:arial,sans-serif;font-size:10pt;">Windows&nbsp;Server&nbsp;2003 and Windows&nbsp;XP&nbsp;Professional clients can be configured to logon to a non-Windows Kerberos realm.&nbsp;
</span></li></ul>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Interoperability with other Kerberos implementations requires minor configuration changes from the default installation. For example, a Windows&nbsp;Server&nbsp;2003 computer that uses a MIT Kerberos
 realm must be configured to locate the Kerberos realm, available KDC servers and, optionally, available Kerberos change password servers. Microsoft provides command-line tools to help with the configuration steps. These tools are:
<br />
</span></p>
<ul>
<li><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong><span style="font-family:arial;font-size:13px;"></span>Ksetup</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">. Configures Windows clients
 to use non-Windows Kerberos realms, KDCs, and Kpasswd servers.&nbsp; </span></li><li style="text-align:justify;"><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Ktpass</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">. Sets the password, account name mappings, and generates
 keytab for Kerberos services on non-Windows servers that use the Windows&nbsp;Server&nbsp;2003 Kerberos KDC.</span>
</li></ul>
<p>&nbsp;</p>
<h3 style="margin:0.25in 0in 3pt;"><a name="Kerberos_Configuration_Utilities"></a><a name="_Toc251573424"><span style="font-family:arial;font-size:24px;">Kerberos Configuration Utilities</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;"><br />
The Kerberos configuration utilities are available in the Support Tools on the Windows&nbsp;Server&nbsp;2003 distribution media, in the \support\tools\support.cab file.<br />
<br />
</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="Kerberos_Test_Utilities"></a><a name="_Toc251573425"><span style="font-family:arial;font-size:24px;">Kerberos Test Utilities</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The Kerberos test utilities Gssclient and Gssserver are available from MIT. Klist is located in the Windows&nbsp;Server&nbsp;2003 Resource Kit.</span></p>
<ul>
<li><strong>Gssclient</strong>. Tests RFC 1964 interoperability. </li><li><strong>Klist</strong>. Examines the Kerberos credential cache. </li></ul>
<p style="margin:3pt 0in;"><a name="_Toc251573426"><span style="font-family:arial;font-size:24px;">Kerberos Interoperability Limitations</span></a></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The Windows&nbsp;Server&nbsp;2003 release has some known Kerberos interoperability limitations. These limitations include the following:</span></p>
<ul>
<li>Only the following encryption types are available for Cross-Realm interoperability:
<ul>
<li>RC4-HMAC – (Recommended) Requires Windows&nbsp;Server&nbsp;2003 SP1 or later KDC. </li><li>DES-CBC-MD5 </li><li>DES-CBC-CRC </li></ul>
</li><li>If using either DES-CBC-MD5 or DES-CBC-CRC as the only encryption types, any upgraded user accounts (such as accounts upgraded from a Windows NT 4.0 domain) and the administrator account in a new domain must have the password changed before non-Windows
 Kerberos clients can use them. This is because the database does not contain the DES keys needed for those encryption types. If using RC4-HMAC, which is recommended because it is more secure than the DES encryption types, this is not an issue.
</li></ul>
<p>&nbsp;</p>
<div style="border-width:medium medium 1pt;border-style:none none solid;border-color:currentColor currentColor windowtext;padding:0in 0in 6pt;">
<h1 style="margin:24pt 0in 6pt;"><a name="Using_non-Windows_Kerberos_Clients"></a><a name="_Toc251573428"><span style="font-family:arial;">Using non-Windows Kerberos Clients</span></a><a name="z538a3786076f40d1b0fe83344f45a43e"></a></h1>
</div>
<p style="margin:3pt 0in;"><strong><span class="LabelEmbedded" style="font-family:arial;font-size:13px;">Configuration Process Flow</span></strong></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp;
<strong>Create the computer and the user accounts on the </strong><strong>Windows&nbsp;Server&nbsp;2003<span class="LabelEmbedded"> client</span></strong></span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp;
<strong><span class="LabelEmbedded">Configure the UNIX host</span></strong></span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Create a service instance account in Active Directory</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Configure the MIT KDC server</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">5.&nbsp;&nbsp; Configure the Windows&nbsp;Server&nbsp;2003 client</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">6.&nbsp;&nbsp; Set up client access to the MIT services</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">7.&nbsp;&nbsp; Set up the trust for the non-Windows Kerberos realm</span></p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Configuration_steps_when_using_non-Windows_Kerberos_clients"></a><a name="_Toc251573429"><span style="font-family:arial;">Configuration steps when using non-Windows Kerberos clients</span></a></h2>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_create_Computer_and_User_Accounts"></a><a name="_Toc251573430"><span style="font-family:arial;font-size:24px;">To create Computer and User Accounts</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Use the Active Directory Users and Computers MMC snap-in to create computer and user accounts for the host and user security principals logging into the Windows&nbsp;Server&nbsp;2003 domain. You
 must have the name of the UNIX host to complete these procedures.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial,sans-serif;font-size:10pt;">Membership in
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Account Operators</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">,
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Domain Admins</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">, or
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Enterprise Admins</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">, or equivalent, is the minimum required to complete this procedure.
 Review details about using the appropriate accounts and group memberships at <a href="http://go.microsoft.com/fwlink/?LinkId=83477">
<span style="color:blue;">Active Direin. You
 must have the name of the UNIX host to complete these procedures.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial,sans-serif;font-size:10pt;">Membership in
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Account Operators</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">,
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Domain Admins</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">, or
</span><span class="LabelEmbedded" style="font-family:arial,sans-serif;font-size:10pt;"><strong>Enterprise Admins</strong></span><span style="font-family:arial,sans-serif;font-size:10pt;">, or equivalent, is the minimum required to complete this procedure.
 Review detailsctory Default Groups</span></a> (http://go.microsoft.com/fwlink/?LinkId=83477).</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp;
<span class="Bold"><strong>Create a new computer account</strong></span></span></p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><strong><span style="font-family:arial;font-size:13px;">Important
</span></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="AlertTextinList2" style="margin:3pt 0.25in 3pt 0.75in;"><span style="font-family:arial;font-size:13px;">Windows&nbsp;Server&nbsp;2003 account names are not multipart like the principal names in the MIT implementation of Kerberos. Because of this, it is not possible
 to directly create an account of the name </span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">host/hostname.dns.com</span><span style="font-family:arial;font-size:13px;">. Such a principal instance is created through service principal
 name mappings. The account should be created with a unique descriptive name.&nbsp; The name of the account does not need to match or even contain any part of the hostname, though it is a good descriptive practice to have the hostname as part of the account name.&nbsp;
 For example, if the fully-qualified name of the host is contoso.reskit.com, good account names could be
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">contoso, contoso_unix</span><span style="font-family:arial;font-size:13px;">, or
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">contoso_MIT</span><span style="font-family:arial;font-size:13px;">. In this case, an account is created with a meaningful name hostname and a service principal name mapping is
 added for </span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">host/hostname.dns.com</span><span style="font-family:arial;font-size:13px;">. This is the purpose of using
<span class="LabelEmbedded"><strong>Ktpass</strong></span> with the <span class="LabelEmbedded">
<strong>–princ</strong></span> and <span class="LabelEmbedded"><strong>–mapuser</strong></span> switches.&nbsp;
</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp;
<strong><span class="Bold">Create a new user account</span></strong></span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Select the
<span class="UI"><strong>Users</strong></span> folder, right-click and select <span class="UI">
<strong>New</strong></span>, then choose <span class="UI"><strong>user</strong></span>. Type a unique user name for the purpose of logging on to the UNIX host.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The account can be created in any container. It might be useful to create a new organizational unit (OU) and create the accounts there.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_configure_the_UNIX_hosts"></a><a name="_Toc251573431"><span style="font-family:arial;font-size:24px;">To configure the UNIX hosts</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Use <span class="LabelEmbedded">
<strong>Ktpass</strong></span> on the Windows&nbsp;Server&nbsp;2003 KDC to create the keytab file (a keytab is a file used to store the keys used by a host or service) and set up the account for the UNIX host, and then copy the keytab file to the UNIX system and merge
 the keytab file into /etc/krb5.keytab (check the documentation for your Kerberos Implementation as the keytab path may be different or configurable).</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; From the command line, use the following command to generate the keytab file for the UNIX host, map the principal to the account, and set the host
 principal password.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt; Ktpass –princ host/hostname@DNS-REALM-NAME –mapuser account -pass password –crypto ENCRYPTION-TYPE –out UNIXmachine.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">where</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">hostname</span><span style="font-family:arial;font-size:13px;">is the fully-qualified name of the host, for example,
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">foobar.reskit.com</span><span style="font-family:arial;font-size:13px;">.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">DNS-REALM-NAME</span><span style="font-family:arial;font-size:13px;"> is the uppercase DNS name of the Windows Server 2003 domain;
 for example, </span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">RESKIT.COM</span><span style="font-family:arial;font-size:13px;">.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">account</span><span style="font-family:arial;font-size:13px;"> is the user account previously created for the UNIX host as performed
 in the procedure to create Computer and User Accounts.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">password</span><span style="font-family:arial;font-size:13px;"> is a complex password to be set on the account.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ENCYRYPTION-TYPE</span><span style="font-family:arial;font-size:13px;"> is the encryption type used to encrypt the key</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">RESKIT.COM</span><span style="font-family:arial;font-size:13px;">.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">account</span><span style="font-family:arial;font-size:13px;"> is the user account previously created for the UNIX host as performed
 in the procedure to create Computer and User Accounts.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family. Either
 RC4-HMAC-NT (recommended), DES-CBC-MD5, or DES-CBC-CRC.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial,sans-serif;font-size:10pt;"></span>&nbsp;</p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><span></span><strong><span style="font-family:arial;font-size:13px;">Note
</span></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="AlertTextinList2" style="margin:3pt 0.25in 3pt 0.75in;"><span style="font-family:arial;font-size:13px;">In order to create a keytab using the RC4-HMAC-NT encryption type you need to use the ktpass.exe from Windows Server 2003 SP1 or later.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Securely transfer the keytab file (UNIXmachine.keytab from the example above) to the UNIX host. Then, merge the keytab file with any existing keytab
 file for the UNIX computer. </span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The UNIX commands to merge the keytab file are:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">% ktutil</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: rkt UNIXmachine.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: list</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The output should appear similar to the following:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">slot&nbsp;&nbsp;KVNO&nbsp;&nbsp;Principal</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">----&nbsp;&nbsp;-----&nbsp;&nbsp;&nbsp;---------</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;host/foobar.reskit.com@RESKIT.COM</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: wkt /etc/krb5.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: q</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Edit the file (/etc/krb5.conf) to refer to the Windows&nbsp;Server&nbsp;2003 domain controller as the Kerberos KDC. The krb5.conf file entries should be similar
 to the following:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">[libdefaults]</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">default_realm&nbsp; =&nbsp; RESKIT.COM</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">default_tkt_enctypes = rc4-hmac; or des-cbc-md5, or des-cbc-crc</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">default_tgs_enctypes = rc4-hmac; or des-cbc-md5, or des-cbc-crc</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">&nbsp;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">[realms]</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">RESKIT.COM = {</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">kdc = winkdc1.reskit.com:88</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">}</span><span style="font-family:arial;">
</span></p>
<ul>
<li>The default encryption type entries, default_txx_enctype, are optional. However, if the Kerberos client receives an encryption type error, set the default encryption type to either RC4-HMAC, DES-CBC-MD5 or DES-CBC-CRC.&nbsp;
</li><li>If your UNIX computer’s hostname is not pre-pended to the realm name—for example, foobar.contoso.com is not a child of reskit.com—you may be required to map the hostname to the Kerberos realm name manually, as follows:
</li></ul>
<p class="TextinList2" style="margin:3pt 0in 3pt 0.5in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">[domain_realm] .foobar.contoso.com = RESKIT.COM</span></p>
<p class="TextinList2" style="margin:3pt 0in 3pt 0.5in;"><span style="font-family:arial;font-size:13px;">Without this entry, your Kerberos applications might try to connect to the wrong realm and fail.</span></p>
<p class="TextinList2" style="margin:3pt 0in 3pt 0.5in;"><span style="font-family:arial;font-size:13px;">See the Kerberos version 5 manual pages for more information on krb5.conf.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp;
</span>Be sure that your system clocks are synchronized (within the maximum permitted clock skew; 5 minutes by default) to the KDC system’s clock. Otherwise, Kerberos authentication will fail due to clock skew errors.
</p>
<div style="border-width:medium medium 1pt;border-style:none none solid;border-color:currentColor currentColor windowtext;padding:0in 0in 6pt;">
<h1 style="margin:24pt 0in 6pt;"><a name="Support_for_non-Windows_Kerberos_Services"></a><a name="_Toc251573432"><span style="font-family:arial;">Support for non-Windows Kerberos Services</span></a><a name="z952691437aa942a480bc654241296455"></a></h1>
</div>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Services running on UNIX systems can be configured with service instance accounts in the Active Directory.</span></p>
<p style="margin:3pt 0in;"><strong><span class="LabelEmbedded" style="font-family:arial;font-size:13px;">Configuration Process Flow</span></strong></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;"><br />
</span></p>
<ol>
<li><span style="font-family:arial;font-size:13px;">Create the computer and the user accounts on the Windows&nbsp;Server&nbsp;2003 client</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the UNIX host</span>
</li><li><span style="font-family:arial;font-size:13px;"><strong><span class="LabelEmbedded">Create a service instance account in Active Directory</span></strong></span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the MIT KDC server</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the Windows&nbsp;Server&nbsp;2003 client</span>
</li><li><span style="font-family:arial;font-size:13px;">Set up client access to the MIT services</span>
</li><li><span style="font-family:arial,sans-serif;font-size:10pt;">Set up the trust for the non-Windows Kerberos realm</span>
</li></ol>
<span style="font-family:arial,sans-serif;font-size:10pt;"></span><span style="font-family:arial,sans-serif;font-size:10pt;"></span>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;">&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Service_Instance_Accounts"></a><a name="_Toc251573433"><span style="font-family:arial;">Service Instance Accounts</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The service instance account is a user account that Kerberos-aware service uses as its security context. Kerberos clients and servers on UNIX systems can authenticate using the Windows&nbsp;Server&nbsp;2003
 KDC and Windows clients can authenticate to Kerberos services that support GSS API.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Windows&nbsp;Server&nbsp;2003 account names are not multipart like the principal names in the MIT implementation of Kerberos. Because of this, it is not possible to directly create an account of
 the name host/hostname.dns.com. Such a principal instance is created through service principal name mappings.
</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_create_a_service_instance_account_in_the_Active_Directory"></a><a name="_Toc251573434"><span style="font-family:arial;font-size:24px;">To create a service instance account in the Active Directory</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Insert subsection body here.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp;
<strong><span class="Bold">Create a new user account</span></strong></span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Use the Active Directory® Users and Computermultipart like the principal names in ths MMC snap-in to create user accounts for the host and user security principals logging into the Windows&nbsp;Server&nbsp;2003
 domain. You must have the name of the UNIX host to complete these procedures.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Select the
<span class="UI"><strong>Users</strong></span> folder, right-click and select <span class="UI">
<strong>New</strong></span>, then choose <span class="UI"><strong>user</strong></span>. Type the name of the UNIX host.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The account can be created in any container. It might be useful to create a new organizational unit (OU) and create the accounts there.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Use the
<span class="LabelEmbedded"><strong>Ktpass</strong></span> tool to set up an identity mapping for the user account. Use the following command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt; Ktpass –princ service-instance@REALM –mapuser account-name -pass password -out UNIXmachine.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The format of the Kerberos service-instance name is: service/host.realm_name, for example:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt; ktpass –princ sample/UNIX1.reskit.com@RESKIT.COM -mapuser sampleUNIX1 –pass password –out UNIX1.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">In this case, an account is created with a meaningful name
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">sampleUNIX1</span><span style="font-family:arial;font-size:13px;">, and a service principal name mapping is added for
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">sample/UNIX1.reskit.com</span><span style="font-family:arial;font-size:13px;">. This is the purpose of using
<span class="LabelEmbedded"><strong>Ktpass</strong></span> with the <span class="LabelEmbedded">
<strong>-princ</strong></span> and <span class="LabelEmbedded"><strong>–mapuser switches</strong></span>.</span></p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><strong><span style="font-family:arial;font-size:13px;">Note
</span></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="AlertTextinList2" style="margin:3pt 0.25in 3pt 0.75in;"><span style="font-family:arial;font-size:13px;">: To generate RC4-HMAC keytabs use the Windows&nbsp;Server&nbsp;2003 SP1 or later version of ktpass.exe. For more details see Knowledge Base article 836725
 “New version of KTPASS.EXE can generate 128 Bit RC4-HMAC kerberos keytabs”.</span></p>
<p><span style="font-family:arial;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.&nbsp;&nbsp; Merge the keytab file with the /etc/krb5.keytab file on the UNIX host.<br />
</span><br />
&nbsp;</p>
<div style="border-width:medium medium 1pt;border-style:none none solid;border-color:currentColor currentColor windowtext;padding:0in 0in 6pt;">
<h1 style="margin:24pt 0in 6pt;"><a name="Using_an_MIT_KDC_with_a_Stand-alone_Windows_Server_TwentyOhThree_Client"></a><a name="_Toc251573435"><span style="font-family:arial;">Using an MIT KDC with a Stand-alone Windows&nbsp;Server&nbsp;2003 Client</span></a><a name="z07a3598b6e6049c195240d057fcf093f"></a></h1>
</div>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">For the Windows&nbsp;Server&nbsp;2003 client to use a non-Windows KDC, you must configure both the non-Windows KDC and the Windows&nbsp;Server&nbsp;2003 client.
</span></p>
<p style="margin:3pt 0in;"><strong><span class="LabelEmbedded" style="font-family:arial;font-size:13px;">Configuration Process Flow</span></strong></p>
<ol>
<li><span style="font-family:arial;font-size:13px;">Create the computer and the user accounts on the Windows&nbsp;Server&nbsp;2003 client</span>
</li><li><span style="font-family:arial;font-size:13px;">Configure the UNIX host</span>
</li><li><span style="font-family:arial;font-size:13px;">Create a service instance account in Active Directory</span>
</li><li><span style="font-family:arial;font-size:13px;"><strong><span class="LabelEmbedded">Configure the MIT KDC server</span></strong></span>
</li><li><span style="font-family:arial;font-size:13px;"><strong><span class="LabelEmbedded">Configure the Windows&nbsp;Server&nbsp;2003 client</span></strong></span>
</li><li><span style="font-family:arial;font-size:13px;">Set up client access to the MIT services</span>
</li><li><span style="font-family:arial;font-size:13px;"></span>Set up the trust for the non-Windows Kerberos realm
</li></ol>
<p><span style="font-family:arial;font-size:13px;"><br />
</span><br />
&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Configuring_the_server_and_client"></a><a name="_Toc251573436"><span style="font-family:arial;">Configuring the server and client</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Two procedures are required to use a MIT KDC with a Windows&nbsp;Server&nbsp;2003 client: use the Kadmin utility to configure the KDC, and use Ksetup to configure the client.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_configure_the_MIT_KDC_server"></a><a name="_Toc251573437"><span style="font-family:arial;font-size:24px;">To configure the MIT KDC server</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">On the MIT KDC, create a host principal for the computer by using the Kadmin utility, which is part of the MIT Kerberos distribution. You will need to create a complex password to complete
 this procfont-family:arial;font-size:13px;"><br />
</span><br />
&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Configuring_the_server_and_client"></a><a name="_Toc251573436"><span style="font-family:arial;">Configuring the server and client</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Two procedures are required to use a MIT KDC with a Windows&nbsp;Server&nbsp;2003 client: use the Kadmin utility to configure the KDC, and use Ksetup to configure the client.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_configure_the_MIT_KDC_server"></a><a name="_Toc251573437"><span style="font-family:arial;font-size:24px;">To configure the MIT edure.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Use the command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># Kadmin –q “ank host/machine-name.dns-domain_name”</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example, if the Windows&nbsp;Server&nbsp;2003 client name is WS03SRV1 and the Kerberos realm name is REALM.RESKIT.COM, the principal name is host/ws03srv1.realm.reskit.com.</span></p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><strong><span style="font-family:arial;font-size:13px;">Note
</span></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="AlertTextinList2" style="margin:3pt 0.25in 3pt 0.75in;"><span style="font-family:arial;font-size:13px;">After executing the above command you will be prompted to provide a password. Provide a complex password and make note of it. You will be required
 to provide the same password in a subsequent command on the Windows&nbsp;Server&nbsp;2003 client.
</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_configure_the_Windows_Server_TwentyOhThree_client"></a><a name="_Toc251573438"><span style="font-family:arial;font-size:24px;">To configure the Windows&nbsp;Server&nbsp;2003 client</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Run the Ksetup utility to configure the Windows&nbsp;Server&nbsp;2003 client to be aware of the non-Windows KDC and realm. Since the MIT realm is not an Active Directory domain, the computer will
 be configured as a member of a workgroup. This is automatic when you set the Kerberos realm and add a KDC server. You will be required to restart your computer for the changes to take effect.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Run the following commands:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /setrealm REALM.RESKIT.COM</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /addkdc REALM.RESKIT.COM kdc.realm.reskit.com</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Set the local machine account password</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /setmachpassword password</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Replace password with the password you supplied above in the procedure To configure the MIT KDC server.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Restart your computer for the changes to take effect.&nbsp;
</span></p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><strong><span style="font-family:arial;font-size:13px;">Note
</span></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="AlertTextinList2" style="margin:3pt 0.25in 3pt 0.75in;"><span style="font-family:arial;font-size:13px;">Whenever changes are made to the realm or domain membership, a restart is required.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Use
<span class="LabelEmbedded"><strong>Ksetup</strong></span> to configure single sign on to local workstation accounts. In order to do this, you define the account mappings which maps local machine accounts to Kerberos principals. For example:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /mapuser auser@REALM.RESKIT.COM guest</span><span style="font-size:13px;">
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /mapuser * *</span><span style="font-family:arial;font-size:13px;"> which maps clients to local accounts of the same
 name.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">5.&nbsp;&nbsp; Use
<span class="LabelEmbedded"><strong>Ksetup</strong></span> with no arguments to see the current settings.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup<br />
<br />
</span></p>
<p>&nbsp;</p>
<div style="border-width:medium medium 1pt;border-style:none none solid;border-color:currentColor currentColor windowtext;padding:0in 0in 6pt;">
<h1 style="margin:24pt 0in 6pt;"><a name="Setting_Trust_with_a_Kerberos_Realm"></a><a name="_Toc251573439"><span style="font-family:arial;">Setting Trust with a Kerberos Realm</span></a><a name="z745ad21e2c744450bad520bc32a6480e"></a></h1>
</div>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">You can set up a trust relationship between Windows&nbsp;Server&nbsp;2003 domains and non-Windows Kerberos realms. To perform this procedure, you must be a member of the Domain Admins group or
 the Enterprise Admins group in Active&nbsp;Directory.</span></p>
<p style="margin:3pt 0in;"><strong><span class="LabelEmbedded" style="font-family:arial;font-size:13px;">Configuration Process Flow</span></strong></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Create the computer and the user accounts on the Windows&nbsp;Server&nbsp;2003 client</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Configure the UNIX host</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Create a service instance account in Active Directory</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Configure the MIT KDC server</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">5.&nbsp;&nbsp; Configure the Windows&nbsp;Server&nbsp;2003 client</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">6.&nbsp;&nbsp;
<strong><span class="LabelEmbedded">Set up client access to the MIT services</span></strong></span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">7.&nbsp;&nbsp;
<strong><span class="LabelEmbedded">Set up the trust for the non-Windows Kerberos realm</span></strong></span></p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Configuring_the_Realm_Trust"></a><a name="_Toc251573440"><span style="font-family:arial;">Configuring the Realm Trust</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">You can set up a trust relationship between Windows&nbsp;Server&nbsp;2003 domains and non-Windows Kerberos realms. The following procedure sets up trust between Windows&nbsp;Server&nbsp;2003 domain RESKIT.COM
 and MIT realm REALM.RESKIT.COM. By default the trust will be non-transitive. This can be changed to transitive within the New Trust Wizard or by using the netdom.exe tool from the Windows&nbsp;Server&nbsp;2003 Support Tools. See the tool Help menu for details.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_set_up_access_to_services"></a><a name="_Toc251573441"><span style="font-family:arial;font-size:24px;">To set up access to services</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Workstation computers that use services in an MIT realm need to have a realm entry added. To do this, use the
<span class="LabelEmbedded"><strong>Ksetup</strong></span> command on each system that uses the MIT realm for services.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; C:\&gt; Ksetup /addkdc REALM.RESKIT.COM kdc.realm.reskit.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">These mappings are stored in the registry under HKLM\System\CurrentControlSet\Control\LSA\Kerberos\Domains.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_set_up_a_trust"></a><a name="_Toc251573442"><span style="font-family:arial;font-size:24px;">To set up a trust</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The following procedures use the Active Directory Domains and Trusts snap-in. However, you can use the Netdom tool to establish trust to an MIT Kerberos realm. The Netdom tool is located
 in the \support\support.cab file on the distribution media. See the Windows Support Tools Help for details.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; On the domain controller for the Windows&nbsp;Server&nbsp;2003 domain, use the following command to set up the configuration for the non-Windows Kerberos realm:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /addkdc REALM.RESKIT.COM kdc.realm.reskit.com</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; To enable delegation across the Realm trust run the following command:
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ksetup /SetRealmFlags REALM.RESKIT.COM Delegate</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Start the Active Directory Domains and Trusts snap-in. Click
<span class="UI"><strong>Programs</strong></span>, then <span class="UI"><strong>Administrative tools</strong></span>, and then
<span class="UI"><strong>Active Directory Domains and Trusts</strong></span>.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Right-click on
<span class="UI"><strong>Properties</strong></span> of your domain, then select the
<span class="UI"><strong>Trusts</strong></span> tab and select <span class="UI"><strong>New Trust</strong></span>. The passwords used in this step are described in Step 5.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">5.&nbsp;&nbsp; Create a trusted domain relationship with the MIT Kerberos realm using the following parameters:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Trust Name: &lt;MIT Kerberos Realm&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Trust Type: Realm</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Transitivity of Trust: Transitive</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Direction of Trust: Two-way</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Trust Password: &lt;provide the password you created for the MIT Kerberos realm&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Procedural steps for creating a trust relationship are available in
<span class="Bold"><strong>Create a two-way, realm trust</strong></span> in the Active Directory Operations Guide or in
<span class="Bold"><strong>Create a realm trust</strong></span> in the Active Directory product help of the Windows&nbsp;Server&nbsp;2003 Technical Library.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial,sans-serif;font-size:10pt;">The sequence of these steps is shown in the following screenshots:<br />
<br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/CommunityServer-Components-UserFiles/00-00-00-23-32-Attached&#43;Files/3731.Fig1_2D00_SetUpTrust.png" style="border:0px solid currentColor;" /><br />
</span><strong><em><span style="font-family:arial;font-size:13px;">Figure 1. Set up a Trust</span></em>
<br />
<br />
<br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/5468.Figure-2.-Define-the-non_2D00_Windows-Realm-to-trust.png" style="border:0px solid currentColor;" /><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong>Figure 2. Define the non-Windows Realm to trust</strong></span></em></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/5873.Figure-3.-Define-the-type-of-trust-to-be-Realm-trust.png" style="border:0px solid currentColor;" /><br />
Figure 3. Define the type of trust to be Realm trust</strong></span></em></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/1351.Figure-4.-Define-the-transitivity-of-the-trust.png" style="border:0px solid currentColor;" /><br />
</strong><strong><em><span style="font-family:arial;font-size:13px;">Figure 4. Define the transitivity of the trust</span></em>
</strong></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/4834.Figure-5.-Define-the-direction-of-the-trust.png" style="border:0px solid currentColor;" /><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong>Figure 5. Define the direction of the trust</strong></span></em></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/8371.Figure-6.-Enter-trust-password.png" style="border:0px solid currentColor;" /><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong>Figure 6. Enter trust password</strong></span></em></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/3443.Figure-7.-Confirmation-of-Trust-settings.png" style="border:0px solid currentColor;" /><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong>Figure 7. Confirmation of Trust settings</strong></span></em></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
<img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/8863.Figure-8.-Trust-creation-status-report.png" style="border:0px solid currentColor;" /><br />
</strong><em><span style="font-family:arial;font-size:13px;"><strong>Figure 8. Trust creation status report</strong></span></em></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><strong><br />
</strong><span style="font-family:arial;font-size:13px;">6.&nbsp;&nbsp; It is recommended that you enable the Realm trust to support RC4 encryption.&nbsp; This requires that the KDCs be Windows&nbsp;Server&nbsp;2003 SP1 or later. To enable, run the following command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; Ktpass –MitRealmName REALM.RESKIT.COM –TrustEncryp RC4</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">7.&nbsp;&nbsp; Use the following MIT Kerberos administration commands to create cross-realm principals in the foreign MIT realm (note that the program is typically
 run on a UNIX system):</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">% Kadmin –q “ank krbtgt/RESKIT.COM@REALM.RESKIT.COM”</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">% Kadmin –q “ank krbtgt/REALM.RESKIT.COM@RESKIT.COM”</span></p>
<div>
<table cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="left" style="padding:0in;border:whitesmoke;background-color:transparent;">
<p class="AlertLabelinList1" style="margin:6pt 0in 0pt 0.25in;"><span style="font-family:arial;font-size:13px;"><strong>Note</strong>
</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p><span style="font-family:arial;font-size:13px;">After executing each of these commands you will be prompted to supply a password for the account.&nbsp; This password should match the password supplied when creating the Cross-Realm trust in the Active Directory
 Domains and Trusts snap-in as performed previously in step 5.<br />
</span><br />
&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Creating_Account_Mappings"></a><a name="_Toc251573443"><span style="font-family:arial;">Creating Account Mappings</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Account mappings are used to map a foreign Kerberos identity (in a trusted non-Windows Kerberos realm) to a local account identity in the domain. These account mappings are managed through
 the Active Directory Users and Computers snap-in.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">These account mappings will allow the non-Windows Kerberos realm to act as an account domain. Users with non-Windows Kerberos principals that have mappings to domain accounts, can logon
 to a workstation that is joined to a trusted domain using the non-Windows Kerberos principal and password from the non-Windows Kerberos realm.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">If you need to access downlevel Windows NT systems, the domain account that is used for mapping, needs to have a password that is synchronized to the non-Windows Kerberos principal password.
 This is because downlevel Windows NT systems will be using NTLM for authentication.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Users can change their passwords in the non-Windows Kerberos realm (if the realm is configured with a change password server) by selecting the
<span class="LabelEmbedded"><strong>Change Password…</strong></span> feature from the
<span class="LabelEmbedded"><strong>CTRL&#43;ALT&#43;DEL</strong></span> sequence.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_create_account_mappings"></a><a name="_Toc251573444"><span style="font-family:arial;font-size:24px;">To create account mappings</span></a></h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Start the Active Directory Users and Computers snap-in. Point to
<strong>Programs</strong>, then <strong>Administrative tools</strong>, and then <strong>
Active Directory Users and Computers</strong>.<br />
</span><span style="font-family:arial,sans-serif;font-size:10pt;">2&nbsp;&nbsp;&nbsp; Start advanced features by clicking View, and then Advanced Features as shown in Figure 9 below.<br />
<br />
</span></p>
<p class="TextinList1" style="margin:3pt 0in;"><strong><em><span style="font-family:arial;font-size:13px;"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/3404.Figure-9.-Advanced-Features.png" style="border:0px solid currentColor;" /><br />
Figure 9. Advanced Features</span></em></strong></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;">&nbsp;</p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Locate the account to which you want to create mappings, and right-click to view
<strong>Name</strong> <strong>Mappings</strong>. This example uses the account teresa.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Click the
<strong>Kerberos Names</strong> mappings tab.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">5.&nbsp;&nbsp; Add a principal from the foreign MIT realm. The example shown in Figure 10 below uses teresa@REALM.RESKIT.COM.</span></p>
<br />
<p><span style="font-family:arial;font-size:13px;"><em><strong><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/1200.Figure-10.-Kerberos-Name-Mapping.png" style="border:0px solid currentColor;" /><br />
Figure 10. Kerberos Name Mapping<br />
</strong></em></span><br />
&nbsp;</p>
<h2 style="margin:0.25in 0in 3pt;"><a name="Creating_Transitive_Cross-Realm_Trust_with_Child_Domains"></a><a name="_Toc251573445"><span style="font-family:arial;">Creating Transitive Cross-Realm Trust with Child Domains</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The following illustration shows the architecture of the transitive cross-realm trust with a child domain.</span></p>
<p style="margin:3pt 0in;"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/CommunityServer-Wikis-Components-Files/00-00-00-00-05/8284.Figure-11.-Cross_2D00_realm-trust-to-parent-domain.jpg" style="border:0px solid currentColor;" /><br clear="all" />
<span style="font-family:arial;font-size:13px;"><strong>Figure 11. Cross-realm trust to parent domain</strong></span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;"><br />
In order for child domains or other domains in a forest of Windows&nbsp;Server&nbsp;2003 functional level to make use of a Cross-Realm trust between a non-Windows realm and its parent domain there are some operations that need to be completed. This is not available in
 Windows&nbsp;2000 or Windows&nbsp;Server&nbsp;2003 interim functional level forests.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_create_a_transitive_cross-realm_trust"></a><a name="_Toc251573446"><span style="font-family:arial;font-size:24px;">To create a transitive cross-realm trust</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Mark the Cross-Realm trust as ForestTransitive.&nbsp; To do this run the following netdom.exe command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">netdom trust &lt;Parent Domain&gt; /domain:&lt;non-Windows Realm&gt; /ForestTransive:Yes</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; netdom trust CONTOSO.COM /domain:REALM.FABRIKAM.COM /ForestTransitive:Yes</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Add the appropriate Top Level Name (DNS Name Suffix) to the Cross-Realm Trust.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">netdom trust &lt;Parent Domain&gt; /domain:&lt;non-Windows Realm&gt; /AddTLN:&lt;DNS suffix of non-Windows Realm&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; netdom trust CONTOSO.COM /domain:REALM.FABRIKAM.COM /AddTln:realm.fabrikam.com</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Confirm the name suffix addition wit\&gt; netdom trust CONTOSO.COM /domain:REALM.FABRIKAM.COM /ForestTransitive:Yes</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Add the appropriate Top Level Name (DNS Name Suffix) to the Cross-Realm Trust.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">netdom trust &lt;Parent Domain&gt; /domain:&lt;non-Windows Realm&gt; /AddTLN:&lt;DNS suffix of non-Windows Realm&gt;</span></p>
<p class="TextinList1" style="margh the following command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">netdom trust &lt;Parent Domain&gt; /NameSuffixes:&lt;non-Windows Realm&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">For example:
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; netdom trust CONTOSO.COM /NameSuffixes:REALM.FABRIKAM.COM</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Output should look similar to the following:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">C:\&gt;netdom trust CONTOSO.COM /NameSuffixes:REALM.FABRIKAM.COM</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type&nbsp;Status&nbsp;&nbsp;&nbsp;Notes</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">---------------------------- ------ -------- -----</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1. *.realm.fabrikam.com Name Suffix &nbsp;&nbsp;Enabled</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The command completed successfully.</span></p>
<div style="border-width:medium medium 1pt;border-style:none none solid;border-color:currentColor currentColor windowtext;padding:0in 0in 6pt;">
<h1 style="margin:24pt 0in 6pt;"><a name="Using_MIT_GSS_Sample_Applications"></a><a name="_Toc251573448"><span style="font-family:arial;">Using MIT GSS Sample Applications</span></a><a name="z1061afcd6d7c4033b8730931f958b3e5"></a></h1>
</div>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Kerberos GSS-APIs. These sample applications run properly on a UNIX system configured to use a Windows&nbsp;Server&nbsp;2003 KDC. The samples are located in the following directory:</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">/&lt;MIT_Extraction_Directory&gt;/src/appl/gss-sample</span><span style="font-size:13px;">
</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Configure the UNIX host to use the Windows&nbsp;Server&nbsp;2003 KDC, create a user account in the Active Directory, and set the password on the account. Verify that you can use kinit to authenticate
 from the UNIX host to the Windows&nbsp;Server&nbsp;2003 KDC.</span></p>
<h2 style="margin:0.25in 0in 3pt;"><a name="GSS_Sample_Client_and_Server_Applications"></a><a name="_Toc251573449"><span style="font-family:arial;">GSS Sample Client and Server Applications</span></a></h2>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">You can also run the GSS sample application, GSS server, and GSS client using Windows&nbsp;Server&nbsp;2003 KDC as the authentication server. See the readme file in the gss-sample directory for
 more information.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_create_the_sample_service_account_and_keytab"></a><a name="_Toc251573450"><span style="font-family:arial;font-size:24px;">To create the sample service account and keytab</span></a></h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; On the Windows&nbsp;Server&nbsp;2003 KDC create a user account with the name sample.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Create the keytab using the following command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt;ktpass –princ sample/krbhost.reskit.com@RESKIT.COM –mapuser</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">RESKIT\sample –pass Password1 –ptype KRB5_NT_SRV_INST –out</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">sample.keytab</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Copy sample.keytab over to KRBHOST.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; Import sample.keytab into the default keytab:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">#
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: rkt sample.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: wkt /etc/krb5.keytab</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_run_the_GSS_sample_client_and_server_application_using_the_Windows_Server_TwentyOhThree_KDC"></a><a name="_Toc251573451"><span style="font-family:arial;font-size:24px;">To run the GSS sample client and server application
 using the Windows&nbsp;Server&nbsp;2003 KDC</span></a><span style="font-size:24px;"> </span>
</h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Start the GSS server. Text similar to the following will be displayed.</span></p>
<p class="TextinList1" nt-family:courier new;font-size:8pt;">ktutil</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: rkt sample.keytab</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">ktutil: wkt /etc/krb5.keytab</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_run_the_GSS_sample_client_and_server_application_using_the_Windows_Server_TwentyOhThree_KDC"></a><a name="_Toc251573451"><span style="font-family:arial;font-size:24px;">To run the GSS sample client and server application
 using the Windows&nbsp;Server&nbsp;2003 KDC</span></a><span style="font-size:24px;"> </span>
</h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nstyle="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># gss-server sample@&lt;host&gt;</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Authenticate with an account from the non-Windows Realm:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># kinit &lt;user&gt;@&lt;realm&gt;</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Start the GSS client:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">#
</span><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">gss-client &lt;host&gt; sample@&lt;host&gt; &quot;Message&quot;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The following example output shows the result of running the GSS client and server application on KRBHOST with the Windows&nbsp;Server&nbsp;2003 KDC. The user is authenticated as teresa from the
 REALM.RESKIT.COM Kerberos realm, and the host is krbhost.reskit.com.</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># gss-server sample@krbhost.reskit.com</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_MUTUAL_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_REPLAY_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_CONF_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_INTEG_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Accepted connection: &quot;teresa@REALM.RESKIT.COM&quot;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Received message: &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">NOOP token</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># kinit teresa@REALM.RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Password for teresa@REALM.RESKIT.COM:</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># gss-client krbhost.reskit.com sample@krbhost.reskit.com &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Sending init_sec_context token (size=1160)...continue needed...</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_MUTUAL_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_REPLAY_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_CONF_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_INTEG_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">&quot;teresa@REALM.RESKIT.COM&quot; to &quot;sample/krbhost.reskit.com@RESKIT.COM&quot;, lifetime 36000, flags 136, locally initiated, open</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Name type of source name is { 1 2 840 113554 1 2 2 1 }.</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Mechanism { 1 2 840 113554 1 2 2 } supports 8 names</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">0: { 1 2 840 113554 1 2 1 1 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">1: { 1 2 840 113554 1 2 1 2 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">2: { 1 2 840 113554 1 2 1 3 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">3: { 1 2 840 113554 1 2 1 4 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">4: { 1 3 6 1 5 6 2 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">5: { 1 3 6 1 5 6 4 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">6: { 1 2 840 113554 1 2 2 1 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">7: { 1 2 840 113554 1 2 2 2 }</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Signature verified.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The MIT Kerberos Krb5 release of the GSS samples uses DNS reverse name lookups to identify the target server principal name. Therefore, the principal name for the GSS service must be
 in the form service/&lt;fully qualified hostname&gt;. You will need to either add a ptr record in DNS for the IP address of the host or create an entry in the /etc/hosts file.&nbsp;
</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_test_GSS_API_RFC-1964_Interoperability"></a><a name="_Toc251573452"><span style="font-family:arial;font-size:24px;">To test GSS API (RFC-1964) Interoperability</span></a></h3>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">You can demonstrate the interoperability between the Windows&nbsp;Server&nbsp;2003 Kerberos Security Support Provider and the GSS-Krb5 mechanism by running the Krb5 GSS sample applications on UNIX
 and a port of the GSS sample applications on Windows&nbsp;Server&nbsp;2003.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The source code for the sample applications for the GSS client, and for the GSS server port to Windows&nbsp;Server&nbsp;2003 using SSPI are available from MIT at: http://web.mit.edu/jaltman/Public/KFW/ms_samples_security_sspi_gss.zip
 The calls to GSS API were replaced with equivalent calls to SSPI, the corresponding Win32 network security interface.</span></p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_run_the_GSS_server_application_on_the_Windows_Server_TwentyOhThree_member"></a><a name="_Toc251573453"><span style="font-family:arial;font-size:24px;">To run the GSS server application on the Windows&nbsp;Server&nbsp;2003
 member</span></a><span style="font-size:24px;"> </span></h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Create a sample2 service account with the following example command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">C:\&gt;net user sample2 Password1 /add
</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Set the servicePrincipalName on the service account with the following example command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">C:\&gt;setspn –A sample2/ws03member1.reskit.com RESKIT\sample2</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; Run the SSPI-version of GSS server with the following example command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">c:\&gt;gssserver sample2/ws03member1.reskit.com Password1 RESKIT.COM
</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; On the UNIX system, start the GSS client, and specify the Windows&nbsp;Server&nbsp;2003 host and service name. Note that the service name is in the form service@&lt;Windows
 Server 2003 host DNS name&gt;. An example of the command and the subsequent output (from the sample) follows.&nbsp;
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;"># gssclient ws03member1.reskit.com sample2@ws03member1.reskit.com &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The output of gssserver running on Windows&nbsp;Server&nbsp;2003 looks similar to the following:</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; gssserver</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">Usage: gssserver [-port port] [-verbose] [-once] [-logfile file]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [-confidentiality] [-delegate] [-integrity] [-use_session_key]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [-replay_n the form service@&lt;Windows
 Server 2003 host DNS name&gt;. An example of the command and the subsequent output (from the sample) follows.&nbsp;
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;"># gssclient ws03member1.reskit.com sample2@ws03member1.reskit.com &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The output of gssserver running on Windows&nbsp;Server&nbsp;2003 looks similar to the following:</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; gssserver</span></p>
<p style="margin:3pt 0in;"><span style="fdetect] [-sequence_detect]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 service_name service_password service_realm</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:\&gt; gssserver sample2 Pass</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">word1 RESKIT</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_MUTUAL_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_REPLAY_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_CONF_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Accepted connection using mechanism Kerberos</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Accepted connection: &quot;RESKIT\Teresa&quot;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Received message : &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">reading token length: No error</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">The output of gss-client running on the MIT client looks similar to the following:</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># gss-client ws03member1.reskit.com sample2@ws03member1.reskit.c om &quot;Kerberos interop works great.&quot;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Sending init_sec_context token (size=1146)...continue needed...</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_MUTUAL_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_CONF_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_INTEG_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_INTEG_FLAG</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Name type of source name is { 1 2 840 113554 1 2 2 1 }.</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Name type of source name is { 1 2 840 113554 1 2 2 1 }.</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Mechanism { 1 2 840 113554 1 2 2 } supports 8 names</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">0: { 1 2 840 113554 1 2 1 1 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">1: { 1 2 840 113554 1 2 1 2 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">2: { 1 2 840 113554 1 2 1 3 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">3: { 1 2 840 113554 1 2 1 4 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">4: { 1 3 6 1 5 6 2 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">5: { 1 3 6 1 5 6 4 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">6: { 1 2 840 113554 1 2 2 1 }</span></p>
<p style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">7: { 1 2 840 113554 1 2 2 2 }</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Signature verified.</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">You can use Klist to verify the tickets issued to the MIT client system. The output will be similar to the following:</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># klist</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Ticket cache: FILE:/tmp/krb5cc_0</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Default principal: teresa@REALM.RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Valid starting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expires&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Service principal</span></p>
<p style="margin:3pt 0in;"><span class="CodeE"font-family:arial;font-size:13px;">You can use Klist to verify the tickets issued to the MIT client system. The output will be similar to the following:</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;"># klist</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Ticket cache: FILE:/tmp/krb5cc_0</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Default principal: teresa@REALM.RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Valid starting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expires&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Service principal</span></p>
<p style="margmbedded" style="font-family:courier new;font-size:8pt;">09/19/06 10:29:31&nbsp;&nbsp;&nbsp;05/20/06 10:29:31&nbsp;&nbsp;krbtgt/REALM.RESKIT.COM@REALM.RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">09/19/06 10:30:04&nbsp;&nbsp;&nbsp;05/20/06 10:29:31&nbsp;&nbsp;krbtgt/RESKIT.COM@REALM.RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">09/19/06 10:29:45&nbsp;&nbsp;&nbsp;05/19/06 20:29:45&nbsp;&nbsp;sample2/ws03member1.reskit.com@RESKIT.COM</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Kerberos 4 ticket cache: /tmp/tkt0</span></p>
<p style="margin:3pt 0in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">klist: You have no tickets cached</span></p>
<p class="TextinList1" style="margin:3pt 0in;">&nbsp; </p>
<h3 style="margin:0.25in 0in 3pt;"><a name="To_run_the_GSS_client_application_using_the_Windows_Server_TwentyOhThree_member_against_an_MIT_GSS_server"></a><a name="_Toc251573454"><span style="font-family:arial;font-size:24px;">To run the GSS client application
 using the Windows&nbsp;Server&nbsp;2003 member against an MIT GSS server</span></a><span style="font-size:24px;">
</span></h3>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">1.&nbsp;&nbsp; Use the sample account and keytab from the example above.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">2.&nbsp;&nbsp; Run the MIT version of GSS server with the following example command:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">$ gss-server sample@krbhost.reskit.com</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">3.&nbsp;&nbsp; On the Windows&nbsp;Server&nbsp;2003 system, start gssclient.exe to connect with the MIT GSS server.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">C:&gt; gssclient krbhost.reskit.com sample/krbhost.reskit.com &quot;Kerberos interop works great!&quot;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The output of gss-client running on Windows&nbsp;Server&nbsp;2003 looks similar to the following:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt; gssclient krbhost.reskit.com sample/krbhost.reskit.com &quot;Kerberos interop works great!&quot;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Context flag: ISC_REQ_CONFIDENTIALITY</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Context flag: ISC_REQ_REPLAY_DETECT</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Context flag: ISC_REQ_MUTUAL_AUTH</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">calling host krbhost.reskit.com, name sample/krbhost.reskit.com, msg &quot;Kerberos interop works great!&quot;.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Sending init_sec_context token (size=1201)...continue needed...
</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_MUTUAL_FLAG</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_REPLAY_FLAG</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_SEQUENCE_FLAG</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">context flag: GSS_C_CONF_FLAG</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Block Size is 1, inbuffer = 30</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Signature verified.</span></p>
<p class="NumberedList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">4.&nbsp;&nbsp; On the Windows&nbsp;Server&nbsp;2003 system, use Klist to verify the tickets issued by the Windows&nbsp;Server&nbsp;2003 KDC.</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">C:&gt; klist tickets</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">The output of Klist running on Windows&nbsp;Server&nbsp;2003 looks similar to the following:</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">C:&gt; klist tickets</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Cached Tickets: (2)</span></p>
<p class="TextinList1" style="margin:3pt 0in 3pt 0.25in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in 3pt 0.5in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Server: krbtgt/RESKIT.COM@RESKIT.COM</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">KerbTicket Encryption Type: RSADSI RC4-HMAC(NT)</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">End Time: 9/19/2006 20:52:06</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Renew Time: 9/26/2006 10:52:06</span></p>
<p class="TextinList3" style="margin:3pt 0in 3pt 0.5in;"><span style="font-family:arial;font-size:13px;">&lt;blank line&gt;</span></p>
<p style="margin:3pt 0in 3pt 0.5in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Server: sample/krbhost.reskit.com@RESKIT.COM</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">KerbTicket Encryption Type: RSADSI RC4-HMAC(NT)</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">End Time: 9/19/2006 20:52:06</span></p>
<p style="margin:3pt 0in 3pt 0.75in;"><span class="CodeEmbedded" style="font-family:courier new;font-size:8pt;">Renew Time: 9/26/2006 10:52:06</span></p>
<p>&nbsp;</p>

</div>
    
    