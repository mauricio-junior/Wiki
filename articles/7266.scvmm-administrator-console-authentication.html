---
layout: default
title: 'SCVMM Administrator Console Authentication - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Introduction">Introduction</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Scenario_1_SCVMM_server_Successful_Authentication_with_Directory_Service">Scenario 1 : SCVMM server Successful Authentication with Directory Service.-fragment page no-wrapper" id="fragment-6615">
<div class="content-fragment-inner fiji-content-fragment-inner"><div class="content-fragment-top fiji-content-fragment-top"></a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Scenario_2_SCVMM_server_Unsuccessful_Authentication_with_Directory_Service">Scenario 2 : SCVMM server Unsuccessful Authentication with Directory Service.</a></li><li class="hierarchy-item"><a href="#Resolution">Resolution :</a></li><li class="hierarchy-item"><a href="#Conclusion">Conclusion:</a></li></ul><div class="hierarchy-list-footer"> </div></div> <br />
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;"></span></strong>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<strong>
<h3><a name="Introduction"></a><span style="background-color:#d3d3d3;font-family:calibri;">Introduction</span></h3>
</strong>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;"><br />
You install and configure System Central Virtual Machine Manager 2008 R2 on Windows Server 2008 R2, which is part of active directory domain. Administrator will not be able to logon to SCVMM administrator console if the server moves to different sub network
 which cannot authenticate to Active directory domain. </span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<strong>
<h4><a name="Scenario_1_SCVMM_server_Successful_Authentication_with_Directory_Service"></a><span style="background-color:#d3d3d3;font-family:calibri;">Scenario 1 : &nbsp;SCVMM server Successful Authentication with Directory Service.</span></h4>
</strong>
<p>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">In this example, Microsoft SCVMM server is able to authenticate with active directory. The pre-requisite is SCVMM server should be able to validate the logged on active directory user credentials
 / the active directory user credentials specific to SCVMM console. </span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">Solution Diagram
</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/7674.Untitled.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/7674.Untitled.png" style="border:0px solid currentcolor;" /></a></span></strong></p>
<p style="margin:0in 0in 10pt;">&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span><span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Figure : Data Center Configuration<br />
<br />
&nbsp; <br />
</strong></span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">Server Checklist
</span></strong></p>
<p>&nbsp;</p>
<table border="1" cellspacing="0" cellpadding="0" style="border:currentcolor;border-collapse:collapse;">
<tbody>
<tr>
<td valign="top" style="padding:0in 5.4pt;border:1pt solid windowtext;width:239.4pt;background-color:transparent;">
<p><strong><span style="font-family:calibri;">Servers</span></strong></p>
</td>
<td valign="top" style="border-width:1pt 1pt 1pt medium;border-style:solid solid solid none;border-color:windowtext windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><strong><span style="font-family:calibri;">Description</span></strong></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Cisco 1800 Series Integrated Service Routers
</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Edge router connecting to internet </span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Catalyst 3750 (layer 3 ) switch </span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Configured with VLAN, NAT </span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Catalyst 6500 Layer 3 switch</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Infrastructure servers connects to the switch</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Microsoft Hyper-v Server </span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Host virtual machines</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:noyer 3 switch</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Infrastructure servers connects to the switch</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparene solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Microsoft SCVMM server </span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Manage virtual hosts </span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Microsoft Domain Controller</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Provide authentication to clients and users</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Additional domain controller</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Provide authentication to clients and users and Fault tolerance</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">NAS Share</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Host VMWare virtual machines</span></p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Cisco 2800 series routers </span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">Connecting between datacenter for DR </span>
</p>
</td>
</tr>
<tr>
<td valign="top" style="border-width:medium 1pt 1pt;border-style:none solid solid;border-color:#d4d0c8 windowtext windowtext;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">&nbsp;</span></p>
</td>
<td valign="top" style="border-width:medium 1pt 1pt medium;border-style:none solid solid none;border-color:#d4d0c8 windowtext windowtext #d4d0c8;padding:0in 5.4pt;width:239.4pt;background-color:transparent;">
<p><span style="font-family:calibri;">&nbsp;</span></p>
</td>
</tr>
</tbody>
</table>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">Description:
</span></strong></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">Upon user logon to windows servers, below Kerberos authentication takes place in case of domain controller availability</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp; A typical Kerberos high level user authentication is shown below
</span></strong></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/5672.Untitled1.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/5672.Untitled1.png" style="border:0px solid currentcolor;" /></a></span></p>
<p><br clear="all" />
&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">After successful logon to windows console, when administrator / user launches SCVMM administrator console, it establishes 2 way authentication between the
<strong>User domain </strong>and <strong>SCVMM domain </strong>and post validation user / administrator would be able to manage the resources successfully.
</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<strong>
<h3><a name="Scenario_2_SCVMM_server_Unsuccessful_Authentication_with_Directory_Service"></a><span style="background-color:#d3d3d3;font-family:calibri;">Scenario 2 :&nbsp; SCVMM server Unsuccessful Authentication with Directory Service.</span></h3>
</strong>
<p>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">In this example , user is located remote and will not be able to authenticate with the domain controller. The pre-requisite is the client or the server from where the user is authenticating should
 be part of domain. </span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">Solution Diagram</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4834.Untitled3.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4834.Untitled3.png" style="border:0px solid currentcolor;" /></a><a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/0211.Untitled.png"></a></span></strong>
</p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<strong>Figure: Data Center Configuration&nbsp; - 2 </strong></span>
<p>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">Description:
</span></strong></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">The windows client or server is not part of the network where the Domain controller is located. Windows client / server successfully authenticates with cached credentials. The authentication process
 of the client or server who is not part of domain is different . </span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">Windows uses two authentication protocol packages
</span></p>
<p><span><span style="font-family:calibri;">a)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:calibri;"><strong>Lan Manager 2 Protocol <br />
</strong></span><span><span style="font-family:calibri;">b)</span><span style="font-style:normal;font-weight:normal;font-size:7pt;line-height:normal;font-family:&#39;times new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:calibri;"><strong>Kerberos Protocol</strong></span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">Kerberos protocol is used only when the client / server is able to authenticate with domain controller. But in our above example, client / server uses
<strong>Lan Manager 2, </strong>and calls <strong>Msv1_0.dll </strong>authentication package which validates the user credentials with
<strong>SAM </strong>database.</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">Post successful logon using cached credentials, when user launches
<strong>SCVMM administrator console</strong>, he receives an error message </span>
</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span></span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p simes new roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="margin:0in 0in 10pt;"><span style="font-family:calibri;">Though the user is able to successfully authenticate, SCVMM is not able to establish two way trust between the domain which results in the above error message.
</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<strong>
<h3><a name="Resolution"></a><span style="background-color:#d3d3d3;font-family:calibri;">Resolution :</span></h3>
</strong>
<p>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">The server or client should be able to authenticate with the SCVMM domain, to happen users should either
</span></p>
<ul>
<li>Establish VPN connection with Domain Controller </li><li>Direct access connectivity with Domain Controller </li></ul>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong></strong></p>
<strong>
<h3><a name="Conclusion"></a><span style="background-color:#d3d3d3;font-family:calibri;">Conclusion:</span></h3>
</strong>
<p>&nbsp;</p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">This articles explains the domain authentication process of User and SCVMM server along with the solution diagrams which helps administrators to evaluate the scenario and explain the Dll’s involved
 during authentication in high level. </span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><strong><span style="font-family:calibri;">&nbsp;</span></strong></p>
<p style="margin:0in 0in 10pt;"><span style="font-family:calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>

</div>
    
    
