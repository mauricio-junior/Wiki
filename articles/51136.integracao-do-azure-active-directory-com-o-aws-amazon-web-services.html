---
layout: default
title: 'Integração do Azure Active Directory com o AWS (Amazon Web Services) - artigos TechNet - Brasil (Português) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p><div class="table-of-contents"><h2 class="title">Sumário</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Introducao">Introdução</a></li><li class="hierarchy-item"><a href="#Criacao_Console_AWS">Criação Console AWS</a></li><li class="hierarchy-item"><a href="#Provisionando_a_Aplicacao">Provisionando a Aplicação</a></li><li class="hierarchy-item"><a href="#Funcionamento_do_Acesso">Funcionamento do Acesso</a></li></ul><div class="hierarchy-list-footer"> </div></div><br />
<br />
</p>
<h2><a name="Introdução"></a><a name="Introdução"></a><a name="Introdução"></a><a name="Introdução"></a><a name="Introdução"></a><a name="Introducao"></a>Introdução<br />
<br />
</h2>
<p>Nesse tutorial irei demostrar para vocês como fazer a integração do Azure AD com a AWS, esse artigo tem a visão de utilizar a identidade única para fazer o login com seu usuário do AD ou Azure AD diretamente no console da AWS.</p>
<p><a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/aws-signon2-1.png"><img width="444" height="242" title="aws-signon2" alt="aws-signon2" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/aws-signon2_thumb-1.png" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>O SSO entre o Azure AD e Amazom Web Service, funciona de uma maneira diferente, nessa integração devemos criar o usuário dentro da console da AWS para que seja feita o merge entre as contas, esse é o único ponto onde devemos nos atentar, lembrando que só
 é uma criação de usuário que não precisa de senha.<br />
Vamos adicionar o app da AWS na galeria de aplicativos SaaS do Microsoft Azure.<br />
<br />
</p>
<h2><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação_Portal_Azure"></a><a name="Criação_da_Aplicação"></a><a name="Criação_da_Aplicação"></a><a name="Criação_da_Aplicação"></a><a name="Criação_da_Aplicação"></a><a name="Criação_da_Aplicacao"></a>Criação
 da Aplicação Portal Azure</h2>
<p>No portal do Microsoft Azure, vamos em “<strong>Azure Active Directory</strong>”, em seguida “<strong>Enterprise Applications</strong>” e clique em “<strong>All Applications</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_01.jpg"><br />
<img width="484" height="472" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_01" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_01" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_01_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Em
 seguida clique em “<strong>New Application</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_02.jpg"><br />
<img width="484" height="204" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_02" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_02" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_02_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Agora
 em pesquisa procure por “<strong>Amazon Web Services (AWS)</strong>” e selecione a aplicação.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_03.jpg"><br />
<img width="484" height="312" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_03" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_03" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_03_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Em
 seguida você pode mudar o nome da aplicação para ficar mais fácil de saber qual cliente está integrado. Após mudar o nome clique em “<strong>Add</strong>” e aguarde o provisionamento da aplicação.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_04.jpg"><br />
<img width="484" height="370" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_04" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_04" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_04_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Pronto
 a aplicação está provisionada, agora vamos até a opção de “<strong>Single Sing-On</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_05.jpg"><br />
<img width="484" height="466" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_05" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_05" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_05_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Em
 Single “<strong>Sing-on</strong>” vamos escolher a opção “<strong>SAML-based Sing-on</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_06.jpg"><br />
<img width="484" height="198" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_06" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_06" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_06_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Essa etapa é)_05" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_05_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Em
 Single “<strong>Sing-on</strong>” vamos escolher a opção “<strong>SAML-based Sing-on</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_06.jpg"><br />
<img width="484" height="198" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_06" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_06" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_06_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-le muito importante pois temos que adicionar alguns parâmetros para que funcione 100% a integração com a AWS.<br />
Vá na opção “<strong>Show advanced URL settings</strong>”, após expandir essa opção vamos em “<strong>Identifier</strong>” e adicione a seguinte informação “<strong>urn:amazon:webservices</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_07.jpg"><br />
<img width="484" height="206" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_07" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_07" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_07_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Em seguidas vamos adicionar dois atributos em “<strong>User Attributes</strong>”, para isso selecione
<strong>“View and edit all other user attributes</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_08.jpg"><br />
<img width="484" height="174" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_08" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_08" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_08_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora clique em “<strong>Add Attribute</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_09.jpg"><br />
<img width="484" height="198" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_09" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_09" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_09_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Agora adicione as seguintes regras:</p>
<table border="0" cellspacing="0" cellpadding="2">
<tbody>
<tr>
<td valign="top"><strong>Nome do Atributo</strong></td>
<td valign="top"><strong>Valor do Atributo</strong></td>
<td valign="top"><strong>Namespace</strong></td>
</tr>
<tr>
<td valign="top">RoleSessionName</td>
<td valign="top">user.userprincipalname</td>
<td valign="top"><a title="https://aws.amazon.com/SAML/Attributes" href="https://aws.amazon.com/SAML/Attributes">https://aws.amazon.com/SAML/Attributes</a></td>
</tr>
<tr>
<td valign="top">Role</td>
<td valign="top">user.assingroles</td>
<td valign="top"><a title="https://aws.amazon.com/SAML/Attributes" href="https://aws.amazon.com/SAML/Attributes">https://aws.amazon.com/SAML/Attributes</a></td>
</tr>
</tbody>
</table>
<p><em><br />
*Lembrando que os atributos respeitam o “<strong>case sensitive</strong>”.</em><br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_10.jpg"><img width="284" height="377" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_10" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_10" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_10_thumb.jpg" style="border-width:0px;border-style:solid;display:inline;" /></a><a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_11.jpg"><img width="284" height="372" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_11" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_11" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_11_thumb.jpg" style="border-width:0px;border-style:solid;display:inline;" /></a><br />
Agora vamos fazer o download do certificado “<strong>Metadados XML</strong>” e salvar em local seguro em seu computador. Um detalhe muito importante, altere o “<strong>Signing Algorith</strong>” para “<strong>SHA 1</strong>”, por padrão ela vem em “<strong>SHA
 256</strong>” e não funcionara a integração. Em seguida iremos setar o certificado como ativo, depois vamos “<strong>Salvar</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_24.jpg"><br />
<img width="484" height="234" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_24" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_24" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_24_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_12-1.jpg"><br />
<img width="484" height="232" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_12" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_12" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_12_thumb-1.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<h2><a name="Criação_Console_AWS"></a><a name="Criacao_Console_AWS"></a>Criação Console AWS</h2>
<p>Pronto a primeira parte está configurada, agora vamos ao console da AWS. Vamos procurar a opção IAM(<strong>Identity and Access Management</strong>).<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_13.jpg"><br />
<img width="484" height="220" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_13" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_13" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_13_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora vamos criar um provedor de identidade, vá até id;margin-right:auto;margin-left:auto;d“<strong>Identity Provider</strong>” e clique em “<strong>Create Provider</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_14.jpg"><br />
<img width="484" height="270" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_14" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_14" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_14_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Em “<strong>Create Provider</strong>” selecione o tipo de provedor “<strong>SAML</strong>”, de um nome para esse provedor e seguida faça o upload do “<strong>Metadados XML</strong>”, em seguida clique em “<strong>Next</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_15.jpg"><br />
<img width="484" height="222" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_15" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_15" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_15_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Em seguida clique em “<strong>Create</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_16.jpg"><br />
<img width="484" height="222" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_16" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_16" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_16_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Pronto
 o provedor de identidade foi criado com sucesso.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_17.jpg"><br />
<img width="484" height="144" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_17" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_17" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_17_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Agora
 vamos criar uma regra, vá em “<strong>Roles</strong>” e clique em “<strong>Create Roles</strong>”<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_18.jpg"><br />
<img width="484" height="274" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_18" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_18" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_18_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Agora
 vamos escolher a identidade confiável “<strong>SAML</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_19.jpg"><br />
<img width="484" height="266" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_19" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_19" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_19_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Em
 seguida selecione o provedor de identidade que foi criado e selecione a permissão “<strong>Allow programmatic and AWS Management Console access</strong>”, em seguida clique em “<strong>Next Permissions</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_20.jpg"><br />
<img width="484" height="248" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_20" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_20" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_20_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Agora
 selecione a politica, nesse caso estou dando permissão “<strong>Full</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_21.jpg"><br />
<img width="484" height="248" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_21" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_21" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_21_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Agora
 de um nome para essa regra de acesso, em seguida clique em “<strong>Create Role</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_22.jpg"><br />
<img width="484" height="266" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_22" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_22" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_22_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a>Pronto
 a regra foi criada com sucesso.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_23.jpg"><br />
<img width="484" height="146" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_23" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_23" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_23_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Agora vamos criar um usuário para fazer a conexão entre o Azure ad e a AWS. Vá em “<strong>User</strong>” e “<strong>Add User</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_25.jpg"><br />
<img width="484" height="304" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_25" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_25" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_25_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora vamos dar um nome para o usuário, em seguida selecione o tipo de acesso “<strong>Programmatic Access”
</strong>e clique e “<strong>Next Permissions</strong>”.<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_26.jpg"><br />
<img width="484" height="226" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_26" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_26" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_26_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora vamos associar a politica, selecione “<strong>Attach existing policies directly</strong>”, em seguida clique em “<strong>Next Review</strong>” em seguida “<strong>Create User</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_27.jpg"><br />
<img width="484" height="308" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Seegra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_26.jpg"><br />
<img width="484" height="226" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_26" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_26" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_26_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora vamos associar a politica, selecione “<strong>Attach existing policies directly</strong>”, em seguida clique em “<strong>Next Review</strong>” em seguida “<strong>Create User</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%Crvices)_27" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_27" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_27_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_28.jpg"><br />
<img width="484" height="210" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_28" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_28" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_28_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Agora você pode fazer o download do arquivo”.CSV” ou pode ver o “Secret Access Key” do seu usuário, porque precisamos dessa informação. Iremos voltar ao Azure AD para adicionar essas informações no provisionamento das Roles.</p>
<p><a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_29.jpg"><br />
<img width="484" height="194" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_29" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_29" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_29_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<h2><a name="Provisionando_a_Aplicação"></a><a name="Provisionando_a_Aplicacao"></a>Provisionando a Aplicação&nbsp;</h2>
<p>Vá ao Azure AD e selecione a aplicação e selecione “<strong>Provisioning”, </strong>
por padrão ela vem como manual, vamos alterar para &quot;<strong>Automático</strong>”, em seguida vamos adicionar as seguintes informações nos campos “<strong>clientsecret</strong>” e “<strong>Secret Token</strong>”. Depois das informações no campo clique em “<strong>Test
 Connection</strong>” depois clique em “<strong>Save</strong>”.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_30.jpg"><br />
<img width="484" height="212" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_30" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_30" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_30_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Pronto a comunicação entre AWS e Azure AD está funcionando.</p>
<p><a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_31.jpg"><img width="484" height="180" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_31" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_31" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_31_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Por ultimo em “<strong>Settings</strong>” vá em “<strong>Provisioning Status</strong>” deixe como “<strong>On</strong>” e clique em “<strong>Save</strong>”. Ele demora um pouco para provisionar.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_32.jpg"><br />
<img width="484" height="304" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_32" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_32" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_32_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Agora vamos criar um usuário sem senha no console da AWS.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_33.jpg"><br />
<img width="484" height="182" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_33" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_33" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_33_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<p>Após criar o usuário voltamos na aplicação no portal do Azure, e iremos adicionar os usuários que terão acesso a integração. Escolha o usuário e atribua a regra que foi criada dentro da AWS.</p>
<p><a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_34.jpg"><img width="484" height="146" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_34" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_34" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_34_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<h2><a name="Funcionamento_do_Acesso"></a>Funcionamento do Acesso</h2>
<p>Pronto o processo de integração está pronto, vamos acessar o “<strong>MyApps</strong>” da Microsoft, na URL:
<a title="http://myapps.microsoft.com/" href="http://myapps.microsoft.com/">http://myapps.microsoft.com/</a>. Ao acessar o aplicativo está disponível basta da um clique, que ele vai fazer o SSO do seu usuário dentro da console da AWS.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_35.jpg"><br />
<img width="484" height="274" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_35" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_35" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Am"border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a></p>
<h2><a name="Funcionamento_do_Acesso"></a>Fazon-Web-Services_35_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Pronto estamos acessando o console da AWS, via federação entre Azure AD e Amazon Web Services. Como podemos reparar ele faz a leitura da role e do usuário.<br />
<a href="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_36.jpg"><br />
<img width="484" height="266" title="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_36" alt="Integração_do_Azure_Active_Directory_com_o_AWS_(Amazon Web Services)_36" src="http://micheljatoba.com.br/wp-content/uploads/2018/01/Integra%C3%A7%C3%A3o_do_Azure_Active_Directory_com_o_AWS_Amazon-Web-Services_36_thumb.jpg" style="border-width:0px;border-style:solid;margin-right:auto;margin-left:auto;display:block;float:none;" /></a><br />
Obrigado e até o próximo post.</p>

</div>
    
    
