---
layout: default
title: Software to Services - A Journey by Microsoft - TechNet Articles - United States (English) - TechNet Wiki
weight: 3
---

<div class="post-content user-defined-markup">

<p>Microsoft recently transformed the strategic direction of the company by expanding its already extensive software products and cloud services capabilities as part of the process of establishing itself as a major cloud services providerent-6615">
<div class="content-fragment-inner fiji-content-fragment-inner"><div class="content-fragment-top fiji-content-fragment-top"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 fiji-r4"></div></div><div class="content-fragment-content">

<div class="full-post-header"></div>
<div class="full-post">
    <h1 class="post-name">Software to Services - A Journey by Microsoft</h1>
    <div class="post-rating"><span id="ctl00_ctl00_content_content_ctl00_w_6615__648663c5_ctl0. Microsoft Services
 describes key elements of that paradigm change — including actions taken to overcome specific challenges — in this white paper.<br />
<br />
<strong>Authors:&nbsp;<br />
</strong>Angus Foreman Architect, Microsoft Services<br />
David Howe, Director, Architecture Services, Microsoft Services <br />
Ulrich Homann, Chief Architect, Worldwide Enterprise Services, Microsoft Services
</p>
<hr />
<p style="text-align:center;"><strong>Note:<br />
</strong>The official version of this document is <a href="http://social.technet.microsoft.com/wiki/contents/articles/4340/revision/1.aspx">
version 1</a>.</p>
<hr />
<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Strategic_Change_Microsoft_Reinvents_Itself">1 Strategic Change: Microsoft Reinvents Itself</a></li><li class="hierarchy-item"><a href="#Why_Shift_into_Cloud_Services">2 Why Shift into Cloud Services?</a></li><li class="hierarchy-item"><a href="#How_Can_Evolutionary_Steps_Achieve_Revolutionary_Change">3 How Can Evolutionary Steps Achieve Revolutionary Change?</a></li><li class="hierarchy-item"><a href="#Synopsis_Re-Engineering_Microsoft_as_a_Cloud_Services_Provider">4 Synopsis: Re-Engineering Microsoft as a Cloud Services Provider</a></li><li class="hierarchy-item"><a href="#Mini_Case_Study_Organizational_Change_Throughout_Microsoft">5 Mini Case Study: Organizational Change Throughout Microsoft</a></li><li class="hierarchy-item"><a href="#Mini_Case_Study_Architectural_Change_at_Microsoft_Exchange">6 Mini Case Study: Architectural Change at Microsoft Exchange</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Internet_Latency_mdash_Now_What">6.1 Internet Latency — Now What?</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Identify_asynchronous_transactions_that_do_not_need_to_lsquo_stop_rsquo_the_user">6.1.1 Identify asynchronous transactions that do not need to ‘stop’ the user</a></li><li class="hierarchy-item"><a href="#Load_data_first_that_the_user_expects_to_use_immediately">6.1.2 Load data first that the user expects to use immediately</a></li><li class="hierarchy-item"><a href="#Maintain_user_functionality_even_during_a_failure">6.1.3 Maintain user functionality even during a failure</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Unpredictable_Workloads_and_Consumption_mdash_On_a_Global_Scale">6.2 Unpredictable Workloads and Consumption — On a Global Scale</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Quarantine_an_individual_mailbox_if_it_disrupts_a_shared_service_environment">6.2.1 Quarantine an individual mailbox if it disrupts a shared service environment</a></li><li class="hierarchy-item"><a href="#Profile_workloads_to_better_manage_them_in_a_multi-tenant_cloud_environment">6.2.2 Profile workloads to better manage them in a multi-tenant cloud environment</a></li><li class="hierarchy-item"><a href="#Combine_patterns_to_mitigate_fluctuating_consumption">6.2.3 Combine patterns to mitigate fluctuating consumption</a></li><li class="hierarchy-item"><a href="#Adopt_scale_units_in_a_cloud_topology_to_improve_service_quality_and_profit">6.2.4 Adopt scale units in a cloud topology to improve service quality and profit</a></li></ul><div class="hierarchy-list-footer"> </div></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Mini_Case_Study_Design_Change_at_Microsoft_SQL_Server">7 Mini Case Study: Design Change at Microsoft SQL Server</a><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Componentization_and_Abstraction">7.1 Componentization and Abstraction</a></li><li class="hierarchy-item"><a href="#Performance_Optimization">7.2 Performance Optimization</a></li><li class="hierarchy-item"><a href="#Guiding_Future_Change">7.3 Guiding Future Change</a></li></ul><div class="hierarchy-list-footer"> </div></li><li class="hierarchy-item"><a href="#Next_Steps_How_You_Can_Build_On_the_Microsoft_Experience">8 Next Steps: How You Can Build On the Microsoft Experience</a></li><li class="hierarchy-item"><a href="#References">9 References</a></li></ul><div class="hierarchy-list-footer"> </div></div>
<h1><a name="Strategic_Change_Microsoft_Reinvents_Itself"></a>1 Strategic Change: Microsoft Reinvents Itself</h1>
<p>Microsoft recently transformed the strategic direction of the company by expanding its already extensive software products and cloud services capabilities as part of the process of establishing itself as a major cloud services provider. Microsoft Services
 describes key elements of that paradigm change — including actions taken to overcome specific challenges — in this white paper.</p>
<hr />
<p style="text-align:center;"><strong>Strategic Change:<br />
</strong><em>• What we did&nbsp;&nbsp; <br />
• Why we did it<br />
• How we did it</em></p>
<hr />
<p><strong>Will you initiate a similar transformation?</strong><br />
<br />
Microsoft learned a key lesson when it embraced cloud computing: such a transition requires far more effort than just adopting new technology. A successful transition requires a broad analysis of an enterprise’s IT ecosystem and a holistic, phased approach
 to identifying and solving interrelated sets of organizational, architectural, and design challenges. Enterprises that face similar challenges can gain insight from the Microsoft experience as they plan how to anticipate and surmount potential obstacles in
 their own efforts to deliver cloud services to customers.<br />
<br />
Many similarities exist between Microsoft and its enterprise-size customers. Many global enterprises offer large portfolios of products to their customers, make significant investments in information technology (including, for some companies, software development),
 and must improve products while maintaining existing assets to remain competitive. An increasing number of enterprises — whatever the nature of the products or services that they offer — encounter business drivers that compel them to consider moving to a cloud-based
 service provider model. Such enterprises can speed their own transformation to cloud computing by taking advantage of the extensive knowledge that Microsoft gained when it implemented change — at the levels of organization, architecture, and design — in its
 successful journey to the cloud .<br />
<br />
<strong>Architectural principles Microsoft developed to re-engineer itself as a major cloud sforts to deliver cloud services to customers.<br />
<br />
Many similarities exist between Microsoft and its enterprise-size customers. Many global enterprises offer large portfolios of products to their cervices provider</strong><br />
<br />
Characteristics of cloud computing include such factors as scalability, consumption-based pricing, and predictable levels of service availability. Taking advantage of these characteristics can be advantageous for both the service consumer and the service provider.
 For example, the consumer needs to understand the cost of the services they use and, at the same time, expect predictable service delivery based on a contract. To fulfill such a contract successfully, the provider learns to deliver the service within defined
 parameters. The effort to fundamentally transform Microsoft from a company that was an early provider of services in the cloud (such as MSN® and Hotmail®) to a major cloud services provider began with a consideration of additional commercial and technical
 opportunities offered by cloud computing.<br />
<br />
The first step was to develop a systematic approach to identify and categorize high-level goals, and then to develop strategies to manage the associated challenges. Microsoft developed the following fundamental principles as part of its effort to transform
 itself into a cloud services provider:</p>
<ul>
<li><strong>Strive for continual service improvement.</strong> Pursue continual improvement in an IT service — including any cloud service — and measure success on an ongoing basis by determining how well technological advancements deliver business value.
</li><li><strong>Deliver the perception of infinite capacity.</strong> From the consumer’s perspective, an IT service should provide capacity on demand, limited only by the amount of capacity for which they are willing to pay.
</li><li><strong>Deliver the perception of continuous service availability.</strong> From the consumer’s perspective, an IT service should be available on demand from anywhere and on any device.
</li><li><strong>Take a service provider approach.</strong> The provider of any IT service should think and act as if they are running a service provider business rather than an IT department within an enterprise.
</li><li><strong>Optimize use of available resources.</strong> An IT service should automatically use all resources efficiently and effectively.
</li><li><strong>Take a holistic approach to availability design.</strong> The availability design for an IT service should involve all layers of the stack, should employ resilience wherever possible, and should remove redundant systems whenever possible (such as
 when resiliency makes redundancy unnecessary). </li><li><strong>Minimize human involvement.</strong> The day-to-day operations of an IT service should have minimal human involvement to reduce the chance of human error.
</li><li><strong>Make service attributes predictable.</strong> An IT service’s attributes must be predictable, because the consumer expects consistency in the quality and functionality of the services they consume.
</li><li><strong>Provide incentives that change behavior.</strong> A provider will be more successful in meeting business objectives if it defines the services that it offers in a way that motivates desired behavior from the service consumer.
</li><li><strong>Create a seamless user experience.</strong> Consumers of an IT service should not encounter anything that disrupts their use of the service as a result of crossing a service provider boundary.
</li></ul>
<p>You can use these principles — developed by Microsoft to achieve its own transformation — to help direct the introduction of cloud computing into your organization. For an in depth look at these principles refer to the article
<a href="http://social.technet.microsoft.com/wiki/contents/articles/4346.aspx"><em>Private Cloud Principles, Patterns, and Concepts</em></a>.</p>
<h1><a name="Why_Shift_into_Cloud_Services"></a>2 Why Shift into Cloud Services?</h1>
<p>Rapid change requires rapid innovation. The ever-escalating rate of technological change demands a commensurate aptitude for innovating at an accelerated pace. To remain profitable, an enterprise must anticipate changes and address the resulting challenges
 with agility, growing leaner yet offering higher quality products.<br />
<br />
Improving products, although prerequisite, is not sufficient. As a technology company, Microsoft realized that it must deliver capabilities as services in addition to delivering packaged products. Recognizing this imperative required a rapid but well-organized
 and ongoing shift from its traditional software product-based business model to a new role as a service provider.<br />
<br />
<strong>Business drivers experienced by Microsoft</strong><br />
<br />
Microsoft now delivers numerous capabilities as cloud services in response to a growing demand for such services. Increasing numbers of enterprises need to invest more of their time and money in their core business assets and less time and money supporting
 large IT departments. Increasing numbers of large enterprises look to service providers such as Microsoft to create, provide, and operate services that are commonly required by large enterprises: server and data platforms, integration capabilities, and communication
 and collaboration workloads (including email, instant messaging, scheduling, and portals).</p>
<hr />
<p style="text-align:center;"><strong>Seismic Shift <br />
</strong>Computing is undergoing a seismic shift from client/server to the cloud,
<br />
a shift similar in importance and impact to the transition from mainframe to client/server.
<br />
[<strong>Source</strong>: <a href="http://www.microsoft.com/presspass/presskits/cloud/docs/The-Economics-of-the-Cloud.pdf">
The Economics of the Cloud</a>, Microsoft&nbsp;November 2010] </p>
<hr />
<p>An additional change that drove the Microsoft transformation to cloud services provider was the advent of new commercial agreements introduced by cloud computing. Consumers who buy services expect to pay for units of consumption, which, in turn, requires
 that the unit cost be predictable to both the consumer and to the provider. Achieving this new consumption-based business model was, for Microsoft, a central aspect of its shift in strategy away from a traditional product-based business model. Accomplishing
 this shift required considerable investment and advance preparation to ensure that it was done successfully.<br />
<br />
A consumption-based pricing model for a service typically brings with it an assumption that, whenever demand grows for the service, a corresponding capacity to meet that increased demand is also available. Similarly, when demand recedes, the customer consumes
 less and expects a corresponding reduction in capacity. This model drives the development of an exceptionally flexible service delivery capability that must be supported by investments in appropriate technology. These investments can significantly affect revenue
 streams and therefore require astute risk management efforts.<br />
<br />
Technical innovation, and the increasing commoditization of IT resources that this innovation enables, requires adaptation to remain competitive but also introduces new opportunities to gain a competitive edge. Remaining competitive — or increasing competitiveness
 — in this kind of market environment demands exceptional leadership, focus, and investment.<br />
<br />
<strong>Factors associated with business drivers<br />
</strong><br />
The following figure identifies the main drivers that have influenced the direction Microsoft has taken and shows related factors, including actions the company has taken to achieve goals developed in response to these drivers.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/3005.Benefits-Dependancy-Network.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/3005.Benefits-Dependancy-Network.png" style="border:0px solid currentcolor;" /></a><br />
<strong>Figure 1: Benefits dependency network</strong><br />
<br />
The diagram represents a benefits dependency network, a graphical representation of business drivers and dependent elements. This technique is often used by Microsoft Services when working with customers to help them understand how to drive transformational
 or strategic change.<br />
<br />
</p>
<h1><a name="How_Can_Evolutionary_Steps_Achieve_Revolutionary_Change"></a>3 How Can Evolutionary Steps Achieve Revolutionary Change?</h1>
<p>For Microsoft to make the revolutionary transition from marketing traditional IT products — designed for use in dedicated enterprise environments — to delivering multiple technologies as cloud services requires, paradoxically, an evolutionary approach. Using
 a phased approach enables the gradual implementation of the attributes that are required to introduce cloud services, and it allows incremental investment over time.<br />
<br />
<strong>Example: Software as a Service (SaaS) on a global scale</strong><br />
<br />
Microsoft® Office 365, one of the largest software as a service (SaaS) offerings currently available on a global scale, is an example of investment in change at the level of application architecture. Office 365 provides email, collaboration, and communication
 workloads as a cloud service; it combines Microsoft Office desktop applications with Microsoft SharePoint® Online, Microsionary_Change"></a>3 How Can Evolutionary Steps Achieve Revolutionary Change?</h1>
<p>For Microsoft to make the revolutionary transition from marketing traditional IT products — designed for use in dedicated enterprise environments — to delivering multiple technologies as cloud services requires, paradoxically, an evolutionary approach. Using
 a phased approach enables the gradual implementation of the attributes that are required to introduce cloud services, aoft Exchange Online, and Microsoft Lync™ Online.<br />
<br />
Developing Office 365 was one of the first Microsoft initiatives to transform a major set of traditional shrink-wrapped, boxed enterprise software products into an optimized cloud service. One of the architectural principles (described earlier) that this project
 demonstrates is <strong><em>Strive for continual service improvement</em></strong>, which was achieved using the following phased approach:</p>
<ul>
<li><strong>Phase 1: Learn from a limited test run.</strong> In the first phase, Microsoft gained a detailed understanding of the business side of delivering online services by running its on-premises server software much like any hosting company does. For
 example, the project introduced commercial agreements that were similar to those used in hosting companies, and it introduced highly standardized dedicated deployments in its data centers. This early cloud offering, offered only to limited markets, was called
 Microsoft Business Productivity Online Suite (BPOS). </li><li><strong>Phase 2: Build a new delivery infrastructure.</strong> In the second phase, Microsoft built an online service delivery infrastructure to control and automate common tasks, such as provisioning and syndication. This phase allowed the company to scale
 the BPOS service to a larger number of customers and to a wider geographic market.
</li><li><strong>Phase 3: Deliver Office 365 to the world.</strong> In the third phase, which is marked by the introduction of Office 365 — the successor to BPOS — individual workloads (email, collaboration, and so on) are delivered together as a suite of cloud
 optimized applications. The Office 365 online service delivery platform has been improved to such a degree that Microsoft can now also offer it as a shared platform to small businesses and educational institutions. As of the publication date of this paper,
 Office 365 represents Phase 3 of the evolution — and exemplifies the principle <strong>
<em>strive for continual service improvement</em></strong>. </li></ul>
<p>This evolutionary approach allowed Microsoft to achieve the following goals:</p>
<ul>
<li><strong>Respond to new and existing markets.</strong> Deliver new, increasingly efficient, and progressively more effective services while sustaining support for existing products.
</li><li><strong>Establish reusable patterns.</strong> Identify standard patterns that facilitate and support the transformation of IT capabilities to cloud services.
</li></ul>
<p><strong>Example: Making the Microsoft experience available to a global audience</strong><br />
<br />
Microsoft Services worked with each of the Microsoft product groups that helped engineer the evolutionary transformation to Office 365 to collect, consolidate, and organize information derived from first-hand experiences of their members. Any enterprise currently
 considering a similar shift toward delivering cloud services either internally or to their customers can take advantage of the expertise captured and documented by Microsoft Services.<br />
<br />
This paper provides a preliminary introduction to the set of architectural principles that Microsoft used to guide technological change at a fundamental level. It also presents specific instances of the implementation of those principles in each “Mini Case
 Study” section later in the paper.<br />
<br />
The Microsoft Services team also investigated the architectural changes required to create a dynamic infrastructure service that is the essential foundation for any cloud service. As one part of this effort, Microsoft Services researched the experiences of
 Global Foundation Services (GFS), the Microsoft group that provides much of the infrastructure on which Microsoft runs cloud services. Again, the goal of Microsoft Services is to develop a knowledge base that is useful to other global enterprises that want
 to enter the cloud service delivery market at an accelerated rate but without incurring excessive risk.</p>
<h1><a name="Synopsis_Re-Engineering_Microsoft_as_a_Cloud_Services_Provider"></a>4 Synopsis: Re-Engineering Microsoft as a Cloud Services Provider</h1>
<p>Making a strategic commitment to a technological innovation as elemental as the move from shrink-wrapped software purveyor to cloud services provider required Microsoft to make organizational changes, which set the context for architectural changes, which,
 in turn, drove changes in design. <br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/7411.Type-of-Structural-Change.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/7411.Type-of-Structural-Change.png" style="border:0px solid currentcolor;" /></a><br />
<strong>Figure 2: Types of structural change required to achieve technological innovation</strong><br />
<br />
The following table summarizes the changes depicted in the preceding figure.<br />
<br />
</p>
<table class="telerik-reTable-1" style="border-color:#000000;">
<tbody>
<tr class="telerik-reTableHeaderRow-1">
<td class="telerik-reTableHeaderFirstCol-1">Structural Area&nbsp;</td>
<td class="telerik-reTableHeaderLastCol-1">Description</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1"><strong>Organizational Change</strong></td>
<td class="telerik-reTableLastCol-1">When it adopted the cloud model, Microsoft modified its organizational structure to address the need for alternative models of control and governance. Organizational change is common at Microsoft; however, many recent changes
 specifically reflect shifting priorities driven by the many ways in which implementing the cloud changes the business.<br />
<br />
Microsoft enterprise customers who incorporate cloud computing into their IT strategy will likely also encounter a need for organizational restructuring. For information about how Microsoft approached cloud-driven organizational change, see the section “Mini
 Case Study: Organizational Change Throughout Microsoft” later in this paper.</td>
</tr>
<tr class="telerik-reTableEvenRow-1">
<td class="telerik-reTableFirstCol-1"><strong>Architectural Change</strong></td>
<td class="telerik-reTableLastCol-1"><span style="line-height:115%;font-size:11pt;font-family:calibri,sans-serif;">When it adopted the cloud model, Microsoft recognized that it must alter important existing enterprise products in novel and unanticipated ways.
 Millions of customers depend on these products to deliver well-establishange is common at Microsoft; however, many recent changes
 specifically reflect shifting priorities driven by the many ways in which implementing the cloud changes the business.<br />
<br />
Microsoft enterprise customers who incorporate cloud computing into their IT strategy will lhed end-user functionality, so planning a new architecture for familiar functionality — yet ensuring that it continues to work as expected — was essential. Examples of emerging new requirements
 not anticipated in the original architecture included delivering these products as services at a much larger scale, to far more diverse user communities, and/or across more extensive geographies or networks.<br />
<br />
As the adoption of cloud computing intensifies worldwide, many Microsoft enterprise customers can also expect to encounter the necessity to change existing architecture. For information about how Microsoft approached cloud-driven architectural change, see the
 section “Mini Case Study: Architectural Change at Microsoft Exchange” later in this paper.</span></td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1"><strong>Design Change</strong></td>
<td class="telerik-reTableLastCol-1">When it adopted the cloud model, Microsoft quickly determined that it must make multiple design changes to the code base of many established software products. These design changes would enable these products to provide
 the platform upon which Microsoft delivers innovative future services to its customers, and they had to be made within the context of competing resources, time pressures, and the intrinsically demanding development of very large-scale and complex software.<br />
<br />
Microsoft enterprise customers who decide to support cloud services will face pressures similar to those experienced by Microsoft when implementing design change in the context of resource, time, and complexity challenges. For information about how Microsoft
 approached design changes to code, including background information on how such changes were managed, see the section “Mini Case Study: Design Change at Microsoft SQL Server” later in this paper.
<br />
</td>
</tr>
</tbody>
</table>
<br />
Microsoft strategic plans include responding, on an ongoing basis, to any new requirements that cloud computing brings. As with recent cloud-based innovation at Microsoft, the architectural principles described earlier in this paper provide a general
 framework that can guide decisions about how to implement specific organizational, architectural, and design changes. Any large enterprise about to embark on its own effort to reshape the next generation of its services to incorporate cloud computing can make
 use of these general principles and can gain insight from recent Microsoft experience.<br />
<h1><a name="Mini_Case_Study_Organizational_Change_Throughout_Microsoft"></a>5 Mini Case Study: Organizational Change Throughout Microsoft</h1>
<p>The recent Microsoft decision to restructure its organization to align with the
<strong><em>Take a service provider approach</em></strong> principle signaled a profound change in the direction of the company. Ideally, an organization would make all changes described in this paper simultaneously to fully embrace the change in direction
 to support cloud computing. In reality, however, such an enormous shift in strategy requires extensive planning, a phased approach, and, most importantly, leadership commitment from the highest levels and throughout the organizational structure.<br />
<br />
<strong>Make success achievable</strong><br />
<br />
To achieve success, it is important that each person within Microsoft participate in the company’s commitment to the new strategy. In March 2010, in a public speech at the University of Washington, Microsoft CEO Steve Ballmer announced that everyone within
 the company already understood the change: <strong><em>“For the cloud, we’re all in.”</em></strong> Although Microsoft began implementing the new strategy within the company much earlier than March 2010, the confidence projected by that public statement reinforced
 the commitment to change. Microsoft chose to focus every element of its business on ensuring its success in the cloud. This change in direction involved an explicit decision to put into practice within the company the following principles:
<strong><em>Take a service provider approach</em></strong> (to customers), and <strong>
<em>Provide incentives that change behavior</em></strong> (in this case, to motivate employees to contribute to achieving the new goals).<br />
<br />
One identifier of exceptional leadership is the ability to set objectives that are achievable and realistic, and a parallel recognition that a program of poorly planned, hasty change is apt to be unsuccessful. For Microsoft, attempting too large a change too
 quickly would affect existing commitments to customers who continue to use the traditional products. Therefore, defining attainable goals was — and is — an explicit part of the Microsoft approach as it reorients the company toward delivering cloud services.<br />
<br />
Specifically, Microsoft leadership decided that change must occur incrementally over a period of software product releases. This approach maintains momentum towards achieving cloud computing while simultaneously meeting existing business demands. It also motivates
 employees to contribute actively by defining an achievable path to success.<br />
<br />
<strong>Introduce ‘shared goals’ and ‘shared resources’ for key teams . . .</strong><br />
<br />
The most significant organizational change that Microsoft undertook in response to the opportunities and risks presented by adopting the cloud model was to create a unified business group that contains both software development teams (for individual products)
 and the teams that provision the services that use that software. In effect, Microsoft engineered an organizational structure in which the set of business goals that lead to successful delivery of cloud services are shared by the teams that control the development
 resources of those same services.<br />
<br />
For an organization whose growth had been based on a model of releasing licensed software, this transition was significant because it required the teams that release traditional licensed products and those that build and maintain the current online cloud services
 to share resources.<br />
<br />
<strong>. . . but establish clear ‘ownership boundaries’</strong><br />
<br />
As part of developing a service provider mindset, Microsoft had to identify relevant roles and responsibilities as well as establish boundaries between service elements. Consequently, Microsoft defined clear boundaries for multiple elements at various levels,
 which included identifying interface owners for individual components, identifying service components at a functional level (such as infrastructure), and identifying overall ownership for a delivered service.<br />
<br />
Establishing ‘who is responsible for what’ and identifying available capabilities also help reduce duplication of effort and contribute to achieving a more efficient utilization of resources.<br />
<br />
As part of establishing ownership boundaries, Microsoft realized that delivering large-scale cloud services to customers required a team whose role is to build a dynamic internal infrastructure that supports cloud services. This realization led Microsoft to
 form Global Foundation Services (GFS), a division whose role is to deliver a consistent and predictable cloud computing service. Initially, GFS developed a small number of prescribed infrastructure services to set the standard upon which to build more comprehensive
 cloud services.<br />
<br />
At present, GFS delivers the infrastructure and foundational technologies for more than 200 online, live, and cloud services for Microsoft, including Bing™, MSN®, Business Online Services, Windows Live®, Entertainment and Devices, and Windows Azure™. GFS focuses
 on the infrastructure, online security, and environmental awareness considerations of operating services 7x24x365 around the world.<br />
<br />
<strong>Identify relationships and dependencies</strong><br />
<br />
The following diagram highlights the relationships among drivers, objectives, and benefits of cloud-driven change at Microsoft as well as the resulting changes to the business and factors that enable these changes. For example, creating GFS to deliver a standardized
 core infrastructure capability with cloud attributes contributed to business growth by enabling the delivery, as services, of many existing server products and simultaneously increased customer satisfaction.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/0361.Align-organizational-change.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/0361.Align-organizational-change.png" style="border:0px solid currentcolor;" /></a><br />
<strong>Figure 3: Align organizational change to goals and drivers</strong></p>
<h1><a name="Mini_Case_Study_Architectural_Change_at_Microsoft_Exchange"></a>6 Mini Case Study: Architectural Change at Microsoft Exchange</h1>
<p>Microsoft Services interviewed key members of the Microsoft Exchange Server product team as part of its effort to understand what kind of architectural changes are required in a large, successful enterprise software product with a global customer base to
 transform an existing product to a cloud service. Exchange Server was the first major Microsoft server product team to commit to identifying and overcoming challenges assshx/__key/communityserver-wikis-components-files/00-00-00-00-05/0361.Align-organizational-change.png"><img alt=" " src="http://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/0361.Align-organizational-change.png" style="border:0px solid currentcolor;" /></a><br />
<strong>Figure 3: Align organizational change tociated with the substantial product changes required to enable the delivery of server
 capabilities in the cloud. The team started by committing to develop the live@EDU service to offer Exchange messaging and communications capabilities to educational institutions at minimal or no cost.<br />
<br />
<strong>The Exchange Server team takes on a formidable challenge</strong><br />
<br />
The challenge developers faced was how to take a feature-rich, highly configurable product designed for use in a single organization (which might, or might not, be geographically distributed) and extend it for use in a multi-tenant, globally available cloud
 service environment. The challenge grew even more difficult when demand for the newly developed cloud service (housed at Microsoft data center facilities and offered at a comparatively lower cost than a traditional installation) grew swiftly to tens of millions
 of users. For example, the live@EDU service currently hosts 45 million mailboxes [<strong>Source</strong>:
<em>Interview with Exchange Server development team</em> October 29, 2010]. Scaling to this size was not part of the design criteria at the time the product originated.<br />
<br />
<strong>Techniques used by Exchange to implement cloud computing</strong><br />
<br />
The following sections summarize how the Exchange product team encountered, categorized, and solved multiple architectural challenges as they worked to transform traditional Exchange Server capabilities into a cloud service. The result is a cloud-based service
 that delivers novel, resilient, high-quality functionality to millions of users.<br />
<br />
Specific examples of how the Exchange product team met and resolved some of these challenges are provided, including:</p>
<ul>
<li>An analysis of how Internet latency requirements affected fundamental variables — such as networking and users — and required architectural changes to achieve functionality in the cloud.
</li><li>An account of how unpredictable workloads and fluctuating consumption levels at an unprecedented scale required architectural changes to make cloud computing manageable.
</li></ul>
<h2><a name="Internet_Latency_mdash_Now_What"></a>6.1 Internet Latency — Now What?</h2>
<p>When charged to deliver functionality as a cloud-based service, the Exchange product team quickly recognized that it could no longer develop software that depended on fast, reliable network connections between servers and between servers and clients. Internet
 latency — the time required for a signal to travel from one point on a network to another across the cloud — played a major role in causing a substantive architectural change, one that was required to make the service available in the cloud. Many clients that
 interact well with the traditional Exchange service are not tolerant of slower response times caused by Internet latency. This latency, when it occurs, negatively affects users’ perception of service availability and quality.<br />
<br />
Resolving the Internet latency problem required rethinking the overall client/server relationship and architecture. The team realized immediately that achieving success mandated decoupling the user experience from the latency that is inherent in cloud computing.
 The following subsections describe some of the approaches used to achieve this decoupling.</p>
<h3><a name="Identify_asynchronous_transactions_that_do_not_need_to_lsquo_stop_rsquo_the_user"></a>6.1.1 Identify asynchronous transactions that do not need to ‘stop’ the user</h3>
<p>One technique used to maintain a consistent and quick user response time is to adopt the
<strong><em>assumptive behavior pattern</em></strong>. The Exchange product team recognized a pattern:</p>
<ul>
<li>The system can assume that certain transactions done via the user interface (UI) are successful.
</li><li>It is therefore possible to give the user immediate confirmation. </li><li>This confirmation enables the user to continue working without interruption. </li></ul>
<p>For example, it is possible to return an immediate confirmation to the user for activities such as deleting email from a mailbox. The actual deletion transaction can occur asynchronously, and if a deletion occasionally fails, it is typically of little significance
 to the user. The email simply remains in the <strong>Inbox</strong>. This approach results in a far better user experience than forcing every user to wait each time a potentially lengthy synchronous transaction occurs.</p>
<h3><a name="Load_data_first_that_the_user_expects_to_use_immediately"></a>6.1.2 Load data first that the user expects to use immediately</h3>
<p><strong><em>Preemptive data loading</em></strong> is another pattern that the Exchange team implemented to achieve a better user experience. By monitoring user behavior (such as users who “opted in” to participate in service improvement), the team recognized
 that when a user logs on to a mailbox through the web UI the user likely opens one of the email messages positioned at the “top” of the
<strong>Inbox</strong>. To support this typical user preference, when the UI loads the system fetches and preloads into the UI a percentage of the messages at the top of the user’s
<strong>Inbox</strong>. This preemptive data loading enables an “instant response” when the user clicks a message to open it.</p>
<h3><a name="Maintain_user_functionality_even_during_a_failure"></a>6.1.3 Maintain user functionality even during a failure</h3>
<p>A disconnection between the UI and other elements of the Exchange service — a characteristic that occurs in both of the preceding examples — also occurs deeper in the Exchange product architecture. In a broader scenario, such as a failure scenario, the use
 of code isolation throughout the Exchange cloud computing service lets the service maintain user functionality through the UI even when significant outages occur elsewhere in the system. To implement code separation, also referred to as code isolation, developers
 separate the code for visible elements (the UI) from the rest of the code (which provides functionality not visible to the user).<br />
<br />
Examples in which the product team identified Exchange-specific patterns that helped them discover areas in which it was possible to solve Exchange-specific technical issues (ones that arose from Internet latency) are instances of two more broadly applicable
 general architectural principles. One of these principles is <strong><em>Take a holistic approach to availability design</em></strange service — a characteristic that occurs in both of the preceding examples — also occurs deeper in the Exchange product architecture. In a broader scenario, such as a failure scenario, the use
 of code isolation throughout the Exchange cloud computing service lets the service maintain user functionality through the UI even when significant outages occur elsewhere in the system. To implement codong>, and the other is
<strong><em>Deliver the perception of continuous service availability</em></strong>.<br />
<br />
Taking a holistic approach to availability design and delivering the perception of continuous service availability are also directly applicable to the following scenarios:</p>
<ul>
<li>Moving an application from a traditional hosted environment to a shared environment.
</li><li>Supporting an application from a single data center that is used by customers across disparate client environments, each with different network requirements (for example, networks that support an organization located in a single site, an international organization
 with offices around the globe, or an organization with a large mobile workforce).
</li></ul>
<h2><a name="Unpredictable_Workloads_and_Consumption_mdash_On_a_Global_Scale"></a>6.2 Unpredictable Workloads and Consumption — On a Global Scale
</h2>
<p>Users of traditional Microsoft server software products, such as Exchange Server, work for an enterprise that purchases the product. Typically, members of an internal IT department manage and support the product. The IT department is, of course, familiar
 with various employee roles and requirements as well as with the policies and requirements of the organization. Thus, in a traditional scenario, the people who manage the software also have sufficient knowledge to implement some level of governance over what
 users can do with that software. Knowledge of typical behavior patterns within an organization allows that organization to design, manage, and tune enterprise software to perform as efficiently as possible for specific groups of users.</p>
<h3><a name="Quarantine_an_individual_mailbox_if_it_disrupts_a_shared_service_environment"></a>6.2.1 Quarantine an individual mailbox if it disrupts a shared service environment
</h3>
<p>By contrast, in a multi-tenant software-provisioning model, multiple organizations access software provided by an external organization (for example, by Microsoft cloud services). In such a scenario, the traditional relationship between an internal IT department
 and users who are fellow employees of the same organization no longer exists. In the context of email provided as a cloud service, the multi-tenant model can potentially lead to the introduction of many more instances of disruptive events (or “poison”) into
 the email system.<br />
<br />
Occasionally, “poison” events are malicious. Typically, however, they result from a lack of knowledge of predictable user behavior patterns and therefore result from a lack of effective governance over user behavior. A shared service environment that includes
 a diverse mixture of usage profiles presents a management challenge because workload profiles fluctuate unpredictably, with little consistency in the peaks and valleys. Fluctuations occur because an individual tenant’s drivers are unknown to the service provider
 and because behavior patterns typical of that tenant might be very different from those of other tenants. For example, very large email messages sent within one organization to a very large number of individuals at “peak” times for the overall system can cause
 disruption across the shared service environment.<br />
<br />
Microsoft quickly identified this type of initially unanticipated scenario as an area that required a new approach. The Exchange product team investigated various technical approaches to mitigate such risks. One appropriate response, which is based on the architectural
 principle <strong><em>Make service attributes predictable</em></strong> and which is beneficial both to the service provider and to consumers, is to implement a quarantine model. A quarantine model also supports the
<strong><em>Minimize human involvement</em></strong> principle by automating the approach and handling the scenario dynamically.<br />
<br />
In contrast to traditional Exchange Server (which has no “unit of consumption” because it is a purchased product, not a cloud service), Exchange Online defines an individual user’s mailbox to be the unit of consumption. A unit of consumption is the scope by
 which a service is consumed and charged (priced). Therefore, one technique to maintain consistent levels of service when a single mailbox causes a disruption across a multi-tenant cloud service is to quarantine the individual mailbox from which the service
 disruption originates.<br />
<br />
A service can perform a quarantine action by using a workload profiling and management approach (described in the following subsection) to identify which workloads are affected and to determine which individual mailbox caused the reduction in service quality
 (referred to as degradation). The result might be a total quarantine of that mailbox, or it might be merely a throttling (restriction) of requests, resulting in a reduced level of service to that mailbox.
</p>
<h3><a name="Profile_workloads_to_better_manage_them_in_a_multi-tenant_cloud_environment"></a>6.2.2 Profile workloads to better manage them in a multi-tenant cloud environment</h3>
<p>Workload consumption profiles that vary from one tenant to another in a multi-tenant cloud environment present a considerable challenge. To maintain quality of service across the system, the Exchange product team needed to define more structured categories
 for the system’s combined workload (which, in the traditional version of Exchange Server, is divided into and profiled as individual transactions).
<br />
<br />
The team defined categories for a number of workloads based on logical activities. The purpose of the categorization was to distinguish one transaction from another and thus to allow for more accurate workload profiling. For example, based on profiling, the
 system can assign specific workloads relative priority levels; alternatively, the system can scale out to accommodate workloads more effectively.<br />
<br />
When sporadic intense activity occurs in a specific workload, profiling enables the service to apply quarantine or throttling rules to (only) that workload to prevent it from affecting the quality of service for other workloads in the system. For Exchange Online,
 intermittent high-activity workloads might result from mailbox migrations or from mobile device synchronization.<br />
<br />
The product team introduced into the system a workload ID that is tracked, just like transaction IDs, to facilitate workload profiling. The ability to track activity by workload ID enables monitoring of that activity and, therefore, also enables a subsequent
 dynamic reaction to rapidly changing consumption profiles.<br />
<br />
The Exchange product team also implemented code separation so that the system can handle each workload independently. For example, this capability lets the system throttle resources with precision.<br />
<br />
Design changes such as these are Exchange-specific instances of the general architectural principle
<strong><em>Strive for continual service improvement</em></strong>. These changes make it easier to manage resources for each workload in a multi-tenant cloud environment; they also make it easier to identify associated patterns that developers can use as a
 basis for making workload management more effective.<br />
<br />
The workload profiling approach described in this section applies to applications that incorporate the following characteristics:</p>
<ul>
<li>Significant variations in workload, such as applications that serve overlapping international audiences
</li><li>Tasks that can consume significant resources, such as batch tasks, migrations, reporting, and so on
</li></ul>
<h3><a name="Combine_patterns_to_mitigate_fluctuating_consumption"></a>6.2.3 Combine patterns to mitigate fluctuating consumption</h3>
<p>As described earlier, a technique that can help transform an existing server product into a cloud service is to identify and apply a pattern. In addition, the Exchange product team discovered that it is often useful to combine a specific pattern with one
 or more other patterns (or with other related components).<br />
<br />
For example, the “tarpitting” pattern — established years ago to protect network resources from over-subscription during activity peaks — can also help protect a cloud service from abnormal activity. Tarpitting is suitable for handling either natural peaks
 of consumption or peaks caused by malicious activities. Effective use of tarpitting for cloud computing requires that it be combined with a number of other components and that it rely on a number of available services.</p>
<table class="telerik-reTable-1" style="border-color:#000000;">
<tbody>
<tr class="telerik-reTableHeaderRow-1">
<td colspan="2" class="telerik-reTableHeaderFirstCol-1">
<div style="text-align:center;">Tarpitting Pattern Components</div>
</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1" style="width:20%;">
<p style="text-align:center;"><strong>Pattern&nbsp;Component</strong> </p>
</td>
<td class="telerik-reTableOddCol-1">
<p style="text-align:center;"><strong>Description</strong> </p>
</td>
</tr>
<tr class="telerik-reTableEvenRow-1">
<td class="telerik-reTableFirstCol-1">Tarpitting</td>
<td class="telerik-reTableOddCol-1">Initiates a temporary delay in processing requests, triggered by patterns that indicate unusually high activity, to preserve resources. Tarpitting reduces service quality but maintains availability.</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1">System monitor</td>
<td class="telerik-reTableOddCol-1">Captures activiter-color:#000000;">
<tbody>
<tr class="telerik-reTableHeaderRow-1">
<td colspan="2" class="telerik-reTableHeaderFirstCol-1">
<div style="text-align:center;">Tarpitting Pattern Components</div>
</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirsty in the system, helps identify (and sends notifications about) abnormal behavior, and acts as a reference for available resources.</td>
</tr>
<tr class="telerik-reTableEvenRow-1">
<td class="telerik-reTableFirstCol-1">Resource monitor</td>
<td class="telerik-reTableOddCol-1">Identifies any available resources currently under stress by monitoring system monitor data and recommending (to the ‘single authority’) the application of a tarpit to help preserve remaining resources.</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1">Single authority</td>
<td class="telerik-reTableOddCol-1">Identifies an authority in the system that can make an informed decision on any flagged activity, taking into account knowledge gathered from the resource monitor about currently available resources.
</td>
</tr>
<tr class="telerik-reTableEvenRow-1">
<td class="telerik-reTableFirstCol-1">Quarantine</td>
<td class="telerik-reTableOddCol-1">An isolating action applied to requests (either specific or general) from service consumers for a specified time. Quarantine occurs after an activity is identified by the single authority to be negatively affecting the system.</td>
</tr>
<tr class="telerik-reTableOddRow-1">
<td class="telerik-reTableFirstCol-1">Error containment</td>
<td class="telerik-reTableOddCol-1">A technique that enables the single authority to recognize when a significant number of anomalies exist in the system so it can trigger a call for human attention. One result might be to reset thresholds to allow naturally
 increasing consumption patterns.</td>
</tr>
</tbody>
</table>
<br />
The Exchange product team, like other Microsoft teams, has identified and applied a number of useful patterns, sometimes in conjunction with related services, during its phased transition to cloud computing. Understanding and applying patterns such as these
 are crucial for the successful creation of cloud services. These patterns accelerate the architectural process, help reduce risk, and help attain quality levels expected from cloud services. You can find patterns that are relevant to the transformation from
 a software product to a cloud service in the book <em>Patterns for Fault Tolerant Software</em>, 2007, by Robert Hanmer.<br />
<h3><a name="Adopt_scale_units_in_a_cloud_topology_to_improve_service_quality_and_profit"></a>6.2.4 Adopt scale units in a cloud topology to improve service quality and profit</h3>
<p>The ability to scale a service dynamically is of critical importance in cloud environments. The traditional topology of an Exchange system consists of a three-tier client/server model: a client tier, a backend database tier, and a hub tier for routing mail
 between systems. Each tier has a different resource use profile, but all are required to scale out the system.<br />
<br />
When considering how to enable a system to scale, a means to measure the consumption of the service is required. Identifying a consumption unit makes it possible to achieve the following:</p>
<ul>
<li>Assign resource allocations, which are used to enable more predictable growth across a complex system.
</li><li>Adopt a scale unit concept, which is used to provide a predictable, consistent, and manageable way in which to scale and manage a complex system.
</li></ul>
<p>For Exchange (as explained earlier) the unit of consumption is a mailbox. At first, the Exchange product team configured the scale unit to include one client-tier server and 1,000 data stores, each of which had a set number of mailbox allocations. However,
 this scale unit configuration provides non-linear scaling because the client tier consumption profile is comparable to an individual data tier. To solve this problem, the Exchange team identified a scale unit that included one instance of each tier within
 the unit, each of which has physical resource allocations. This approach, which results in one unit from each tier, achieves a configuration that is closer to linear scale.<br />
<br />
One scale unit contains:<br />
<br />
With this topology, the cloud-based version of Exchange adheres to the architectural principle
<strong><em>Optimize use of available resources</em></strong>. The system monitors scale units for resource consumption; each scale unit is expected to operate at up to a defined percent utilization.<br />
<br />
The utilization rate should: </p>
<ul>
<li>Permit workloads to migrate from one scale unit to another if a failure occurs
</li><li>Allow for an additional percent peak activity even at full utilization of both workloads (base % &#43; failure %). This is, essentially, a resource pooling concept
</li></ul>
<p>When resource utilization rises consistently above 60 percent, an additional scale unit is deployed to handle the increased workload.
</p>
<h1><a name="Mini_Case_Study_Design_Change_at_Microsoft_SQL_Server"></a>7 Mini Case Study: Design Change at Microsoft SQL Server</h1>
<p>Microsoft Services interviewed key members of the Microsoft SQL Server® development team to understand how the team modified the large, complex code base of this core Microsoft product to enable new capabilities. The SQL Server team described and categorized
 some of the key changes that they made.<br />
<br />
One major change was to develop new deployment models that require the separation of previously tightly coupled functionality. Modularizing functionality at the level of code can, for example, contribute to improved performance. In the case of SQL Server, separated
 functionality is deployed to physically separate server instances to improve performance of the overall service. (Windows Server® and Windows® client operating system development teams overcame similar challenges when they rebuilt the operating system to remove
 dependencies among Windows components.)</p>
<h2><a name="Componentization_and_Abstraction"></a>7.1 Componentization and Abstraction
</h2>
<p>Componentization and abstraction are useful techniques for managing a complex code base, like that of SQL Server. The goal is to divide a large problem into smaller components with more manageable attributes.<br />
<br />
The SQL Server team used visualization and modeling tools provided by the Visual Studio® 2010 development system to work through the code base, detail the interactions between components, and establish a map of those interactions. First, layers of abstraction
 or componentization were proposed, and then the traffiperformance. In the case of SQL Server, separated
 functionality is deployed to physically separate server instances to improve performance of the overall service. (Windows Server® and Windows® client operating system development teams overcame similar challenges when they rebuilt the operating system to remove
 dependencies among Windows components.)</p>
<h2><a name="Componentization_and_Abstraction"></a>7.1 Componentization and Abstraction
</h2>
<p>Componentizc crossing the lines within the map was measured in terms of the performance impact of cross-boundary traffic.<br />
<br />
Using this data, only decisions that were justifiable in terms of having negligible performance impact were proposed. The advantage of this approach is that design improvements brought about by componentization were implemented based on real usage data rather
 than on a theoretical design. In some cases, this analysis of cross-boundary traffic actually resulted in improvements in performance through functional modification (in addition to the advantages conferred by componentization). For example, in one function,
 the team determined that, when calling a lower-level function, the component made unnecessary calls back up the component stack, which resulted in redundant cycle utilization that affected performance.<br />
<br />
When the SQL Server team proposed lines of demarcation within the code base, they focused both on the standalone value of a given component and also on its suitability for reuse.<br />
<br />
The team also focused on business value when identifying components for separation. A good example is the language parser built into the product. The language parser is used widely across many areas of the product, and in other products across the business.
 Microsoft teams had already recognized that the parser would be more valuable if it were available as a standalone component. In this case, the effort to create a more compact and efficient language services component delivered value both for SQL Server and
 for other businesses areas (for example, the Visual Studio team).<br />
<br />
Working through an established code base, such as SQL Server, can evoke skepticism about whether or not proposed changes are beneficial. To counter this skepticism and to avoid wasting time in debate, the SQL Server team relied on facts. For each instance of
 proposed change, they created functional tests, based on measurement and analysis tools, from which to draw data to create a clear business case. Making the business case for a proposed change also helped to ensure the efficient utilization of valuable resources
 in a highly productive product group.<br />
<br />
One empirical asset that the team created was a map of the complexity of each component and its interactions with other components or services. This map helped make the business case for a given component, because more complex code paths are more likely to
 cause support difficulties than simpler code paths. Therefore, for any component with complex code paths, the team used the map to make a case for change by targeting the issue of support cost. Producing a product whose code paths and execution are clean and
 well documented, and consequently easier to support, reduces the lifecycle cost of the product and increases customer satisfaction.
</p>
<h2><a name="Performance_Optimization"></a>7.2 Performance Optimization </h2>
<p>The introduction of componentization and abstraction typically introduce performance overhead imposed by the cost of crossing boundaries. SQL Server is a high-performance product, and its reputation for responsiveness is a critical quality attribute. Every
 new version carries expectations of improved performance as well as new product features. Consequently, it was important that any design change not cause any degradation in performance. The team achieved this goal through the effective use of measurement and
 analysis, as described earlier.<br />
<br />
One of the more detailed elements of code refactoring was in understanding the performance impact of various different styles of code placement. The team determined that virtual functions have a performance profile that is similar to the profile for non-inline
 calls. This recognition meant that, if it was established that within a particular code path a non-inline function would not cause any issues, then neither would a virtual function call cause issues. With this knowledge, the SQL Server team used virtual functions
 as a means to provide encapsulation for some components. This required careful planning to prevent the introduction of virtual functions into critical code paths where they could introduce unacceptable performance overheads. This change was achieved by code
 sharing, linking some key functions in multiple binary files so as not to cause a cross-binary function call at runtime. The use of direct data exports also helped to prevent calls across boundaries.<br />
<br />
Recognition of this benefit of virtual functions was reinforced when the SQL Server team worked with the compiler teams to understand the intelligence in modern compilers. Compilers now perform inlining of functions optimally by taking advantage of the&nbsp;<a href="http://msdn.microsoft.com/en-us/library/e7k32f4k%28v=VS.100%29.aspx">profile
 guided optimization switches</a> in the Visual C&#43;&#43;® compiler. Increasing the use of virtual functions supports the principle
<strong><em>Make service attributes predictable</em></strong> by simplifying the code path to achieve predictable and more efficient performance. Using more virtual functions also supports the principle
<strong><em>Optimize use of available resources</em></strong>. Finally, this analysis is also an example of applying the principle
<strong><em>Strive for continual service improvement</em></strong>. </p>
<h2><a name="Guiding_Future_Change"></a>7.3 Guiding Future Change</h2>
<p>One challenge encountered by the SQL Server development team was how to implement governance to ensure that, once a component is isolated for use, it is not duplicated in future development. To help prevent such duplication, the team adopted a policy that
 all planning for new functionality must first establish its dependencies on any existing components. The team used a peer review process to approve this policy.<br />
<br />
In addition, when team members determine that a new component is required, they create the component and then use rigorous unit tests to analyze and profile the component. The goal is to ensure that all calls in and out of the component adhere to the newly
 established performance and optimization guidelines that apply throughout the product.
</p>
<h1><a name="Next_Steps_How_You_Can_Build_On_the_Microsoft_Experience"></a>8 Next Steps: How You Can Build On the Microsoft Experience
</h1>
<p>Microsoft customers and partners who plan to enter into the world of cloud computing as service providers can take advantage of the Microsoft experience described in this paper to evaluate how they might want to handle similar issues. By describing its own
 journey to the cloud and lessons learned, Microsoft can help customers plan and carry out an effective strategy to make the most of opportunities presented by the cloud.<br />
<br />
Important factors for a successful transformation include: </p>
<ul>
<li><strong>Strong leadership.</strong> The ability to motivate employees to welcome the challenge to ‘move mountains’ is essential.
</li><li><strong>Achievable goals.</strong> Goals, although complex, extensive, and sometimes formidable, must nevertheless be realistic and ultimately achievable.
</li><li><strong>Incremental change.</strong> The shift in direction and focus from a pre-cloud product delivery model to the role of cloud service provider must be incremental, for two reasons: to achieve success, and to avoid disrupting support for existing customers.
</li><li><strong>Solid architectural principles.</strong> Principles that are designed to guide the direction of such a paradigm change are crucial.
</li></ul>
<p>Greater opportunities exist now than ever before to deliver higher levels of service with increased functionality and lower investments over the long-term, resulting in a more agile and supportable portfolio of assets. The Microsoft Services team is ideally
 placed to assist enterprise customers achieve this transformation. </p>
<h1><a name="References"></a>9 References</h1>
<p>Hanmer, Robert. <em>Patterns for Fault Tolerant Software</em>. Hoboken, NJ: John Wiley, 2007.<br />
<br />
Microsoft Services. Interviews with members of the following software development teams at Microsoft:</p>
<ul>
<li>Microsoft Global Foundation Services (September 2010) </li><li>Microsoft Exchange Server, Exchange Online, live@edu (October 2010) </li><li>Microsoft SQL Server (October 2010) </li></ul>
<p>Microsoft IT Showcase. “<a href="http://technet.microsoft.com/en-us/library/gg575757.aspx">Microsoft IT Enterprise Architecture and the Cloud</a>”<br />
<br />
Microsoft Presspass. “<a href="http://www.microsoft.com/presspass/presskits/cloud/docs/The-Economics-of-the-Cloud.pdf">The Economics of the Cloud</a>” November 2010<br />
<br />
MSDN Visual Studio. “<a href="http://msdn.microsoft.com/en-us/library/e7k32f4k%28v=VS.100%29.aspx">Profile-Guided Optimizations</a>”</p>

</div>
    
    