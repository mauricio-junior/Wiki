---
layout: default
title: 'Troubleshooting Applications using Windows Server AppFabric - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p>In this post, we will show how to use the same tools in more advanced ways to troubleshoot problems in your applications.
</p>
<p><strong>Introduction</strong> </p>
<p>The previous post introduced the AppFabric Dashboard (pictured below). As you can see, it does a good job of m"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fijgiving you a quick view of the state of your WCF and WF services while highlighting potential problems. The AppFabric Dashboard is the starting point
 for many paths that you can take while troubleshooting. We’ll explore a few of the more common paths to get you familiar with the toolset.
</p>
<p><strong>Tracked Events</strong> </p>
<p>Most tracked events are not used and therefore the monitoring level should carefully be chosen for your application. Most troubleshooting scenarios will require users to examine event data that was captured from the problematic service at the time the problem
 manifested itself. The dashboard provides several ways to drill down into the relevant event data quickly.<strong></strong>
</p>
<p><strong>How to Drilldown</strong> </p>
<p>AppFabric provides a Tracked Events View that displays event data within IIS manager. This view lets users customize the query that is sent to the monitoring database using common filters. From the dashboard, you can use the
<strong>Tracked Events Action</strong> to see the latest events that have been tracked, and then customize your query. Alternatively, you can click on any of the metrics displayed in the
<strong>WCF Call History</strong> and <strong>WF Instance History</strong> sections, and a pre-created query will be used to save you time. For example, you could click the
<strong>Exceptions</strong> metric and the resulting query would just show event data that contains exception information.
</p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image002_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image002_thumb.jpg" alt="clip_image002" height="138" title="clip_image002" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><strong>Using the Main Event List Pane</strong> </p>
<p>The main pane within the Tracked Events View displays a table of events that match the current query. The sortable columns in the table provide a high level summary of what the events mean. You can also right click rows in the table to get a context menu
 that provides useful tasks such as relating an event to a tracked Workflow instance. This is useful when you want to get events from an operation that spanned multiple services, maybe even different machines, as long as they are sharing the same monitoring
 database. </p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image004_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image004_thumb.jpg" alt="clip_image004" height="186" title="clip_image004" style="display:inline;border-width:0px;border-style:solid;" /></a><strong></strong>
</p>
<p><strong>Using the Details Pane</strong> </p>
<p>When an event is selected in the main pane, the <strong>Details Pane</strong> at the bottom of the view displays information that was captured with the selected event. This includes custom event properties, environment information, tracked variables (for
 Workflow Services), and Error details (if applicable). </p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image006_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image006_thumb.jpg" alt="clip_image006" height="80" title="clip_image006" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image008_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image008_thumb.jpg" alt="clip_image008" height="80" title="clip_image008" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><strong>Using the Query Summary</strong> </p>
<p>As mentioned earlier, the query that is used to retrieve event data from the monitoring database can be customized. You would do this using the
<strong>Query Summary</strong> control at the top of the Tracked Events View. Using this control, you can filter by several common criteria such as Emit Time, Event Type, End To End Activity Id, and Tracked Variables (Workflow only).
</p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image010_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image010_thumb.jpg" alt="clip_image010" height="86" title="clip_image010" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image012_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image012_thumb.jpg" alt="clip_image012" height="88" title="clip_image012" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><strong>Monitoring Configuration</strong> </p>
<p>AppFabric provides a default monitoring configuration that is sufficient for common health monitoring and basic troubleshooting tasks. Sometimes, a more granular level of event data is required to troubleshoot a problem. AppFabric provides a UI tool that
 lets you modify the monitoring configuration that is stored in web.config files.
</p>
<p><em><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image014_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image014_thumb.jpg" alt="clip_image014" height="160" title="clip_image014" style="display:inline;border-width:0px;border-style:solid;" /></a></em><strong></strong>
</p>
<p><strong>Changing the Monitoring Levelheight="88" title="clip_image012" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><strong>Monitoring Configuration</strong> </p>
<p>AppFabric provides a default monitoring configuration that is sufficient for common health monitoring and basic troubleshooting tasks. Sometimes, a more granular level of event data is required to troubleshoot a problem. AppFabric provides a UI tool that
 lets you modify the monitoring configuration that is stored in web.config files.
</p>
<p><em><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/c</strong> </p>
<p>From any scope in the IIS hierarchy (Server, Web Site, Application), select the
<strong>Configure</strong> action from within the <strong>.NET 4 WCF and WF </strong>
Action section and then select the <strong>Monitoring </strong>tab. You can then choose from one of the 5 predefined monitoring levels.
</p>
<blockquote>
<p>· <strong>Off</strong><strong>*</strong> – No event data is collected </p>
</blockquote>
<blockquote>
<p><strong><em><span style="color:#000080;">Use this level if you don’t want to pay any overhead for collection event data</span></em></strong>
</p>
</blockquote>
<blockquote>
<p>· <strong>Errors Only</strong><strong>*</strong> – Only warning and error information is collected
</p>
</blockquote>
<blockquote>
<p><strong><em><span style="color:#000080;">Use this level if you’re not interested in calculating health monitoring metrics, you want optimal performance, but you still want visibility into errors</span></em></strong>
</p>
</blockquote>
<blockquote>
<p>· <strong>Health Monitoring (default)</strong> – Collects all information from “Errors Only” as well as lightweight event data that allows the Dashboard’s metrics to be populated.
</p>
</blockquote>
<blockquote>
<p><strong><em><span style="color:#000080;">Use this level if you want a balance between event collection overhead and visibility into the state of your services</span></em></strong>
</p>
</blockquote>
<blockquote>
<p>· <strong>End To End Monitoring </strong>– Collects all information from “Health Monitoring” as well as additional events that allow the construction of message flows across distributed service calls.
</p>
</blockquote>
<blockquote>
<p><strong><em><span style="color:#000080;">Use this level if you need to reconstruct the flow of your service(s)’ execution, either for one service or across services.</span></em></strong>
</p>
</blockquote>
<blockquote>
<p>· <strong>Troubleshooting</strong> – Collects all available event data, excluding tracked Workflow variables and arguments. Note that to collect this application specific data a custom tracking profile must be used.
</p>
</blockquote>
<blockquote>
<p><strong><em><span style="color:#000080;">Use this level if you need the most detailed information that is available. This is useful when troubleshooting problems that are not immediately obvious.</span></em></strong>
</p>
</blockquote>
<p><strong>*</strong><em> NOTE: at OFF and Error levels dashboard metrics will <strong>
<span style="text-decoration:underline;">not</span></strong> be fully functional</em>
</p>
<p><em></em></p>
<p><em><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image016_2.jpg"><img width="244" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image016_thumb.jpg" alt="clip_image016" height="186" title="clip_image016" style="display:inline;border-width:0px;border-style:solid;" /></a></em><em></em>
</p>
<p><strong>Configuring System.Diagnostics Tracing and Message Logging</strong> </p>
<p>While the tools described above will help you troubleshoot the more common problems, more advanced will warrant more invasive techniques. More detailed log files may be required to diagnose a problem. In this case, a user might want to enable System.Diagnostics
 Tracing and Message Logging via their configuration files. AppFabric provides a tool that lets you enable and configure these capabilities from within IIS Manager. While on the monitoring tab in the Configure WCF and WF dialog, note the
<strong>Diagnostic Tracing and Message Logging </strong>section. Click <strong>Configure</strong>. The dialog that appears makes it very easy to configure the level of tracing/message logging, as well as the destination file location(s).
</p>
<p><a href="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image018_2.jpg"><img width="209" src="http://blogs.technet.com/blogfiles/appfabric/WindowsLiveWriter/TroubleshootingApplicationsusingWindowsS_EE79/clip_image018_thumb.jpg" alt="clip_image018" height="244" title="clip_image018" style="display:inline;border-width:0px;border-style:solid;" /></a>
</p>
<p><strong>Summary and Additional Resources</strong> </p>
<p>In this post, you learned about some of the troubleshooting capabilities built into AppFabric’s IIS Manager Tools. Look for future posts to go into more advanced administration topics that let you use PowerShell and other tools to manage your AppFabric environment.</p>

</div>
    
    
